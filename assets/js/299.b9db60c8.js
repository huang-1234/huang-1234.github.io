(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{730:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_1-浅谈-js-类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-浅谈-js-类型"}},[t._v("#")]),t._v(" 1. 浅谈 JS 类型")]),t._v(" "),s("h2",{attrs:{id:"原始类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原始类型"}},[t._v("#")]),t._v(" 原始类型")]),t._v(" "),s("p",[t._v("在 es 中，存在着 7 种原始类型：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("Boolean")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Null")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Undefined")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Number")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("String")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Symbol")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("BigInt")])]),t._v(" "),s("p",[t._v("一种引用类型")])])]),t._v(" "),s("p",[s("code",[t._v("object")])]),t._v(" "),s("p",[t._v("原始类型存储的是值，没有函数可以调用。")]),t._v(" "),s("p",[t._v("那么有个问题，为什么 "),s("code",[t._v("1..toString()")]),t._v(" 是正确的？而 "),s("code",[t._v("1.toString()")]),t._v(" 却不行了呢？")]),t._v(" "),s("p",[t._v("原因在于数字 1 后面接的第一个点 "),s("code",[t._v(".")]),t._v(" , 编译器是直接当成数字的一部分，而 "),s("code",[t._v("1.")]),t._v(" 后面再接上一个点 "),s("code",[t._v(".")]),t._v(" 才会被当成数字在调用方法，而这也只是数字的隐藏类 "),s("code",[t._v("Number")]),t._v(" 在调用它原型上的方法，数字本身只是基本类型，没有方法和属性，如果调用就会调用相应隐藏类的方法和属性。这个也许就是你不知道的 JS 讲的行为委托设计思想。")]),t._v(" "),s("blockquote",[s("p",[t._v("引用数据类型: 对象 Object（包含普通对象-Object，数组对象-Array，正则对象-RegExp，日期对象-Date，数学函数-Math，函数对象-Function），区分它们最好的方法就是后面将要介绍的 "),s("code"),t._v(" Object.prototype.toString.call(target).slice(8, -1)`")])]),t._v(" "),s("blockquote",[s("p",[t._v("tartget 是需要被检测的对象，后面再加一个 slice(8, -1)是为了去掉前面的[object ]")])]),t._v(" "),s("h2",{attrs:{id:"七种原始类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#七种原始类型"}},[t._v("#")]),t._v(" 七种原始类型")]),t._v(" "),s("h3",{attrs:{id:"bigint-类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bigint-类型"}},[t._v("#")]),t._v(" bigint 类型")]),t._v(" "),s("p",[t._v("对于学过其他语言的程序员来说，JS 中缺少显式整数类型常常令人困惑。许多编程语言支持多种数字类型，如浮点型、双精度型、整数型和双精度型，但 JS 却不是这样。在 JS 中，按照"),s("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FIEEE_754-2008_revision",target:"_blank",rel:"noopener noreferrer"}},[t._v("IEEE 754-2008"),s("OutboundLink")],1),t._v("标准的定义，所有数字都以"),s("a",{attrs:{href:"https://link.segmentfault.com/?url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDouble_precision_floating-point_format",target:"_blank",rel:"noopener noreferrer"}},[t._v("双精度 64 位浮点"),s("OutboundLink")],1),t._v("格式表示。")]),t._v(" "),s("p",[t._v("在此标准下，无法精确表示的非常大的整数将自动四舍五入。确切地说，JS 中的 "),s("code",[t._v("Number")]),t._v(" 类型只能安全地表示 "),s("code",[t._v("-9007199254740991 (-(2^53-1))")]),t._v(" 和 "),s("code",[t._v("9007199254740991(2^53-1)")]),t._v(" 之间的整数，任何超出此范围的整数值都可能失去精度。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9999999999999999")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 10000000000000000")]),t._v("\n")])])]),s("p",[t._v("该整数大于 JS Number 类型所能表示的最大整数，因此，它被四舍五入的。意外四舍五入会损害程序的可靠性和安全性。这是另一个例子：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意最后一位的数字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740992")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740993")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → true")]),t._v("\n")])])]),s("p",[t._v("JS 提供 "),s("code",[t._v("Number.MAX_SAFE_INTEGER")]),t._v(" 常量来表示 最大安全整数， "),s("code",[t._v("Number.MIN_SAFE_INTEGER")]),t._v(" 常量表示最小安全整数：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" minInt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MIN_SAFE_INTEGER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → -9007199254740991")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minInt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → -9007199254740996")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// notice how this outputs the same value as above")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minInt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → -9007199254740996")]),t._v("\n")])])]),s("h4",{attrs:{id:"解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),s("p",[t._v("为了解决这些限制，一些 JS 开发人员使用字符串类型表示大整数。 例如，"),s("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdeveloper.twitter.com%2Fen%2Fdocs%2Fbasics%2Ftwitter-ids",target:"_blank",rel:"noopener noreferrer"}},[t._v("Twitter API"),s("OutboundLink")],1),t._v(" 在使用 JSON 进行响应时会向对象添加字符串版本的 ID。 此外，还开发了许多库，例如 "),s("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fgithub.com%2FMikeMcl%2Fbignumber.js%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("bignumber.js"),s("OutboundLink")],1),t._v("，以便更容易地处理大整数。")]),t._v(" "),s("p",[t._v("使用 BigInt，应用程序不再需要变通方法或库来安全地表示 "),s("code",[t._v("Number.MAX_SAFE_INTEGER")]),t._v(" 和 "),s("code",[t._v("Number.Min_SAFE_INTEGER")]),t._v(" 之外的整数。 现在可以在标准 JS 中执行对大整数的算术运算，而不会有精度损失的风险。")]),t._v(" "),s("p",[t._v("要创建 "),s("code",[t._v("BigInt")]),t._v(" ，只需在整数的末尾追加 n 即可。比较:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740995n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740995n")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740995")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740996")]),t._v("\n")])])]),s("p",[t._v("或者，可以调用 "),s("code",[t._v("BigInt()")]),t._v(" 构造函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9007199254740995"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740995n")]),t._v("\n")])])]),s("p",[s("code",[t._v("BigInt")]),t._v(" 文字也可以用二进制、八进制或十六进制表示")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// binary")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0b100000000000000000000000000000000000000000000000000011n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740995n")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hex")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x20000000000003n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740995n")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// octal")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0o400000000000000003n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9007199254740995n")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// note that legacy octal syntax is not supported")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0400000000000000003n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → SyntaxError")]),t._v("\n")])])]),s("p",[t._v("请记住，不能使用严格相等运算符将 "),s("code",[t._v("BigInt")]),t._v(" 与常规数字进行比较，因为它们的类型不同：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → false")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → bigint")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → number")]),t._v("\n")])])]),s("p",[t._v("相反，可以使用等号运算符，它在处理操作数之前执行隐式类型转换")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → true")]),t._v("\n")])])]),s("p",[t._v("除一元加号( "),s("code",[t._v("+")]),t._v(" )运算符外，所有算术运算符都可用于 "),s("code",[t._v("BigInt")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 30n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → -10n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → TypeError: Cannot convert a BigInt value to a number")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → -10n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 200n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 2n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 3n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 1000n")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 11n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 9n")]),t._v("\n")])])]),s("p",[t._v("不支持一元加号（ "),s("code",[t._v("+")]),t._v(" ）运算符的原因是某些程序可能依赖于 "),s("code",[t._v("+")]),t._v(" 始终生成 "),s("code",[t._v("Number")]),t._v(" 的不变量，或者抛出异常。 更改 "),s("code",[t._v("+")]),t._v(" 的行为也会破坏 "),s("code",[t._v("asm.js")]),t._v(" 代码。")]),t._v(" "),s("p",[t._v("当然，与 "),s("code",[t._v("BigInt")]),t._v(" 操作数一起使用时，算术运算符应该返回 "),s("code",[t._v("BigInt")]),t._v(" 值。因此，除法( "),s("code",[t._v("/")]),t._v(" )运算符的结果会自动向下舍入到最接近的整数。例如:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 2.5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 2n")]),t._v("\n")])])]),s("h4",{attrs:{id:"隐式类型转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐式类型转换"}},[t._v("#")]),t._v(" 隐式类型转换")]),t._v(" "),s("p",[t._v("因为隐式类型转换可能丢失信息，所以不允许在 "),s("code",[t._v("bigint")]),t._v(" 和 "),s("code",[t._v("Number")]),t._v(" 之间进行混合操作。当混合使用大整数和浮点数时，结果值可能无法由 "),s("code",[t._v("BigInt")]),t._v(" 或 "),s("code",[t._v("Number")]),t._v(" 精确表示。思考下面的例子：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740992n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n")])])]),s("p",[t._v("这个表达式的结果超出了 "),s("code",[t._v("BigInt")]),t._v(" 和 "),s("code",[t._v("Number")]),t._v(" 的范围。小数部分的 "),s("code",[t._v("Number")]),t._v(" 不能精确地转换为 "),s("code",[t._v("BigInt")]),t._v(" 。大于 "),s("code",[t._v("2^53")]),t._v(" 的 "),s("code",[t._v("BigInt")]),t._v(" 不能准确地转换为数字。")]),t._v(" "),s("p",[t._v("由于这个限制，不可能对混合使用 "),s("code",[t._v("Number")]),t._v(" 和 "),s("code",[t._v("BigInt")]),t._v(" 操作数执行算术操作。还不能将 "),s("code",[t._v("BigInt")]),t._v(" 传递给 Web api 和内置的 JS 函数，这些函数需要一个 "),s("code",[t._v("Number")]),t._v(" 类型的数字。尝试这样做会报 "),s("code",[t._v("TypeError")]),t._v(" 错误")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → TypeError")]),t._v("\nMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → TypeError")]),t._v("\n")])])]),s("p",[s("strong",[t._v("请注意")]),t._v("，关系运算符不遵循此规则，如下例所示：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → true")]),t._v("\n")])])]),s("p",[t._v("如果希望使用 "),s("code",[t._v("BigInt")]),t._v(" 和 "),s("code",[t._v("Number")]),t._v(" 执行算术计算，首先需要确定应该在哪个类型中执行该操作。为此，只需通过调用 "),s("code",[t._v("Number()")]),t._v(" 或 "),s("code",[t._v("BigInt()")]),t._v(" 来转换操作数：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 20n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 20")]),t._v("\n")])])]),s("p",[t._v("当 "),s("code",[t._v("Boolean")]),t._v(" 类型与 "),s("code",[t._v("BigInt")]),t._v(" 类型相遇时， "),s("code",[t._v("BigInt")]),t._v(" 的处理方式与 "),s("code",[t._v("Number")]),t._v(" 类似，换句话说，只要不是 "),s("code",[t._v("0n")]),t._v(" ， "),s("code",[t._v("BigInt")]),t._v(" 就被视为 "),s("code",[t._v("truthy")]),t._v(" 的值：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里代码块将被执行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里代码块不会执行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("排序 "),s("code",[t._v("BigInts")]),t._v(" 和 "),s("code",[t._v("Numbers")]),t._v(" 数组时，不会发生隐式类型转换：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\narr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → [-1n, 0, 1n, 2, 3n, 4]")]),t._v("\n")])])]),s("p",[t._v("位操作符如 "),s("code",[t._v("|、&、<<、>>")]),t._v(" 和 "),s("code",[t._v("^")]),t._v(" 对 "),s("code",[t._v("Bigint")]),t._v(" 的操作方式与 "),s("code",[t._v("Number")]),t._v(" 类似。下面是一些例子")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("115")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 123")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("115n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 123n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("115")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → TypeError")]),t._v("\n")])])]),s("h4",{attrs:{id:"bigint-构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bigint-构造函数"}},[t._v("#")]),t._v(" BigInt 构造函数")]),t._v(" "),s("p",[t._v("与其他基本类型一样，可以使用构造函数创建 "),s("code",[t._v("BigInt")]),t._v(" 。传递给 "),s("code",[t._v("BigInt()")]),t._v(" 的参数将自动转换为 "),s("code",[t._v("BigInt")]),t._v(" :")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 10n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 10n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 1n")]),t._v("\n")])])]),s("p",[t._v("无法转换的数据类型和值会引发异常:")]),t._v(" "),s("div",{staticClass:"language-coffeescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-coffeescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" → RangeError\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" → TypeError\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"abc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" → SyntaxError\n")])])]),s("p",[t._v("可以直接对使用构造函数创建的 "),s("code",[t._v("BigInt")]),t._v(" 执行算术操作")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → 100n")]),t._v("\n")])])]),s("p",[t._v("使用严格相等运算符的操作数时，使用构造函数创建的 "),s("code",[t._v("Bigint")]),t._v(" 与常规 "),s("code",[t._v("Bigint")]),t._v(" 的处理方式类似")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → true")]),t._v("\n")])])]),s("h4",{attrs:{id:"库函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#库函数"}},[t._v("#")]),t._v(" 库函数")]),t._v(" "),s("p",[t._v("在撰写本文时， "),s("code",[t._v("Chrome +67")]),t._v(" 和 "),s("code",[t._v("Opera +54")]),t._v(" 完全支持 "),s("code",[t._v("BigInt")]),t._v(" 数据类型。不幸的是， "),s("code",[t._v("Edge")]),t._v(" 和 "),s("code",[t._v("Safari")]),t._v(" 还没有实现它。 "),s("code",[t._v("Firefox")]),t._v(" 默认不支持 BigInt，但是可以在 "),s("code",[t._v("about:config")]),t._v(" 中将 "),s("code",[t._v("javascript.options.bigint")]),t._v(" 设置为 "),s("code",[t._v("true")]),t._v(" 来开启它，最新支持的情况可在“"),s("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcaniuse.com%2F%23search%3Dbigint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Can I use"),s("OutboundLink")],1),t._v("”上查看。")]),t._v(" "),s("p",[t._v("不幸的是，转换 "),s("code",[t._v("BigInt")]),t._v(" 是一个极其复杂的过程，这会导致严重的运行时性能损失。直接 polyfill "),s("code",[t._v("BigInt")]),t._v(" 也是不可能的，因为该提议改变了几个现有操作符的行为。目前，更好的选择是使用"),s("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fgithub.com%2FGoogleChromeLabs%2Fjsbi",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSBI"),s("OutboundLink")],1),t._v("库，它是 "),s("code",[t._v("BigInt")]),t._v(" 提案的纯 JS 实现。")]),t._v(" "),s("p",[t._v("这个库提供了一个与原生 "),s("code",[t._v("BigInt")]),t._v(" 行为完全相同的 API。下面是如何使用 JSBI：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSBI")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./jsbi.mjs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSBI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_SAFE_INTEGER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSBI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSBI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// → '9007199254741001'")]),t._v("\n")])])]),s("p",[t._v("使用 "),s("code",[t._v("JSBI")]),t._v(" 的一个优点是，一旦浏览器支持，就不需要重写代码。 相反，可以使用 "),s("code",[t._v("babel")]),t._v(" 插件自动将 JSBI 代码编译为原生 "),s("code",[t._v("BigInt")]),t._v(" 代码。")]),t._v(" "),s("h4",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[s("code",[t._v("BigInt")]),t._v(" 是一种新的数据类型，用于当整数值大于 "),s("code",[t._v("Number")]),t._v(" 数据类型支持的范围时。这种数据类型允许我们安全地对大整数执行算术操作，表示高分辨率的时间戳，使用大整数 id，等等，而不需要使用库。")]),t._v(" "),s("p",[t._v("重要的是要记住，不能使用 "),s("code",[t._v("Number")]),t._v(" 和 "),s("code",[t._v("BigInt")]),t._v(" 操作数的混合执行算术运算，需要通过显式转换其中的一种类型。 此外，出于兼容性原因，不允许在 "),s("code",[t._v("BigInt")]),t._v(" 上使用一元加号（ "),s("code",[t._v("+")]),t._v(" ）运算符。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n    person "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Andy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" person\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sq'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> ?")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> ?")]),t._v("\n")])])]),s("p",[t._v("结果:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("p1： "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sq'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("p2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Andy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("原因: 在函数传参的时候传递的是对象在堆中的内存地址值，test 函数中的实参 person 是 p1 对象的内存地址，通过调用 person.age = 18 确实改变了 p1 的值，但随后 person 变成了另一块内存空间的地址，并且在最后将这另外一份内存空间的地址返回，赋给了 p2。")])]),t._v(" "),s("h3",{attrs:{id:"对象类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对象类型"}},[t._v("#")]),t._v(" 对象类型")]),t._v(" "),s("p",[t._v("对象类型和原始类型不同的是，原始类型存储的是值，对象类型存储的是地址（指针）。")]),t._v(" "),s("p",[t._v("当你创建了一个对象类型的时候，计算机会在内存中帮我们开辟一个空间来存放值，但是我们需要找到这个空间，这个空间会拥有一个地址（指针）。")]),t._v(" "),s("h3",{attrs:{id:"正确判断-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#正确判断-null"}},[t._v("#")]),t._v(" 正确判断 null")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//object")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Null]"')]),t._v("\n")])])]),s("h3",{attrs:{id:"typeof-vs-instanceof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#typeof-vs-instanceof"}},[t._v("#")]),t._v(" typeof vs instanceof")]),t._v(" "),s("p",[s("code",[t._v("typeof")]),t._v(" 对于原始类型来说，除了 "),s("code",[t._v("null")]),t._v(" 都可以显示正确的类型")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'number'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'string'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'undefined'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'boolean'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Symbol")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'symbol'")]),t._v("\n")])])]),s("p",[s("code",[t._v("typeof")]),t._v(" 对于对象来说，除了函数都会显示 "),s("code",[t._v("object")]),t._v(" ，所以说 "),s("code",[t._v("typeof")]),t._v(" 并不能准确判断变量到底是什么类型.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'object'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'object'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'function'")]),t._v("\n")])])]),s("p",[t._v("如果我们想判断一个对象的正确类型，这时候可以考虑使用 "),s("code",[t._v("instanceof")]),t._v(" ，因为内部机制是通过原型链来判断的。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Person")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\np1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),t._v("\nstr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nstr1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("p",[t._v("对于原始类型来说，你想直接通过 "),s("code",[t._v("instanceof")]),t._v(" 来判断类型是不行的，当然我们还是有办法让 "),s("code",[t._v("instanceof")]),t._v(" 判断原始类型的")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrimitiveString")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasInstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrimitiveString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("h3",{attrs:{id:"类型转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型转换"}},[t._v("#")]),t._v(" 类型转换")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("js")]),t._v(" 中，只有三种类型转换")]),t._v(" "),s("ul",[s("li",[t._v("转换为布尔值")]),t._v(" "),s("li",[t._v("转换为数字")]),t._v(" "),s("li",[t._v("转换为字符串")])]),t._v(" "),s("h3",{attrs:{id:"转-boolean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转-boolean"}},[t._v("#")]),t._v(" 转 Boolean")]),t._v(" "),s("p",[t._v("在条件判断时，除了 "),s("code",[t._v("undefined")]),t._v(" ， "),s("code",[t._v("null")]),t._v(" ， "),s("code",[t._v("false")]),t._v(" ， "),s("code",[t._v("NaN")]),t._v(" ， "),s("code",[t._v("''")]),t._v(" ， "),s("code",[t._v("0")]),t._v(" ， "),s("code",[t._v("-0")]),t._v(" ，其他所有值都转为 "),s("code",[t._v("true")]),t._v(" ，包括所有对象。")]),t._v(" "),s("h3",{attrs:{id:"对象转原始类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对象转原始类型"}},[t._v("#")]),t._v(" 对象转原始类型")]),t._v(" "),s("p",[t._v("一般非基础类型进行转换时会先调用 valueOf，如果 valueOf 无法返回基本类型值，就会调用 toString")]),t._v(" "),s("p",[t._v("对象在转换类型的时候，会调用内置的 "),s("code",[t._v("[[ToPrimitive]]")]),t._v(" 函数，对于该函数来说，算法逻辑一般来说如下：")]),t._v(" "),s("ul",[s("li",[t._v("先检测该对象中是否存在 "),s("code",[t._v("valueOf")]),t._v(" 方法，如果有并返回了原始类型，那么就使用该值进行强制类型转换；")]),t._v(" "),s("li",[t._v("如果 "),s("code",[t._v("valueOf")]),t._v(" 没有返回原始类型，那么就使用 "),s("code",[t._v("toString")]),t._v(" 方法的返回值；")]),t._v(" "),s("li",[t._v("如果 "),s("code",[t._v("vauleOf")]),t._v(" 和 "),s("code",[t._v("toString")]),t._v(" 两个方法都不返回基本类型值，便会触发一个 "),s("code",[t._v("TypeError")]),t._v(" 的错误。")])]),t._v(" "),s("p",[t._v("也可以重写 "),s("code",[t._v("Symbol.toPrimitive")]),t._v(" ，该方法在转原始类型时调用优先级最高。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toPrimitive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 3")]),t._v("\n")])])]),s("h3",{attrs:{id:"四则运算符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四则运算符"}},[t._v("#")]),t._v(" 四则运算符")]),t._v(" "),s("p",[t._v("加法运算符不同于其他几个运算符，它有以下几个特点：")]),t._v(" "),s("ul",[s("li",[t._v("运算中其中一方为字符串，那么就会把另一方也转换为字符串。")]),t._v(" "),s("li",[t._v("如果一方不是字符串或者数字，那么会将它转换为数字或者字符串")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '11'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "41,2,3"')]),t._v("\n")])])]),s("p",[t._v("对于除了加法的运算符来说，只要其中一方是数字，那么另一方就会被转为数字")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 12")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NaN")]),t._v("\n")])])]),s("h3",{attrs:{id:"比较运算符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#比较运算符"}},[t._v("#")]),t._v(" 比较运算符")]),t._v(" "),s("ul",[s("li",[t._v("如果是对象，就通过 "),s("code",[t._v("toPrimitive")]),t._v(" 转换对象")]),t._v(" "),s("li",[t._v("如果是字符串，就通过 "),s("code",[t._v("unicode")]),t._v(" 字符索引来比较")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\na "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("h3",{attrs:{id:"vs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vs"}},[t._v("#")]),t._v(" == VS ===")]),t._v(" "),s("p",[t._v("对于 "),s("code",[t._v("==")]),t._v(" 来说，如果对比双方的类型"),s("strong",[t._v("不一样")]),t._v("的话，就会进行"),s("strong",[t._v("类型转换")]),t._v(".")]),t._v(" "),s("p",[t._v("假如我们需要对比 "),s("code",[t._v("x")]),t._v(" 和 "),s("code",[t._v("y")]),t._v(" 是否相同，就会进行如下判断流程：")]),t._v(" "),s("ol",[s("li",[t._v("首先会判断两者类型是否"),s("strong",[t._v("相同")]),t._v("。相同的话就是比大小了")]),t._v(" "),s("li",[t._v("类型不相同的话，那么就会进行类型转换")]),t._v(" "),s("li",[t._v("会先判断是否在对比 "),s("code",[t._v("null")]),t._v(" 和 "),s("code",[t._v("undefined")]),t._v("，是的话就会返回 "),s("code",[t._v("true")])]),t._v(" "),s("li",[t._v("判断两者类型是否为 "),s("code",[t._v("string")]),t._v(" 和 "),s("code",[t._v("number")]),t._v("，是的话就会将字符串转换为 "),s("code",[t._v("number")])]),t._v(" "),s("li",[t._v("判断其中一方是否为 "),s("code",[t._v("boolean")]),t._v("，是的话就会把 "),s("code",[t._v("boolean")]),t._v(" 转为 "),s("code",[t._v("number")]),t._v(" 再进行判断")]),t._v(" "),s("li",[t._v("判断其中一方是否为 "),s("code",[t._v("object")]),t._v(" 且另一方为 "),s("code",[t._v("string")]),t._v("、"),s("code",[t._v("number")]),t._v(" 或者 "),s("code",[t._v("symbol")]),t._v("，是的话就会把 "),s("code",[t._v("object")]),t._v(" 转为原始类型再进行判断")])]),t._v(" "),s("p",[t._v("对于 "),s("code",[t._v("===")]),t._v(" 来说，就是判断两者类型和值是否相同")]),t._v(" "),s("p",[t._v("[] == ![] 为何是 true？")]),t._v(" "),s("p",[t._v("首先看右边，! 符号会将后面的变量强转为 boolean 值，由于 [] 转换为 boolean 是 true，故右边为 false，然后依照上方的第 5 条，将 false 转换为数字 0。")]),t._v(" "),s("p",[t._v("然后看左边，满足第六条的条件，调用 valueOf，由于空数组调用 valueOf 是转化为 0 ，故返回值是 true。")]),t._v(" "),s("h2",{attrs:{id:"常见"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见"}},[t._v("#")]),t._v(" 常见")]),t._v(" "),s("h3",{attrs:{id:"_0-1-0-2-0-3-嘛-为什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-1-0-2-0-3-嘛-为什么"}},[t._v("#")]),t._v(" 0.1 + 0.2 === 0.3 嘛？为什么？")]),t._v(" "),s("p",[t._v("在两数相加时，会先转换成二进制，0.1 和 0.2 转换成二进制的时候尾数会发生无限循环，然后进行对阶运算，JS 引擎对二进制进行截断，所以造成精度丢失。")]),t._v(" "),s("p",[t._v("所以总结："),s("strong",[t._v("精度丢失可能出现在进制转换和对阶运算中")])]),t._v(" "),s("h3",{attrs:{id:"js-整数是怎么表示的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-整数是怎么表示的"}},[t._v("#")]),t._v(" JS 整数是怎么表示的？")]),t._v(" "),s("p",[t._v("通过 Number 类型来表示，遵循 IEEE754 标准，通过 64 位来表示一个数字，（1 + 11 + 52）（1 位数符 + 11 位阶码 + 52 位尾数），最大安全数字是 Math.pow(2, 53) - 1。（符号位 + 指数位 + 小数部分有效位）")]),t._v(" "),s("h3",{attrs:{id:"symbol-有什么用处"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#symbol-有什么用处"}},[t._v("#")]),t._v(" "),s("code",[t._v("symbol")]),t._v(" 有什么用处")]),t._v(" "),s("p",[t._v("可以用来表示一个独一无二的变量防止命名冲突。")]),t._v(" "),s("p",[t._v("可以利用 "),s("code",[t._v("symbol")]),t._v(" 不会被常规的方法（除了 "),s("code",[t._v("Object.getOwnPropertySymbols")]),t._v(" 外）遍历到，所以可以用来模拟私有变量。")]),t._v(" "),s("p",[t._v("主要用来提供遍历接口，布置了 "),s("code",[t._v("symbol.iterator")]),t._v(" 的对象才可以使用 "),s("code",[t._v("for···of")]),t._v(" 循环，可以统一处理数据结构。调用之后回返回一个遍历器对象，包含有一个 next 方法，使用 next 方法后有两个返回值 value 和 done 分别表示函数当前执行位置的值和是否遍历完毕。")]),t._v(" "),s("p",[t._v("Symbol.for() 可以在全局访问 symbol。")]),t._v(" "),s("h3",{attrs:{id:"和-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#和-的区别"}},[t._v("#")]),t._v(" {} + [] 和 [] + {} 的区别")]),t._v(" "),s("p",[t._v('下面的说法来自《The Javascript You Dont Know》, 但是现在好像都是显示"[object Object]" 了')]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Object]"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0")]),t._v("\n")])])]),s("p",[t._v('看第一个，[] 会强转为 ""，{}强转为字符串为 '),s("code",[t._v('"[object Object]"')]),t._v(" 。两个字符串相加，得到最终结果。")]),t._v(" "),s("p",[t._v("第二个，编译器会把 {} 当作一个空代码块，可以理解为全局作用域下一个没有用的 {} 符号而已，可以把 "),s("code",[t._v("{} + []")]),t._v(" 当作 "),s("code",[t._v("+ []")]),t._v(" ，而 "),s("code",[t._v("+ []")]),t._v(" 是强制将 "),s("code",[t._v("[]")]),t._v(" 转换为 number , 转换的过程是 "),s("code",[t._v("+ []")]),t._v(" --\x3e "),s("code",[t._v('+""')]),t._v(" --\x3e "),s("code",[t._v("0")]),t._v(" 最终的结果就是 0。")]),t._v(" "),s("p",[t._v("但是我们执行 "),s("code",[t._v("console.log({}+[])")]),t._v(" 和 "),s("code",[t._v("console.log([]+{})")]),t._v(" , 结果是一样的，因为{}没有一个语句或者表达式的头部。")]),t._v(" "),s("h3",{attrs:{id:"symbol-类型转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#symbol-类型转换"}},[t._v("#")]),t._v(" Symbol 类型转换")]),t._v(" "),s("ul",[s("li",[t._v("不能被转换为数字")]),t._v(" "),s("li",[t._v("能被转换为布尔值（都是 true）")]),t._v(" "),s("li",[t._v('可以被转换成字符串 "Symbol(cool)"')])]),t._v(" "),s("h3",{attrs:{id:"假值列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#假值列表"}},[t._v("#")]),t._v(" 假值列表")]),t._v(" "),s("ul",[s("li",[t._v("undefined")]),t._v(" "),s("li",[t._v("null")]),t._v(" "),s("li",[t._v("false")]),t._v(" "),s("li",[t._v("+0, -0, NaN")]),t._v(" "),s("li",[t._v('""')])]),t._v(" "),s("h3",{attrs:{id:"nan-以及-typeof-nan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nan-以及-typeof-nan"}},[t._v("#")]),t._v(" NAN 以及 typeof NAN")]),t._v(" "),s("p",[t._v("NaN 指的是 Not a Number，表示非数字，typeof NaN = 'number'")]),t._v(" "),s("h2",{attrs:{id:"js-中-和-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-中-和-区别"}},[t._v("#")]),t._v(" js 中 "),s("code",[t._v("==")]),t._v(" 和 "),s("code",[t._v("===")]),t._v(" 区别")]),t._v(" "),s("h3",{attrs:{id:"简单概要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单概要"}},[t._v("#")]),t._v(" 简单概要")]),t._v(" "),s("p",[t._v("简单来说： == 代表相同， ===代表严格相同, 为啥这么说呢，")]),t._v(" "),s("p",[t._v("这么理解： 当进行双等号比较时候： 先检查两个操作数数据类型，如果相同， 则进行===比较， 如果不同， 则愿意为你进行一次类型转换， 转换成相同类型后再进行比较， 而===比较时， 如果类型不同，直接就是 false.")]),t._v(" "),s("p",[t._v("操作数 1 == 操作数 2， 操作数 1 === 操作数 2")]),t._v(" "),s("p",[t._v("比较过程：")]),t._v(" "),s("blockquote",[s("p",[t._v("双等号==：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("） 如果两个值类型相同， "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("再进行三个等号")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 的比较\n（ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("） 如果两个值类型不同， 也有可能相等， 需根据以下规则进行类型转换在比较：\n    a） 如果一个是"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("， 一个是"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("， 那么相等\n    b） 如果一个是字符串， 一个是数值， 把字符串转换成数值之后再进行比较\n")])])]),s("blockquote",[s("p",[t._v("三等号===:")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("） 如果类型不同， 就一定不相等\n（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("） 如果两个都是数值， 并且是同一个值， 那么相等； 如果其中至少一个是"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),t._v("， 那么不相等。（ 判断一个值是否是"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("NaN")]),t._v("， "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("只能使用isNaN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 来判断）\n（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("） 如果两个都是字符串， 每个位置的字符都一样， 那么相等， 否则不相等。\n（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("） 如果两个值都是"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("， 或是"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("， 那么相等\n（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("） 如果两个值都引用同一个对象或是函数， 那么相等， 否则不相等\n（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("） 如果两个值都是"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("， 或是"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("， 那么相等"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h1",{attrs:{id:"判断数据类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#判断数据类型"}},[t._v("#")]),t._v(" 判断数据类型")]),t._v(" "),s("p",[t._v("本文将通过下方知识点，来讲解判断 JavaScript 数据类型的 4 种方法：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("typeof()")])]),t._v(" "),s("li",[s("code",[t._v("instanceof()")])]),t._v(" "),s("li",[s("code",[t._v("constructor")])]),t._v(" "),s("li",[s("code",[t._v("Object.prototype.toString.call()")])])]),t._v(" "),s("p",[t._v("不管是面试中，亦或在工作上，会出现这么个场景：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("如何判断某个 JavaScript 字段的数据类型？")])])]),t._v(" "),s("p",[t._v("当然，它还可能是某个知识点的附赠品，例如：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("当你进行深拷贝数据的时候，你是如何判断这个字段是什么类型的？你知道判断数据类型有几种方式么？它们优缺点在哪？")])])]),t._v(" "),s("p",[t._v("那么，本文来讲解下，判断 JavaScript 数据类型的四种方法！")]),t._v(" "),s("h3",{attrs:{id:"三-typeof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-typeof"}},[t._v("#")]),t._v(" 三 typeof")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name typeof示例\n * @description 通过 typeof 检测各个数据类型的返回\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testUndefined")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testNull")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testBoolean")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testNumber")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testBigInt")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 大于 2 的 53 次方算 BigInt")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testString")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testSymbol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Symbol")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("testFunction")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testObject")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("obj")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yes'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testObjectString")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'String'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("testObjectNumber")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testUndefined"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testNull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// object")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testBoolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// boolean")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testNumber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// number")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testBigInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bigint")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testSymbol"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// symbol")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testFunction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// function")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// object")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testObjectString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// object")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testObjectNumber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// object")]),t._v("\n")])])]),s("p",[t._v("如上，可以看出，通过 "),s("code",[t._v("typeof")]),t._v(" ，我们可以判断大多数的类型，但是，它存在缺陷：")]),t._v(" "),s("ol",[s("li",[t._v("判断 "),s("code",[t._v("typeof null")]),t._v("，会得到 "),s("code",[t._v("object")]),t._v("； 这是因为在大部分的 JS 编译器内部对对象的描述，其首地址都是规定以 00 开头的，而当初设计的时候，null 的首地址又刚好就是 00 开头。")]),t._v(" "),s("li",[t._v("判断构造函数 "),s("code",[t._v("typeof new String('String')")]),t._v(" 或者 "),s("code",[t._v("typeof new Number(123)")]),t._v(" 等……，也会得到 "),s("code",[t._v("object")]),t._v("。")])]),t._v(" "),s("p",[t._v("即通过 "),s("code",[t._v("typeof")]),t._v(" 进行数据类型判断会有一定的问题。")]),t._v(" "),s("h3",{attrs:{id:"四-instanceof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四-instanceof"}},[t._v("#")]),t._v(" 四 instanceof")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name instanceof示例1\n * @description 检测字符串类型\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" simpleString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'这是简单的 String'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'这是 New 出来的 String'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simpleString "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false，检查原型链会返回 undefined")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newString "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name instanceof示例2\n * @description 检测数字类型\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" simpleNumber "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newNumber "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simpleNumber "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newNumber "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name instanceof示例3\n * @description 检测对象类型\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" simpleOjbect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newObject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simpleOjbect "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newObject "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("p",[t._v("如上， "),s("code",[t._v("instanceof")]),t._v(" 可能表现的差强人意，虽然它是可以检测数据类型，但是对于 "),s("code",[t._v("'' instanceof String")]),t._v(" 以及 "),s("code",[t._v("123 instanceof Number")]),t._v(" 等会返回 "),s("code",[t._v("false")]),t._v(" ，不太满足我们需求。")]),t._v(" "),s("p",[t._v("其实 "),s("code",[t._v("instanceof")]),t._v(" 主要用于检测构造函数的 "),s("code",[t._v("prototype")]),t._v(" 属性是否出现在某个实例对象的原型链上，这块知识点到时候我们可以进一步进行学习探索。（一件值得期待的事）")]),t._v(" "),s("h3",{attrs:{id:"五-constructor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五-constructor"}},[t._v("#")]),t._v(" 五 constructor")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name constructor示例\n * @description constructor 检测对象类型\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" num "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nul "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(nul.constructor);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 报错：Uncaught TypeError: Cannot read property 'constructor' of null at <anonymous>:1:5")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" undefin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(undefin.constructor);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 报错：Uncaught TypeError: Cannot read property 'constructor' of null at <anonymous>:1:5")]),t._v("\n")])])]),s("p",[s("code",[t._v("constructor")]),t._v(" 和前面的 "),s("code",[t._v("typeof")]),t._v(" 、 "),s("code",[t._v("instanceof")]),t._v(" 不同， "),s("code",[t._v("typeof")]),t._v(" 和 "),s("code",[t._v("instanceof")]),t._v(" 是属于 "),s("strong",[t._v("表达式和运算符")]),t._v(" 分类下的，而 "),s("code",[t._v("constructor")]),t._v(" 是直接关系到内置对象 "),s("code",[t._v("Object")]),t._v(" 下。")]),t._v(" "),s("p",[t._v("当然，这里我们讲的是校验数据类型，通过 "),s("code",[t._v("[].constructor === Array")]),t._v(" 或者 "),s("code",[t._v("(1).constructor === Number")]),t._v(" 会返回 "),s("code",[t._v("true")]),t._v(" ，符合我们的预期。")]),t._v(" "),s("p",[t._v("但是很遗憾的表示，当你使用 "),s("code",[t._v("null.constructor")]),t._v(" 或者 "),s("code",[t._v("undefined.constructor")]),t._v(" 它会毫不留情的给你报： "),s("code",[t._v("Uncaught TypeError: Cannot read property 'constructor' of null at <anonymous>:1:5")]),t._v(" ，所以我们也不能强行使用 "),s("code",[t._v("constructor")]),t._v(" 来做深拷贝时候的判断数据类型。")]),t._v(" "),s("h3",{attrs:{id:"六-object-tostring-call"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六-object-tostring-call"}},[t._v("#")]),t._v(" 六 Object.toString.call()")]),t._v(" "),s("p",[t._v("Object.prototype.toString.call()")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @name toString示例\n * @description toString 检测对象类型\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" toString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Date]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object String]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Math]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feHuang'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object String]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Number]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Array]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Object]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Undefined]")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Null]")]),t._v("\n")])])]),s("p",[t._v("在前面三种心有余而力不足的情况下， "),s("code",[t._v("Object.prototype.toString.call()")]),t._v(" 就显得稳定而实用了。")]),t._v(" "),s("p",[t._v("如果你看过 jQuery 源码，你会发现它的数据类型检测也是通过这个实现的（ "),s("code",[t._v("jQuery.type(obj)")]),t._v(" ）。")]),t._v(" "),s("p",[t._v("在检测数据类型方面，你不管检测 "),s("code",[t._v("Object.prototype.toString.call('aaa')")]),t._v(" 、 "),s("code",[t._v("Object.prototype.toString.call(null)")]),t._v(" 亦或者 "),s("code",[t._v("Object.prototype.toString.call(undefined)")]),t._v(" 都能得到你要的类型格式： "),s("code",[t._v("[object String]")]),t._v(" 、 "),s("code",[t._v("[object Null]")]),t._v(" 、 "),s("code",[t._v("[object Undefined]")]),t._v(" 。")]),t._v(" "),s("h3",{attrs:{id:"七-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#七-总结"}},[t._v("#")]),t._v(" 七 总结")]),t._v(" "),s("p",[t._v("如上，通过对比，我们得出结论，在进行 JavaScript 数据类型判断的时候，推荐使用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Object.prototype.toString.call()")])])]),t._v(" "),s("p",[t._v("当然，写到这里，虽然我们的文章看起来可能简洁短小点，但是感觉讲出了这四种方法在判断数据类型上的优缺点。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("apply()")])]),t._v(" "),s("li",[s("code",[t._v("bind()")])]),t._v(" "),s("li",[s("code",[t._v("call()")])]),t._v(" "),s("li",[s("code",[t._v("apply()、bind() 以及 call() 的区别")])])]),t._v(" "),s("h1",{attrs:{id:"object-prototype-tostring-方法的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-prototype-tostring-方法的原理"}},[t._v("#")]),t._v(" Object.prototype.toString 方法的原理")]),t._v(" "),s("p",[t._v("在 JavaScript 中，想要判断某个对象值属于哪种内置类型，最靠谱的做法就是通过 Object.prototype.toString 方法.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"[object Array]"')]),t._v("\n")])])]),s("p",[t._v("本文要讲的就是，toString 方法是如何做到这一点的，原理是什么.")]),t._v(" "),s("h3",{attrs:{id:"ecmascript-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-3"}},[t._v("#")]),t._v(" ECMAScript 3")]),t._v(" "),s("p",[t._v("在"),s("a",{attrs:{href:"http://bclary.com/2004/11/07/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES3"),s("OutboundLink")],1),t._v("中，Object.prototype.toString 方法的规范如下:")]),t._v(" "),s("blockquote",[s("p",[t._v("15.2.4.2 Object.prototype.toString()")]),t._v(" "),s("p",[t._v("在**"),s("code",[t._v("toString")]),s("strong",[t._v("方法被调用时，会执行下面的操作步骤:1. 获取 this 对象的[[Class]]属性的值.2. 计算出三个字符串")]),s("code",[t._v('"[object "，')]),t._v("** 第一步的操作结果 Result(1)， 以及 "),s("strong",[s("code",[t._v('"]"')])]),t._v(" "),s("code",[t._v("连接后的新字符串.")]),t._v(" 3. 返回第二步的操作结果 Result(2).")])]),t._v(" "),s("p",[t._v("[[Class]]是一个内部属性，所有的对象(原生对象和宿主对象)都拥有该属性. 在规范中，[[Class]]是这么定义的")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("内部属性")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("[[Class]]")]),t._v(" "),s("td",[t._v("一个字符串值, 表明了该对象的类型.")])])])]),t._v(" "),s("p",[t._v("然后给了一段解释:")]),t._v(" "),s("blockquote",[s("p",[t._v("所有内置对象的[[Class]]属性的值是由本规范定义的. 所有宿主对象的[[Class]]属性的值可以是任意值，甚至可以是内置对象使用过的[[Class]]属性的值.[[Class]]属性的值可以用来判断一个原生对象属于哪种内置类型. 需要注意的是，除了通过**"),s("code",[t._v("Object.prototype.toString")]),t._v("**方法之外，本规范没有提供任何其他方式来让程序访问该属性的值(查看 15.2.4.2).")])]),t._v(" "),s("p",[t._v("也就是说，把 Object.prototype.toString 方法返回的字符串，去掉前面固定的**"),s("code",[t._v('"[object "')]),s("strong",[t._v("和后面固定的")]),t._v('"]"，**就是内部属性[[class]]的值，也就达到了判断对象类型的目的.jQuery 中的工具方法$.type()，就是干这个的.')]),t._v(" "),s("p",[t._v("在 ES3 中，规范文档并没有总结出[[class]]内部属性一共有几种，不过我们可以自己统计一下，原生对象的[[class]]内部属性的值一共有 10 种. 分别是: "),s("code",[t._v('"Array"')]),t._v(" ， "),s("code",[t._v('"Boolean"')]),t._v(" ， "),s("code",[t._v('"Date"')]),t._v(" ， "),s("code",[t._v('"Error"')]),t._v(" ， "),s("code",[t._v('"Function"')]),t._v(" ， "),s("code",[t._v('"Math"')]),t._v(" ， "),s("code",[t._v('"Number"')]),t._v(" ， "),s("code",[t._v('"Object"')]),t._v(" ， "),s("code",[t._v('"RegExp"')]),t._v(" ， "),s("code",[t._v('"String".')])]),t._v(" "),s("h3",{attrs:{id:"ecmascript-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-5"}},[t._v("#")]),t._v(" ECMAScript 5")]),t._v(" "),s("p",[t._v("在"),s("a",{attrs:{href:"http://ecma-international.org/ecma-262/5.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES5.1"),s("OutboundLink")],1),t._v("中，除了规范写的更详细一些以外，Object.prototype.toString 方法和[[class]]内部属性的定义上也有一些变化，Object.prototype.toString 方法的规范如下:")]),t._v(" "),s("blockquote",[s("h5",{attrs:{id:"_15-2-4-2-object-prototype-tostring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-4-2-object-prototype-tostring"}},[t._v("#")]),t._v(" 15.2.4.2 Object.prototype.toString ( )")]),t._v(" "),s("p",[t._v("在**"),s("code",[t._v("toString")]),t._v("**方法被调用时，会执行下面的操作步骤:")]),t._v(" "),s("ol",[s("li",[t._v("如果"),s("strong",[t._v("this")]),t._v("的值为"),s("strong",[t._v("undefined")]),t._v("，则返回 "),s("code",[t._v('"[object Undefined]"')]),t._v(" .")]),t._v(" "),s("li",[t._v("如果"),s("strong",[t._v("this")]),t._v("的值为"),s("strong",[t._v("null")]),t._v("，则返回 "),s("code",[t._v('"[object Null]"')]),t._v(" .")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("O")]),t._v("成为调用 ToObject(**this)**的结果.")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("class")]),t._v("成为"),s("em",[t._v("O")]),t._v("的内部属性[[Class]]的值.")]),t._v(" "),s("li",[t._v("返回三个字符串**"),s("code",[t._v('"[object "，')]),t._v("** "),s("em",[t._v("class")]),t._v("， 以及 "),s("strong",[s("code",[t._v('"]"')])]),t._v(" "),s("code",[t._v("连接后的新字符串")]),t._v(" ``.")])])]),t._v(" "),s("p",[t._v('可以看出，比 ES3 多了 1，2，3 步. 第 1，2 步属于新规则，比较特殊，因为" '),s("code",[t._v('Undefined"')]),t._v(' 和" '),s("code",[t._v('Null"')]),t._v(" 并不属于[[class]]属性的值，需要注意的是，这里和严格模式无关(大部分函数在严格模式下，this 的值才会保持 undefined 或 null，非严格模式下会自动成为全局对象). 第 3 步并不算是新规则，因为在 ES3 的引擎中，也都会在这一步将三种原始值类型转换成对应的包装对象，只是规范中没写出来. ES5 中，[[Class]]属性的解释更加详细:")]),t._v(" "),s("blockquote",[s("p",[t._v('所有内置对象的[[Class]]属性的值是由本规范定义的. 所有宿主对象的[[Class]]属性的值可以是除了"Arguments"， "Array"， "Boolean"， "Date"， "Error"， "Function"， "JSON"， "Math"， "Number"， "Object"， "RegExp"， "String"之外的的任何字符串.[[Class]]内部属性是引擎内部用来判断一个对象属于哪种类型的值的. 需要注意的是，除了通过**'),s("code",[t._v("Object.prototype.toString")]),t._v("**方法之外，本规范没有提供任何其他方式来让程序访问该属性的值(查看 15.2.4.2).")])]),t._v(" "),s("p",[t._v('和 ES3 对比一下，第一个差别就是[[class]]内部属性的值多了两种，成了 12 种，一种是 arguments 对象的[[class]]成了"Arguments"，而不是以前的"Object"，还有就是多个了全局对象 JSON，它的[[class]]值为"JSON". 第二个差别就是，宿主对象的[[class]]内部属性的值，不能和这 12 种值冲突，不过在支持 ES3 的浏览器中，貌似也没有发现哪些宿主对象故意使用那 10 个值.')]),t._v(" "),s("h3",{attrs:{id:"ecmascript-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-6"}},[t._v("#")]),t._v(" ECMAScript 6")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://people.mozilla.org/~jorendorff/es6-draft.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES6"),s("OutboundLink")],1),t._v("目前还只是工作草案，但能够肯定的是，"),s("strong",[t._v("[[class]]内部属性没有了")]),t._v("，取而代之的是另外一个内部属性[[NativeBrand]].[[NativeBrand]]属性是这么定义的:")]),t._v(" "),s("blockquote",[s("table",[s("thead",[s("tr",[s("th",[t._v("内部属性")]),t._v(" "),s("th",[t._v("属性值")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("[[NativeBrand]]")]),t._v(" "),s("td",[t._v("枚举 NativeBrand 的一个成员.")]),t._v(" "),s("td",[t._v("该属性的值对应一个标志值(tag value), 可以用来区分原生对象的类型.")])])])])]),t._v(" "),s("p",[t._v("[[NativeBrand]]属性的解释:")]),t._v(" "),s("blockquote",[s("p",[t._v("[[NativeBrand]]内部属性用来识别某个原生对象是否为符合本规范的某一种特定类型的对象.[[NativeBrand]]内部属性的值为下面这些枚举类型的值中的一个: NativeFunction， NativeArray， StringWrapper， BooleanWrapper， NumberWrapper， NativeMath， NativeDate， NativeRegExp， NativeError， NativeJSON， NativeArguments， NativePrivateName.[[NativeBrand]]内部属性仅用来区分区分特定类型的 ECMAScript 原生对象. 只有在表 10 中明确指出的对象类型才有[[NativeBrand]]内部属性.")]),t._v(" "),s("p",[t._v("表 10 — [[NativeBrand]]内部属性的值")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性值")]),t._v(" "),s("th",[t._v("对应类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("NativeFunction")]),t._v(" "),s("td",[t._v("Function objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativeArray")]),t._v(" "),s("td",[t._v("Array objects")])]),t._v(" "),s("tr",[s("td",[t._v("StringWrapper")]),t._v(" "),s("td",[t._v("String objects")])]),t._v(" "),s("tr",[s("td",[t._v("BooleanWrapper")]),t._v(" "),s("td",[t._v("Boolean objects")])]),t._v(" "),s("tr",[s("td",[t._v("NumberWrapper")]),t._v(" "),s("td",[t._v("Number objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativeMath")]),t._v(" "),s("td",[t._v("The Math object")])]),t._v(" "),s("tr",[s("td",[t._v("NativeDate")]),t._v(" "),s("td",[t._v("Date objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativeRegExp")]),t._v(" "),s("td",[t._v("RegExp objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativeError")]),t._v(" "),s("td",[t._v("Error objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativeJSON")]),t._v(" "),s("td",[t._v("The JSON object")])]),t._v(" "),s("tr",[s("td",[t._v("NativeArguments")]),t._v(" "),s("td",[t._v("Arguments objects")])]),t._v(" "),s("tr",[s("td",[t._v("NativePrivateName")]),t._v(" "),s("td",[t._v("Private Name objects")])])])])]),t._v(" "),s("p",[t._v("可见，和[[class]]不同的是，并不是每个对象都拥有[[NativeBrand]]. 同时，Object.prototype.toString 方法的规范也改成了下面这样:")]),t._v(" "),s("blockquote",[s("h5",{attrs:{id:"_15-2-4-2-object-prototype-tostring-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-4-2-object-prototype-tostring-2"}},[t._v("#")]),t._v(" 15.2.4.2 Object.prototype.toString ( )")]),t._v(" "),s("p",[t._v("在**"),s("code",[t._v("toString")]),t._v("**方法被调用时，会执行下面的操作步骤:")]),t._v(" "),s("ol",[s("li",[t._v("如果"),s("strong",[t._v("this")]),t._v("的值为"),s("strong",[t._v("undefined")]),t._v("，则返回 "),s("code",[t._v('"[object Undefined]"')]),t._v(" .")]),t._v(" "),s("li",[s("code"),t._v(" 如果"),s("strong",[t._v("this")]),t._v("的值为"),s("strong",[t._v("null")]),t._v("，则返回 "),s("code",[t._v('"[object Null]"')]),t._v(" .")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("O")]),t._v("成为调用 ToObject(**this)**的结果.")]),t._v(" "),s("li",[t._v("如果"),s("em",[t._v("O")]),t._v("有[[NativeBrand]]内部属性，让"),s("em",[t._v("tag")]),t._v("成为表 29 中对应的值.")]),t._v(" "),s("li",[t._v("否则")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("hasTag")]),t._v("成为调用"),s("em",[t._v("O")]),t._v("的[[HasProperty]]内部方法后的结果，参数为@@toStringTag.")]),t._v(" "),s("li",[t._v("如果"),s("em",[t._v("hasTag")]),t._v("为"),s("strong",[t._v("false")]),t._v("，则让"),s("em",[t._v("tag")]),t._v("为 "),s("code",[t._v('"Object"')]),t._v(" .")]),t._v(" "),s("li",[t._v("否则，")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("tag")]),t._v("成为调用"),s("em",[t._v("O")]),t._v("的[[Get]]内部方法后的结果，参数为@@toStringTag.")]),t._v(" "),s("li",[t._v("如果"),s("em",[t._v("tag")]),t._v("是一个 abrupt completion，则让"),s("em",[t._v("tag")]),t._v("成为 NormalCompletion( "),s("code",[t._v('"???"')]),t._v(" ).")]),t._v(" "),s("li",[t._v("让"),s("em",[t._v("tag")]),t._v("成为"),s("em",[t._v("tag")]),t._v(".[[value]].")]),t._v(" "),s("li",[t._v("如果 Type("),s("em",[t._v("tag")]),t._v(")不是字符串，则让"),s("em",[t._v("tag 成为")]),t._v(" "),s("code",[t._v('"???"')]),t._v(" .")]),t._v(" "),s("li",[t._v("如果"),s("em",[t._v("tag")]),t._v("的值为 "),s("code",[t._v('"Arguments"')]),t._v(" ， "),s("code",[t._v('"Array"')]),t._v(" ， "),s("code",[t._v('"Boolean"')]),t._v(" ， "),s("code",[t._v('"Date"')]),t._v(" ， "),s("code",[t._v('"Error"')]),t._v(" ， "),s("code",[t._v('"Function"')]),t._v(" ， "),s("code",[t._v('"JSON"')]),t._v(" ， "),s("code",[t._v('"Math"')]),t._v(" ， "),s("code",[t._v('"Number"')]),t._v(" ， "),s("code",[t._v('"Object"')]),t._v(" ， "),s("code",[t._v('"RegExp"')]),t._v(" ， "),s("code",[t._v('或者"String"中的任一个，则让')]),t._v(" "),s("em",[t._v("tag")]),t._v("成为字符串 "),s("code",[t._v('"~"和')]),t._v(" "),s("em",[t._v("tag")]),t._v("当前的值连接后的结果.")]),t._v(" "),s("li",[t._v('返回三个字符串"[object "， tag， and "]" '),s("code",[t._v("连接后的新字符串")]),t._v(" ``.")])]),t._v(" "),s("p",[t._v("表 29 — [[NativeBrand]] 标志值")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("[[NativeBrand]]值")]),t._v(" "),s("th",[t._v("标志值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("NativeFunction")]),t._v(" "),s("td",[s("code",[t._v('"Function"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeArray")]),t._v(" "),s("td",[s("code",[t._v('"Array"')])])]),t._v(" "),s("tr",[s("td",[t._v("StringWrapper")]),t._v(" "),s("td",[s("code",[t._v('"String"')])])]),t._v(" "),s("tr",[s("td",[t._v("BooleanWrapper")]),t._v(" "),s("td",[s("code",[t._v('"Boolean"')])])]),t._v(" "),s("tr",[s("td",[t._v("NumberWrapper")]),t._v(" "),s("td",[s("code",[t._v('"Number"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeMath")]),t._v(" "),s("td",[s("code",[t._v('"Math"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeDate")]),t._v(" "),s("td",[s("code",[t._v('"Date"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeRegExp")]),t._v(" "),s("td",[s("code",[t._v('"RegExp"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeError")]),t._v(" "),s("td",[s("code",[t._v('"Error"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeJSON")]),t._v(" "),s("td",[s("code",[t._v('"JSON"')])])]),t._v(" "),s("tr",[s("td",[t._v("NativeArguments")]),t._v(" "),s("td",[s("code",[t._v('"Arguments"')])])])])])]),t._v(" "),s("p",[t._v("可以看到，在规范上有了很大的变化，不过对于普通用户来说，貌似感觉不到.")]),t._v(" "),s("p",[t._v("也许你发现了，ES6 里的新类型 Map，Set 等，都没有在表 29 中. 它们在执行 toString 方法的时候返回的是什么?")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('console.log(Object.prototype.toString.call(Map()))   //"[object Map]"\n\nconsole.log(Object.prototype.toString.call(Set()))   //"[object Set]"\n')])])]),s("p",[t._v('其中的字符串"Map"是怎么来的呢:')]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("15.14.5.13")]),t._v(" Map.prototype.@@toStringTag")]),t._v(" "),s("p",[t._v('@@toStringTag 属性的初始值为字符串**"Map"**.')])]),t._v(" "),s("p",[t._v("由于 ES6 的规范还在制定中，各种相关规定都有可能改变，所以如果想了解更多细节. 看看下面这两个链接，现在只需要知道的是:[[class]]没了，使用了更复杂的机制.")]),t._v(" "),s("p",[t._v("http://stackoverflow.com/questions/13151643/access-nativebrand-class-in-es6-ecmascript-6")]),t._v(" "),s("p",[t._v("https://mail.mozilla.org/pipermail/es-discuss/2012-June/023676.html")])])}),[],!1,null,null,null);s.default=e.exports}}]);