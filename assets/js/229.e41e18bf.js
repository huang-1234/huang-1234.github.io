(window.webpackJsonp=window.webpackJsonp||[]).push([[229],{663:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"link标签的rel属性进行性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#link标签的rel属性进行性能优化"}},[t._v("#")]),t._v(" link标签的rel属性进行性能优化")]),t._v(" "),a("p",[t._v("有很多种方式可以提高web性能，其中的一中方法是预加载你后面会用到的内容，预取一个css文件，预渲染一个页面，提前解析一个域名，实际需要时，您无需等待！听起来是不是很牛逼。")]),t._v(" "),a("p",[t._v("更牛逼的是，浏览器内置很多简单方法来完成所有这些操作，有五个"),a("link",{attrs:{rel:""}}),t._v("属性，它们让浏览器预加载一些内容：")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/style.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/style.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preconnect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prerender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com/about.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("下面来说明它们各自的作用以及何时使用它们。")]),t._v(" "),a("ul",[a("li",[t._v("preload (紧急下载内容)")]),t._v(" "),a("li",[t._v("prefetch (使用低优先级策略下载内容)")]),t._v(" "),a("li",[t._v("preconnect (连接到服务器)")]),t._v(" "),a("li",[t._v("dns-prefetch (解析域名)")]),t._v(" "),a("li",[t._v("prerender (在后台渲染页面)")])]),t._v(" "),a("h3",{attrs:{id:"preload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preload"}},[t._v("#")]),t._v(" preload")]),t._v(" "),a("p",[a("code",[t._v('<link rel="preload">')]),t._v("高速浏览器尽快下载缓存资源 (比如 script 或则 stylesheet 文件)。当页面加载完成你立即需要某个资源并且想要加速获取时相当有用。")]),t._v(" "),a("p",[t._v("浏览器除了下载资源啥也不会干，脚本不会执行，样式也不会应用仅仅是cache，所以当需要的时候会立即可用。")]),t._v(" "),a("p",[a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/style.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[a("code",[t._v("href")]),t._v("指向想要下载的资源，"),a("code",[t._v("as")]),t._v(" 可以是你在浏览器中用的所有资源类型。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("style")]),t._v(" 表示css样式表,")]),t._v(" "),a("li",[a("code",[t._v("script")]),t._v("表示脚本,")]),t._v(" "),a("li",[a("code",[t._v("font")]),t._v("表示字体,")]),t._v(" "),a("li",[a("code",[t._v("fetch")]),t._v(" 表示使用"),a("code",[t._v("fetch()")]),t._v(" 或 "),a("code",[t._v("XMLHttpRequest")]),t._v("下载的资源,")]),t._v(" "),a("li",[t._v("其他值参考完整列表")])]),t._v(" "),a("p",[t._v("指定as属性非常重要，它可以帮助浏览器正确设置下载优先级进行下载。")]),t._v(" "),a("p",[a("strong",[t._v("什么时候用")])]),t._v(" "),a("p",[a("strong",[t._v("当你立即需要一个资源的时候。")]),a("code",[t._v('<link rel="preload">')]),t._v("当页面加载完成后立即需要一个资源并且想尽快加载时，这个会很有用, 例如：")]),t._v(" "),a("p",[t._v("你自定义一个字体，在一个外部的css 文件@font-face 使用这些字体。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- index.html --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("index.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("/* index.css */\n@font-face {\n    src: url('comic-sans.woff2') format('woff2');\n}\n")])])]),a("p",[t._v("默认情况当"),a("code",[t._v("index.css")]),t._v("下载完成应用的时候 comic-sans.woff2 开始下载. 使用"),a("code",[t._v('<link rel="preload">')]),t._v("不用等很久可以立即下载字体。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("comic-sans.woff2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("按照css是否关键的原则分割样式文件，你可以把css分支为两部分，关键部分，非关键部分。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Inlined critical styles */")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Custom JS that starts downloading non-critical styles */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadCSS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/non-critical.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("用这种方法，非关键的样式仅仅当javascript执行后才开始下载，可能在首次渲染后延时几秒。使用 "),a("link",{attrs:{rel:"preload"}}),t._v(" 让浏览器立即下载， 代替等待JS执行万进行下载。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Inlined critical styles */")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/app/non-critical.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Custom JS that starts downloading non-critical styles */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadCSS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/non-critical.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("不要过度使用")]),t._v(" 预加载所有的资源并不会加速网站，相反会阻止浏览器更智能的下载计划。")]),t._v(" "),a("p",[t._v("与**"),a("code",[t._v("prefetch")]),t._v("区分** 如果你不是页面加载后马上需要的资源不要使用"),a("link",{attrs:{rel:"preload"}}),t._v("，如果你仅仅是稍后需要，例如下一页用，使用"),a("link",{attrs:{rel:"prefetch"}}),t._v("代替。")]),t._v(" "),a("p",[a("strong",[t._v("更多")])]),t._v(" "),a("p",[a("strong",[t._v("强制性")]),t._v(" 不像其他link rel其他预加载相关的属性，对浏览器来说这个属性是强制性的，浏览器必须下载该属性标记的资源，这个属性的其他值，浏览器自行决定执行是否跳过下载对应的资源操作例如：网络不好的情况下 等等。")]),t._v(" "),a("p",[a("strong",[t._v("优先级")]),t._v(" 不同的资源浏览器分配不同的优先级，允许优先下载最重要的资源，使用 "),a("link",{attrs:{rel:"preload"}}),t._v(" 的资源，浏览器根据 as 属性来确定优先级。")]),t._v(" "),a("h3",{attrs:{id:"prefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prefetch"}},[t._v("#")]),t._v(" prefetch")]),t._v(" "),a("link",{attrs:{rel:"prefetch"}}),t._v(" 告诉浏览器在后台下载并且缓存资源，该下载的优先级较低，不会干扰更重要的资源下载。当您知道在下一个页面上需要该资源并且希望提前对其进行缓存时，这就很有用了。\n"),a("p",[t._v("资源下载完成后，浏览器不会执行任何操作。没有执行脚本，没有应用css。仅仅只是缓存，所以当有需求时它可以立即生效。")]),t._v(" "),a("p",[a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/style.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("href 指向需要预加载的资源。")]),t._v(" "),a("ul",[a("li",[t._v("style 表示css样式表,")]),t._v(" "),a("li",[t._v("script表示脚本,")]),t._v(" "),a("li",[t._v("font表示字体,")]),t._v(" "),a("li",[t._v("fetch 表示使用fetch() 或 XMLHttpRequest下载的资源,")]),t._v(" "),a("li",[t._v("其他值参考完整列表")])]),t._v(" "),a("p",[t._v("指定as属性非常重要，它可以帮助浏览器正确设置下载优先级进行下载。")]),t._v(" "),a("p",[a("strong",[t._v("什么时候使用")])]),t._v(" "),a("p",[a("strong",[t._v("加载其他页面需要的资源。")]),t._v('<link rel =“"prefetch">预加载其他页面上需要资源可以加快相应页面的渲染速度。例如：')]),t._v(" "),a("ul",[a("li",[t._v("你有一个电商网站 40%的用户从首页跳转到产品商品页面使用 "),a("code",[t._v('<link rel="prefetch">')]),t._v(" 下载css文件、js文件供产品页面使用")]),t._v(" "),a("li",[t._v("一个单页webapp,不同的页面分割了不同的bundle, 当访问一些页面的时候，确定一下该页面还能跳转到哪些路由，然后 使用 "),a("code",[t._v('<link rel="prefetch">')]),t._v("预加载相应的资源")])]),t._v(" "),a("p",[a("strong",[t._v("尽可能多的使用prefetch是安全的")]),t._v("。浏览器通常以最低的优先级安排prefetch，因此不会干扰其他资源，也就是说尽可能多的使用prefetch是安全的，\n请记住这仍然会使用用户的数据--而且有可能会让他们花更多的钱!")]),t._v(" "),a("p",[a("strong",[t._v("不要用于立即需要使用资源")]),t._v("。当你立即需要使用某些资源时，不要使用"),a("code",[t._v('<link rel="prefetch">')]),t._v("使用"),a("code",[t._v('<link rel="preload">')]),t._v("来代替.")]),t._v(" "),a("h4",{attrs:{id:"更多"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多"}},[t._v("#")]),t._v(" 更多")]),t._v(" "),a("p",[t._v("非强制性，浏览器可以不用执行"),a("code",[t._v('<link rel="prefetch">')]),t._v("指令。可以自行决定是否需要下载资源，例如：网速慢的时候，可能不会下载资源。")]),t._v(" "),a("p",[a("strong",[t._v("优先级")]),t._v(" 在chrome中， "),a("link",{attrs:{rel:"prefetch"}}),t._v(" 通常使用最低优先级下载资源\n，也就是说所有的资源下载完成后才会把prefetch的资源加到下载计划中。")]),t._v(" "),a("h3",{attrs:{id:"preconnect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preconnect"}},[t._v("#")]),t._v(" preconnect")]),t._v(" "),a("p",[a("code",[t._v('<link rel="preconnect">')]),t._v("提前让浏览器执行连接到指定的domain，这对你知道马上要从改domain下载资源，但是不知道下载啥东西很有用，可以加快在初次连接的速度。")]),t._v(" "),a("p",[t._v("浏览器从一个新的第三方域名获取东西时，必须建立一个连接。（第三方的域名是不同与你当前webapp的域名）可能是一个站点使用Google Fonts 获取字体，从CND加载React或者从Api 服务器请求JSON数据。")]),t._v(" "),a("p",[t._v("建立一个新连接同学需要花费数百毫秒。每个域名需要进行一次，仍然是需要花时间，你可以提前建立链接来节省时间，使得从该domain下载资源更快。")]),t._v(" "),a("p",[a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preconnect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://api.my-app.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[a("code",[t._v("href")]),t._v(" 指向你要解析的域名. 带不带scheme都行("),a("code",[t._v("https://domain.com")]),t._v(") 或者 ("),a("code",[t._v("//domain.com")]),t._v(")都一样")]),t._v(" "),a("p",[a("strong",[t._v("什么时候使用")])]),t._v(" "),a("p",[t._v("**用于你马上需要使用的domain。**当你从第三方域名引入css、脚本、图片市你却不知道确切的资源时"),a("code",[t._v('<link rel="preconnect" />')]),t._v("会很有用，例如：")]),t._v(" "),a("ul",[a("li",[t._v("你的app在 "),a("code",[t._v("my-app.com")]),t._v("上, 并且发了请求到 "),a("code",[t._v("api.my-app.com")]),t._v(". 通过JS动态的发送请求所以你不知道哪些请求会到这个域名。\n使用 "),a("code",[t._v('<link rel="preconnect">')]),t._v(" t提前连接到"),a("code",[t._v("api.my-app.com")]),t._v(" 使得首次请求数据更快。")]),t._v(" "),a("li",[t._v("你的app在 "),a("code",[t._v("my-app.com")]),t._v("上, 并且用到了 Google Fonts. Google Fonts 通过两个阶段加载字体: 首先, 从"),a("code",[t._v("fonts.googleapis.com")]),t._v("下载css文件; 然后, 通过CSS文件，从 "),a("code",[t._v("fonts.gstatic.com")]),t._v("下载字体.\n你不知道哪个字体来自 "),a("code",[t._v("fonts.gstatic.com")]),t._v("直到你从 "),a("code",[t._v("fonts.googleapis.com")]),t._v("下载完CSS后你才知道. 使用 "),a("code",[t._v('<link rel="preconnect">')]),t._v(" 提前建立链接")])]),t._v(" "),a("p",[a("strong",[t._v("用来稍微加速第三方脚本或者样式.")]),t._v(" 如果你在页面中包含第三方的资源，并且你需要很快加载它, 把域名添加到 "),a("code",[t._v('<link rel="preconnect" />')]),t._v(" 中. 它能让浏览器尽早的启动连接到该域名.")]),t._v(" "),a("p",[a("strong",[t._v("不要过度使用.")]),t._v(" 对客户端和服务端来说 发起并保持连接打开非常昂贵. 使用这个标签最多 4-6 个域名.")]),t._v(" "),a("h4",{attrs:{id:"更多-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多-2"}},[t._v("#")]),t._v(" 更多")]),t._v(" "),a("p",[a("strong",[t._v("非强制.")]),t._v(" 浏览器不是必须遵守 "),a("code",[t._v('<link rel="preconnect">')]),t._v(" 指令. 也就是说他可以自行决定是否启动一个连接. 例如： 如果已经有很多连接建立了，或者其他情况可能就不会建立连接.")]),t._v(" "),a("p",[a("strong",[t._v("连接过程包括什么.")]),t._v(" 为了连接到各个网站浏览器必须执行如下步骤:")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("DNS 解析.")]),t._v(" 找到指定域名([http://google.com])的服务器的 IP 地址 ("),a("code",[t._v("216.58.215.78")]),t._v(")")]),t._v(" "),a("li",[a("em",[t._v("TCP 握手.")]),t._v(" 执行一次往返 (消息经过 客户端 → 服务器 → 客户端) 来初始化一个 TCP 连接到服务器")]),t._v(" "),a("li",[a("em",[t._v("TLS 握手 (只针对 HTTPS 网站).")]),t._v(" 执行两个往返 (消息经过 客服端 → 服务器 → 客服端 → 服务器 → 客服端) 来初始化安全的 TLS 会话")])]),t._v(" "),a("p",[t._v("备注: HTTP/3 将会改变因为他将 [提高并且加速连接机制]仍然遥遥无期.")]),t._v(" "),a("h3",{attrs:{id:"dns-prefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns-prefetch"}},[t._v("#")]),t._v(" dns-prefetch")]),t._v(" "),a("p",[a("code",[t._v('<link rel="dns-prefetch">')]),t._v("让浏览器提前执行DNS解析，当你知道你马上要连接一个域名，并且想加速首次连接时很有用。")]),t._v(" "),a("p",[t._v("DNS连接第三方域名的时候开始进行域名解析，可能在你加载gogole字体、从CDN加载React的时候，或者从服务器请求JSON API 相应的时候。")]),t._v(" "),a("p",[t._v("对一个新域名来说，解析通常需要花费20-120毫秒，仅仅对第一次从domain下载资源的时候起作用，但是它仍然很重要。如果你提前解析域名，你可能会节省第一次加载资源的时间。")]),t._v(" "),a("p",[a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://api.my-app.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("href 指向你要解析的域名，有没有(https)协议都行。")]),t._v(" "),a("p",[a("strong",[t._v("什么时候使用")])]),t._v(" "),a("p",[a("strong",[t._v("在你马上要使用域名的时候使用。")]),a("code",[t._v('<link rel="dns-prefetch" />')]),t._v("will 当你需要一些资源在第三方域名上，但是事先不知道什么资源时很有用。例如：")]),t._v(" "),a("ul",[a("li",[t._v("你的网站放在 "),a("code",[t._v("my-app.com")]),t._v("上， 发起来ajax请求到 "),a("code",[t._v("api.my-app.com")]),t._v(". 由于你使用JS发起的请求，浏览器不知道你请求到了该域名。\n使用 "),a("code",[t._v('<link rel="dns-prefetch">')]),t._v(" 来解析 "),a("code",[t._v("api.my-app.com")]),t._v(" 来加速首次请求")]),t._v(" "),a("li",[t._v("你的app放在 "),a("code",[t._v("my-app.com")]),t._v(", 使用 Google Fonts. Google Fonts 加载分两个阶段： 首先从 "),a("code",[t._v("fonts.googleapis.com")]),t._v("加载CSS文件 然后, CSS文件从 "),a("code",[t._v("fonts.gstatic.com")]),t._v("加载相应的字体文件.\n浏览器不知道你会从 "),a("code",[t._v("fonts.gstatic.com")]),t._v("加载字体, 所以使用 "),a("code",[t._v('<link rel="dns-prefetch">')]),t._v(" 来提前解析域名")])]),t._v(" "),a("p",[a("strong",[t._v("用来直接加速第三方脚本和样式.")]),t._v(" 假如你在页面中有一个第三方的资源，你确实需要更快速的加载他，添加该域名到"),a("code",[t._v('<link rel="dns-prefetch" />')]),t._v("上 . 他会指示浏览器把按照计划解析DNS域名。")]),t._v(" "),a("p",[a("strong",[t._v("更多")])]),t._v(" "),a("p",[a("strong",[t._v("非强制.")]),t._v(" 浏览器不必遵守 "),a("code",[t._v('<link rel="dns-prefetch">')]),t._v(" 指令. 意味着浏览器自行决定是否进行DNS解析 – 例如： 已经有很多域名的情况下或者其他情况浏览器可能就不会解析.")]),t._v(" "),a("p",[a("strong",[t._v("DNS是啥.")]),t._v(" 每个服务在互联网上有一个唯一的IP地址类似："),a("code",[t._v("216.58.215.78")]),t._v(". 当你访问一个网站的时候你可以使用域名而不必输入IP地址(比如 "),a("code",[t._v("google.com")]),t._v("). 因为DNS (Domain Name System)\n服务器提供了域名 (google.com) 和IP(216.58.215.78)的映射服务 .")]),t._v(" "),a("p",[t._v("要解析域名，浏览器必须先查找DNS服务器. 当连接一个第三方面域名的时候大概需要 20-120 ms .")]),t._v(" "),a("p",[a("strong",[t._v("DNS 被缓存但是并不可靠.")]),t._v(" 一些操作系统和浏览器会对DNS请求进行缓存. 如果你需要再次获取第三方域名的时候能节省时间，但是并不可靠 . Linux 系统通常 [不会缓存DNS].\nChrome 有 DNS 缓存, 但是 [有效期仅仅几分钟]. Windows 缓存 DNS 响应 [5天]")]),t._v(" "),a("h3",{attrs:{id:"prerender"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerender"}},[t._v("#")]),t._v(" prerender")]),t._v(" "),a("p",[a("code",[t._v('<link rel="prerender">')]),t._v(" 可以让浏览器在不可见的tab加价URL并进行渲染. 当点击一个URL链接时，页面需要立即被渲染. 当你确定用户访问的下个页面时，并且尽快渲染时会很有用.")]),t._v(" "),a("p",[t._v("尽管很有用, "),a("code",[t._v('<link rel="prerender">')]),t._v(" 主流浏览器支持的并不好. 查看 [更多详情]")]),t._v(" "),a("p",[a("strong",[t._v("语法")])]),t._v(" "),a("p",[a("code",[t._v("href")]),t._v(" 指向你希望在后台渲染的页面.")]),t._v(" "),a("h4",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("使用:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('<link rel="preload">')]),t._v(" – 当你接下来需要使用的资源时")]),t._v(" "),a("li",[a("code",[t._v('<link rel="prefetch">')]),t._v(" – 当你在下个页面需要的资源时")]),t._v(" "),a("li",[a("code",[t._v('<link rel="preconnect">')]),t._v(" – 当你知道你需要一个资源但是不知道具体的URL时")]),t._v(" "),a("li",[a("code",[t._v('<link rel="dns-prefetch">')]),t._v(" – 当你知道你需要一个资源但是不知道具体的URL时")]),t._v(" "),a("li",[a("code",[t._v('<link rel="prerender">')]),t._v(" – 当你确定用户要跳转的指定页面并且想加速")])]),t._v(" "),a("p",[t._v("了解更多:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf",target:"_blank",rel:"noopener noreferrer"}},[t._v("Preload, prefetch and priorities in Chrome"),a("OutboundLink")],1),t._v(": Addy Osmani’s deep-dive into how Chrome handles preloading and how it affects performance")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//css-tricks.com/prefetching-preloading-prebrowsing/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prefetching, preloading, prebrowsing"),a("OutboundLink")],1),t._v(": Robin Rendle’s overview of all preload-related tags on CSS-Tricks")])])])}),[],!1,null,null,null);a.default=e.exports}}]);