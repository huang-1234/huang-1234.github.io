(window.webpackJsonp=window.webpackJsonp||[]).push([[561],{992:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"learn-webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#learn-webpack"}},[s._v("#")]),s._v(" learn webpack")]),s._v(" "),t("h2",{attrs:{id:"_2-认识webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-认识webpack"}},[s._v("#")]),s._v(" 2.认识webpack")]),s._v(" "),t("blockquote",[t("p",[s._v("webpack的安装\nwebpack的起步\nwebpack的配置\nloader的使用\nwebpack中配置Vue\nplugin的使用\n搭建本地服务器")])]),s._v(" "),t("h2",{attrs:{id:"_3-什么是webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-什么是webpack"}},[s._v("#")]),s._v(" 3. 什么是webpack？")]),s._v(" "),t("p",[s._v("这个webpack还真不是一两句话可以说清楚的。\n我们先看看官方的解释：\nAt its core, webpack is a static module bundler for modern JavaScript applications.\n从本质上来讲，webpack是一个现代的JavaScript应用的静态模块打包工具。\n但是它是什么呢？用概念解释概念，还是不清晰。\n我们从两个点来解释上面这句话：模块 和 打包")]),s._v(" "),t("h2",{attrs:{id:"_4-前端模块化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-前端模块化"}},[s._v("#")]),s._v(" 4. 前端模块化")]),s._v(" "),t("blockquote",[t("p",[s._v("前端模块化：")])]),s._v(" "),t("p",[s._v("在前面学习中，我已经用了大量的篇幅解释了为什么前端需要模块化。\n而且我也提到了目前使用前端模块化的一些方案：AMD、CMD、CommonJS、ES6。")]),s._v(" "),t("p",[s._v("在ES6之前，我们要想进行模块化开发，就必须借助于其他的工具，让我们可以进行模块化开发。\n并且在通过模块化开发完成了项目后，还需要处理模块间的各种依赖，并且将其进行整合打包。\n而webpack其中一个核心就是让我们可能进行模块化开发，并且会帮助我们处理模块间的依赖关系。\n而且不仅仅是JavaScript文件，我们的CSS、图片、json文件等等在webpack中都可以被当做模块来使用（在后续我们会看到）。\n这就是webpack中模块化的概念。")]),s._v(" "),t("blockquote",[t("p",[s._v("打包如何理解呢？")])]),s._v(" "),t("p",[s._v("理解了webpack可以帮助我们进行模块化，并且处理模块间的各种复杂关系后，打包的概念就非常好理解了。就是将webpack中的各种资源模块进行打包合并成一个或多个包(Bundle)。\n并且在打包的过程中，还可以对资源进行处理，比如压缩图片，将scss转成css，将ES6语法转成ES5语法，将TypeScript转成JavaScript等等操作。\n但是打包的操作似乎grunt和gulp也可以帮助我们完成，它们有什么不同呢？")]),s._v(" "),t("h2",{attrs:{id:"_5-和gruntandgulp的对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-和gruntandgulp的对比"}},[s._v("#")]),s._v(" 5.和gruntANDgulp的对比")]),s._v(" "),t("p",[s._v("gruntANDgulp的核心是Task\n我们可以配置一系列的task，并且定义task要处理的事务（例如ES6、ts转化，图片压缩，scss转成css）\n之后让gruntANDgulp来依次执行这些task，而且让整个流程自动化。")]),s._v(" "),t("p",[s._v("所以gruntANDgulp也被称为前端自动化任务管理工具。")]),s._v(" "),t("p",[s._v("我们来看一个gulp的task")]),s._v(" "),t("p",[s._v("下面的task就是将src下面的所有js文件转成ES5的语法。\n并且最终输出到dist文件夹中。")]),s._v(" "),t("p",[s._v("什么时候用gruntANDgulp呢？\n如果你的工程模块依赖非常简单，甚至是没有用到模块化的概念。\n只需要进行简单的合并、压缩，就使用gruntANDgulp即可。")]),s._v(" "),t("p",[s._v("但是如果整个项目使用了模块化管理，而且相互依赖非常强，我们就可以使用更加强大的webpack了。\n所以，gruntANDgulp和webpack有什么不同呢？\ngruntANDgulp更加强调的是前端流程的自动化，模块化不是它的核心。\nwebpack更加强调模块化开发管理，而文件压缩合并、预处理等功能，是他附带的功能。")]),s._v(" "),t("h2",{attrs:{id:"_6-webpack安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-webpack安装"}},[s._v("#")]),s._v(" 6. webpack安装")]),s._v(" "),t("p",[s._v("安装webpack首先需要安装Node.js，Node.js自带了软件包管理工具npm\n查看自己的node版本：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])])]),t("p",[s._v("全局安装webpack(这里我先指定版本号3.6.0，因为vue cli2依赖该版本)")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install webpack@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n")])])]),t("p",[s._v("局部安装webpack（后续才需要）\n--save-dev`是开发时依赖，项目打包后不需要继续使用的。")]),s._v(" "),t("p",[s._v("为什么全局安装后，还需要局部安装呢？\n在终端直接执行webpack命令，使用的全局安装的webpack\n当在package.json中定义了scripts时，其中包含了webpack命令，那么使用的是局部webpack")]),s._v(" "),t("h2",{attrs:{id:"_7-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-准备工作"}},[s._v("#")]),s._v(" 7. 准备工作")]),s._v(" "),t("p",[s._v("我们创建如下文件和文件夹：\n文件和文件夹解析：\ndist文件夹：用于存放之后打包的文件\nsrc文件夹：用于存放我们写的源文件\nmain.js：项目的入口文件。具体内容查看下面详情。\nmathUtils.js：定义了一些数学工具函数，可以在其他地方引用，并且使用。具体内容查看下面的详情。\nindex.html：浏览器打开展示的首页html\npackage.json：通过npm init生成的，npm包管理的文件（暂时没有用上，后面才会用上）\nmathUtils.js文件中的代码：\nmain.js文件中的代码：")]),s._v(" "),t("h2",{attrs:{id:"_8-js文件的打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-js文件的打包"}},[s._v("#")]),s._v(" 8.js文件的打包")]),s._v(" "),t("p",[s._v("现在的js文件中使用了模块化的方式进行开发，他们可以直接使用吗？不可以。\n因为如果直接在index.html引入这两个js文件，浏览器并不识别其中的模块化代码。\n另外，在真实项目中当有许多这样的js文件时，我们一个个引用非常麻烦，并且后期非常不方便对它们进行管理。\n我们应该怎么做呢？使用webpack工具，对多个js文件进行打包。\n我们知道，webpack就是一个模块化的打包工具，所以它支持我们代码中写模块化，可以对模块化的代码进行处理。（如何处理的，待会儿在原理中，我会讲解）\n另外，如果在处理完所有模块之间的关系后，将多个js打包到一个js文件中，引入时就变得非常方便了。\nOK，如何打包呢？使用webpack的指令即可")]),s._v(" "),t("p",[s._v("打包后会在dist文件下，生成一个bundle.js文件\n文件内容有些复杂，这里暂时先不看，后续再进行分析。\nbundle.js文件，是webpack处理了项目直接文件依赖后生成的一个js文件，我们只需要将这个js文件在index.html中引入即可")]),s._v(" "),t("h2",{attrs:{id:"_9-配置webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-配置webpack"}},[s._v("#")]),s._v(" 9. 配置webpack")]),s._v(" "),t("p",[s._v("我们考虑一下，如果每次使用webpack的命令都需要写上入口和出口作为参数，就非常麻烦，有没有一种方法可以将这两个参数写到配置中，在运行时，直接读取呢？\n当然可以，就是创建一个webpack.config.js文件")]),s._v(" "),t("h3",{attrs:{id:"_11-局部安装webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-局部安装webpack"}},[s._v("#")]),s._v(" 11. 局部安装webpack")]),s._v(" "),t("p",[s._v("目前，我们使用的webpack是全局的webpack，如果我们想使用局部来打包呢？\n因为一个项目往往依赖特定的webpack版本，全局的版本可能很这个项目的webpack版本不一致，导出打包出现问题。\n所以通常一个项目，都有自己局部的webpack。\n第一步，项目中需要安装自己局部的webpack\n这里我们让局部安装webpack3.6.0\nVue CLI3中已经升级到webpack4，但是它将配置文件隐藏了起来，所以查看起来不是很方便。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install webpack@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n")])])]),t("p",[s._v("第二步，通过node_modulesAND.binANDwebpack启动webpack打包")]),s._v(" "),t("h3",{attrs:{id:"_12-package-json中定义启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-package-json中定义启动"}},[s._v("#")]),s._v(" 12. package.json中定义启动")]),s._v(" "),t("p",[s._v("但是，每次执行都敲这么一长串有没有觉得不方便呢？\nOK，我们可以在package.json的scripts中定义自己的执行脚本。\npackage.json中的scripts的脚本在执行时，会按照一定的顺序寻找命令对应的位置。\n首先，会寻找本地的node_modulesAND.bin路径中对应的命令。\n如果没有找到，会去全局的环境变量中寻找。\n如何执行我们的build指令呢？")]),s._v(" "),t("p",[s._v("在package.json里面加上")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("p",[s._v("然后运行shell命令")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm run build\n")])])]),t("blockquote",[t("p",[s._v("为了能让webpack打包除了js以外iade文件，比如css，less，jsx，.png等资源，就需要为webpack加上相应的loader")])]),s._v(" "),t("h2",{attrs:{id:"_13-什么是loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-什么是loader"}},[s._v("#")]),s._v(" 13. 什么是loader？")]),s._v(" "),t("p",[s._v("13.1 loader是webpack中一个非常核心的概念。")]),s._v(" "),t("p",[s._v("13.2 webpack用来做什么呢？\n在我们之前的实例中，我们主要是用webpack来处理我们写的js代码，并且webpack会自动处理js之间相关的依赖。\n但是，在开发中我们不仅仅有基本的js代码处理，我们也需要加载css、图片，也包括一些高级的将ES6转成ES5代码，")]),s._v(" "),t("p",[s._v("将TypeScript转成ES5代码，将scss、less转成css，将.jsx、.vue文件转成js文件等等。对于webpack本身的能力来说，对于这些转化是不支持的。那怎么办呢？给webpack扩展对应的loader就可以啦。")]),s._v(" "),t("p",[s._v("loader使用过程：")]),s._v(" "),t("blockquote",[t("p",[s._v("步骤一：通过npm安装需要使用的loader")])]),s._v(" "),t("blockquote",[t("p",[s._v("步骤二：在webpack.config.js中的modules关键字下进行配置")])]),s._v(" "),t("p",[s._v("大部分loader我们都可以在webpack的官网中找到，并且学习对应的用法。")]),s._v(" "),t("h2",{attrs:{id:"_14-css文件处理-添加css-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-css文件处理-添加css-loader"}},[s._v("#")]),s._v(" 14. css文件处理-添加css-loader")]),s._v(" "),t("p",[s._v("项目开发过程中，我们必然需要添加很多的样式，而样式我们往往写到一个单独的文件中。\n在src目录中，创建一个css文件，其中创建一个normal.css文件。\n我们也可以重新组织文件的目录结构，将零散的js文件放在一个js文件夹中。\nnormal.css中的代码非常简单，就是将body设置为red\n但是，这个时候normal.css中的样式会生效吗？\n当然不会，因为我们压根就没有引用它。\nwebpack也不可能找到它，因为我们只有一个入口，webpack会从入口开始查找其他依赖的文件。")]),s._v(" "),t("p",[s._v("在入口文件中引用：")]),s._v(" "),t("h3",{attrs:{id:"_15-css文件处理-打包报错信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-css文件处理-打包报错信息"}},[s._v("#")]),s._v(" 15. css文件处理 – 打包报错信息")]),s._v(" "),t("p",[s._v("这个错误告诉我们：加载normal.css文件必须有对应的loader。")]),s._v(" "),t("h3",{attrs:{id:"_16-css文件处理-css-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16-css文件处理-css-loader"}},[s._v("#")]),s._v(" 16. css文件处理 – css-loader")]),s._v(" "),t("p",[s._v("在webpack的官方中，我们可以找到如下关于样式的loader使用方法：\n按照官方配置webpack.config.js文件\n注意：配置中有一个style-loader，我们并不知道它是什么，所以可以暂时不进行配置。")]),s._v(" "),t("p",[s._v("重新打包项目：\n但是，运行index.html，你会发现样式并没有生效。\n原因是css-loader只负责加载css文件，但是并不负责将css具体样式嵌入到文档中。\n这个时候，我们还需要一个style-loader帮助我们处理。")]),s._v(" "),t("h3",{attrs:{id:"_17-css文件处理-style-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-css文件处理-style-loader"}},[s._v("#")]),s._v(" 17. css文件处理 – style-loader")]),s._v(" "),t("p",[s._v("我们来安装style-loader")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：")])]),s._v(" "),t("p",[s._v("style-loader需要放在css-loader的前面。")]),s._v(" "),t("blockquote",[t("p",[s._v("疑惑：")])]),s._v(" "),t("p",[s._v("不对吧？按照我们的逻辑，在处理css文件过程中，应该是css-loader先加载css文件，再由style-loader来进行进一步的处理，为什么会将style-loader放在前面呢？\n答案：这次因为webpack在读取使用的loader的过程中，是按照从右向左的顺序读取的。\n目前，webpack.config.js的配置如下：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// css-loader只是加载css文件，style-loader才是真正的将css加入到DOM中")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"_18-less文件处理-准备工作-less-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-less文件处理-准备工作-less-loader"}},[s._v("#")]),s._v(" 18. less文件处理 – 准备工作-less-loader")]),s._v(" "),t("p",[s._v("如果我们希望在项目中使用less、scss、stylus来写样式，webpack是否可以帮助我们处理呢？\n我们这里以less为例，其他也是一样的。\n我们还是先创建一个less文件，依然放在css文件夹中")]),s._v(" "),t("blockquote",[t("p",[s._v("继续在官方中查找，我们会找到less-loader相关的使用说明\n首先，还是需要安装对应的loader\n注意：我们这里还安装了less，因为webpack会使用less对less文件进行编译")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev less"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader less\n")])])]),t("p",[s._v("其次，修改对应的配置文件\n添加一个rules选项，用于处理.less文件")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// creates style nodes from JS strings")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// translates CSS into CommonJS")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"less-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// compiles Less to CSS")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("h2",{attrs:{id:"_20-图片文件处理-资源准备阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-图片文件处理-资源准备阶段"}},[s._v("#")]),s._v(" 20. 图片文件处理,资源准备阶段")]),s._v(" "),t("p",[s._v("首先，我们在项目中加入两张图片：\n一张较小的图片test01.jpg(小于8kb)，一张较大的图片test02.jpeg(大于8kb)\n待会儿我们会针对这两张图片进行不同的处理\n我们先考虑在css样式中引用图片的情况，所以我更改了normal.css中的样式：")]),s._v(" "),t("p",[s._v("如果我们现在直接打包，会出现如下问题")]),s._v(" "),t("h3",{attrs:{id:"_21-图片文件处理-url-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_21-图片文件处理-url-loader"}},[s._v("#")]),s._v(" 21. 图片文件处理,url-loader")]),s._v(" "),t("p",[s._v("图片处理，我们使用url-loader来处理，依然先安装url-loader")]),s._v(" "),t("p",[s._v("修改webpack.config.js配置文件：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpg|gif|jpeg)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("再次打包，运行index.html，就会发现我们的背景图片选出了出来。\n而仔细观察，你会发现背景图是通过base64显示出来的\nOK，这也是limit属性的作用，当图片小于8kb时，对图片进行base64编码")]),s._v(" "),t("h3",{attrs:{id:"_22-图片文件处理-file-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_22-图片文件处理-file-loader"}},[s._v("#")]),s._v(" 22. 图片文件处理,file-loader")]),s._v(" "),t("p",[s._v("那么问题来了，如果大于8kb呢？我们将background的图片改成test02.jpg\n这次因为大于8kb的图片，会通过file-loader进行处理，但是我们的项目中并没有file-loader")]),s._v(" "),t("p",[s._v("所以，我们需要安装file-loader")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader\n")])])]),t("p",[s._v("再次打包，就会发现dist文件夹下多了一个图片文件")]),s._v(" "),t("p",[s._v("我们发现webpack自动帮助我们生成一个非常长的名字\n这是一个32位hash值，目的是防止名字重复\n但是，真实开发中，我们可能对打包的图片名字有一定的要求\n比如，将所有的图片放在一个文件夹中，跟上图片原来的名称，同时也要防止重复\n配置：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("publicPath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dist/'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// css-loader只负责将css文件进行加载")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// style-loader负责将样式添加到DOM中")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用多个loader时, 是从右向左")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// creates style nodes from JS strings")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// translates CSS into CommonJS")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"less-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// compiles Less to CSS")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpg|gif|jpeg)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 当加载的图片, 小于limit时, 会将图片编译成base64字符串形式.")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 当加载的图片, 大于limit时, 需要使用file-loader模块进行加载.")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个img文件夹，然后选择图片的名字.哈希值的八位.extension")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/[name].[hash:8].[ext]'")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// exclude: 排除")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// include: 包含")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("exclude")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("(node_modules|bower_components)")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("presets")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'es2015'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("所以，我们可以在options中添加上如下选项：\nimg：文件要打包到的文件夹\nname：获取图片原来的名字，放在该位置\nhash:8：为了防止图片名称冲突，依然使用hash，但是我们只保留8位\next：使用图片原来的扩展名\n但是，我们发现图片并没有显示出来，这是因为图片使用的路径不正确\n默认情况下，webpack会将生成的路径直接返回给使用者\n但是，我们整个程序是打包在dist文件夹下的，所以这里我们需要在路径下再添加一个dist/")]),s._v(" "),t("h2",{attrs:{id:"_24-es6语法处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_24-es6语法处理"}},[s._v("#")]),s._v(" 24. ES6语法处理")]),s._v(" "),t("p",[s._v("如果你仔细阅读webpack打包的js文件，发现写的ES6语法并没有转成ES5，那么就意味着可能一些对ES6还不支持的浏览器没有办法很好的运行我们的代码。\n在前面我们说过，如果希望将ES6的语法转成ES5，那么就需要使用babel。\n而在webpack中，我们直接使用babel对应的loader就可以了。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("parset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("es2015\n")])])]),t("p",[s._v("配置webpack.config.js文件")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// exclude: 排除")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// include: 包含")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("exclude")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("(node_modules|bower_components)")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loader")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("presets")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'es2015'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("p",[s._v("重新打包，查看bundle.js文件，发现其中的内容变成了ES5的语法")]),s._v(" "),t("h2",{attrs:{id:"_25-引入vuejs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_25-引入vuejs"}},[s._v("#")]),s._v(" 25. 引入Vuejs")]),s._v(" "),t("p",[s._v("后续项目中，我们会使用Vuejs进行开发，而且会以特殊的文件来组织vue的组件。\n所以，下面我们来学习一下如何在我们的webpack环境中集成Vuejs\n现在，我们希望在项目中使用Vuejs，那么必然需要对其有依赖，所以需要先进行安装\n注：因为我们后续是在实际项目中也会使用vue的，所以并不是开发时依赖")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install vue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save\n")])])]),t("p",[s._v("那么，接下来就可以按照我们之前学习的方式来使用Vue了")]),s._v(" "),t("h3",{attrs:{id:"_26-项目打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_26-项目打包"}},[s._v("#")]),s._v(" 26. 项目打包")]),s._v(" "),t("p",[s._v("修改完成后，重新打包，运行程序：\n打包过程没有任何错误(因为只是多打包了一个vue的js文件而已)\n但是运行程序，没有出现想要的效果，而且浏览器中有报错")]),s._v(" "),t("p",[s._v("这个错误说的是我们使用的是runtime-only版本的Vue，什么意思呢？\n这里我只说解决方案：Vue不同版本构建，后续我具体讲解runtime-only和runtime-compiler的区别。\n所以我们修改webpack的配置，添加如下内容即可")]),s._v(" "),t("h3",{attrs:{id:"_27-el和template区别-一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_27-el和template区别-一"}},[s._v("#")]),s._v(" 27. el和template区别（一）")]),s._v(" "),t("blockquote",[t("p",[s._v("正常运行之后，我们来考虑另外一个问题：")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("如果我们希望将data中的数据显示在界面中，就必须是修改index.html")])]),s._v(" "),t("li",[t("p",[s._v("如果我们后面自定义了组件，也必须修改index.html来使用组件")])]),s._v(" "),t("li",[t("p",[s._v("但是html模板在之后的开发中，我并不希望手动的来频繁修改，是否可以做到呢？")])])]),s._v(" "),t("blockquote",[t("p",[s._v("定义template属性：")])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[s._v("在前面的Vue实例中，我们定义了el属性，用于和index.html中的#app进行绑定，让Vue实例之后可以管理它其中的内容")])]),s._v(" "),t("li",[t("p",[s._v("这里，我们可以将div元素中的"+s._s(s.message)+"内容删掉，只保留一个基本的id为div的元素\n但是如果我依然希望在其中显示"+s._s(s.message)+"的内容，应该怎么处理呢？")])]),s._v(" "),t("li",[t("p",[s._v("我们可以再定义一个template属性，代码如下：")]),s._v(" "),t("div",{staticClass:"language-vue extra-class"},[t("pre",{pre:!0,attrs:{class:"language-vue"}},[t("code",[s._v("new Vue({\n\tel:'#app',\n\ttemplate:`"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    {{message}}\n\t\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("`,\n\tdata:{\n\t\tmessage:'shuiqing'\n\t}\n})\n")])])])])]),s._v(" "),t("p",[s._v("重新打包，运行程序，显示一样的结果和HTML代码结构\n那么，el和template模板的关系是什么呢？\n在我们之前的学习中，我们知道el用于指定Vue要管理的DOM，可以帮助解析其中的指令、事件监听等等。\n而如果Vue实例中同时指定了template，那么template模板的内容会替换掉挂载的对应el的模板。\n这样做有什么好处呢？\n这样做之后我们就不需要在以后的开发中再次操作index.html，只需要在template中写入对应的标签即可\n但是，书写template模块非常麻烦怎么办呢？\n没有关系，稍后我们会将template模板中的内容进行抽离。\n会分成三部分书写：template、script、style，结构变得非常清晰。")]),s._v(" "),t("h3",{attrs:{id:"_29-vue组件化开发引入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_29-vue组件化开发引入"}},[s._v("#")]),s._v(" 29. Vue组件化开发引入")]),s._v(" "),t("p",[s._v("在学习组件化开发的时候，我说过以后的Vue开发过程中，我们都会采用组件化开发的思想。\n那么，在当前项目中，如果我也想采用组件化的形式进行开发，应该怎么做呢？\n查看下面的代码：\n当然，我们也可以将下面的代码抽取到一个js文件中，并且导出。")]),s._v(" "),t("h3",{attrs:{id:"_30-vue文件封装处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_30-vue文件封装处理"}},[s._v("#")]),s._v(" 30. .vue文件封装处理")]),s._v(" "),t("p",[s._v("但是一个组件以一个js对象的形式进行组织和使用的时候是非常不方便的\n一方面编写template模块非常的麻烦\n另外一方面如果有样式的话，我们写在哪里比较合适呢？\n现在，我们以一种全新的方式来组织一个vue的组件\n但是，这个时候这个文件可以被正确的加载吗？\n必然不可以，这种特殊的文件以及特殊的格式，必须有人帮助我们处理。\n谁来处理呢？vue-loader以及vue-template-compiler。\n安装vue-loader和vue-template-compiler")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install vue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader vue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("template"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("compiler "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n")])])]),t("p",[s._v("修改webpack.config.js的配置文件：")]),s._v(" "),t("h2",{attrs:{id:"_31-认识plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_31-认识plugin"}},[s._v("#")]),s._v(" 31. 认识plugin")]),s._v(" "),t("p",[s._v("plugin是什么？\nplugin是插件的意思，通常是用于对某个现有的架构进行扩展。\nwebpack中的插件，就是对webpack现有功能的各种扩展，比如打包优化，文件压缩等等。\nloader和plugin区别\nloader主要用于转换某些类型的模块，它是一个转换器。\nplugin是插件，它是对webpack本身的扩展，是一个扩展器。\nplugin的使用过程：\n步骤一：通过npm安装需要使用的plugins(某些webpack已经内置的插件不需要安装)\n步骤二：在webpack.config.js中的plugins中配置插件。\n下面，我们就来看看可以通过哪些插件对现有的webpack打包过程进行扩容，让我们的webpack变得更加好用。")]),s._v(" "),t("h3",{attrs:{id:"添加版权的plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加版权的plugin"}},[s._v("#")]),s._v(" 添加版权的plugin")]),s._v(" "),t("p",[s._v("我们先来使用一个最简单的插件，为打包的文件添加版权声明\n该插件名字叫BannerPlugin，属于webpack自带的插件。\n按照下面的方式来修改webpack.config.js的文件：")]),s._v(" "),t("p",[s._v("重新打包程序：查看bundle.js文件的头部，看到如下信息")]),s._v(" "),t("h3",{attrs:{id:"打包html的plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包html的plugin"}},[s._v("#")]),s._v(" 打包html的plugin")]),s._v(" "),t("p",[s._v("目前，我们的index.html文件是存放在项目的根目录下的。\n我们知道，在真实发布项目时，发布的是dist文件夹中的内容，但是dist文件夹中如果没有index.html文件，那么打包的js等文件也就没有意义了。\n所以，我们需要将index.html文件打包到dist文件夹中，这个时候就可以使用HtmlWebpackPlugin插件\nHtmlWebpackPlugin插件可以为我们做这些事情：\n自动生成一个index.html文件(可以指定模板来生成)\n将打包的js文件，自动通过script标签插入到body中\n安装HtmlWebpackPlugin插件")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install html"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("plugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n")])])]),t("p",[s._v("使用插件，修改webpack.config.js文件中plugins部分的内容如下：\n这里的template表示根据什么模板来生成index.html\n另外，我们需要删除之前在output中添加的publicPath属性\n否则插入的script标签中的src可能会有问题")]),s._v(" "),t("blockquote",[t("p",[s._v("update the webpack.config.js")])]),s._v(" "),t("p",[s._v("写下面的插件前需要下载并引入下面的插件")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" webpack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//webpack本身")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 该插件我们用得到地方是将index.html也打包到dist文件夹下")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BannerPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'版权归shuiqing所有'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"compress-js-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compress-js-code"}},[s._v("#")]),s._v(" compress js code")]),s._v(" "),t("p",[s._v("在项目发布之前，我们必然需要对js等文件进行压缩处理\n这里，我们就对打包的js文件进行压缩\n我们使用一个第三方的插件uglifyjs-webpack-plugin，并且版本号指定1.1.1，和CLI2保持一致")]),s._v(" "),t("p",[s._v("修改webpack.config.js文件，使用插件：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" webpack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" UglifyjsWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uglifyjs-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BannerPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'最终版权归aaa所有'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个插件是将index.html打包到dist文件夹下,可以深入了解下")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UglifyjsWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the plugin is used to compress the js scode")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("查看打包后的bunlde.js文件，是已经被压缩过了。")]),s._v(" "),t("h2",{attrs:{id:"_35-搭建本地服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_35-搭建本地服务器"}},[s._v("#")]),s._v(" 35. 搭建本地服务器")]),s._v(" "),t("p",[s._v("webpack提供了一个可选的本地开发服务器，这个本地服务器基于node.js搭建，内部使用express框架，可以实现我们想要的让浏览器自动刷新显示我们修改后的结果。\n不过它是一个单独的模块，在webpack中使用之前需要先安装它")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev webpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\n")])])]),t("p",[s._v("devserver也是作为webpack中的一个选项，选项本身可以设置如下属性：\ncontentBase：为哪一个文件夹提供本地服务，默认是根文件夹，我们这里要填写./dist\nport：端口号\ninline：页面实时刷新\nhistoryApiFallback：在SPA页面中，依赖HTML5的history模式\nwebpack.config.js文件配置修改如下：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("other config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devServer")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("contentBase")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("inline")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 页面实时刷新")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("我们可以再配置另外一个scripts：")]),s._v(" "),t("blockquote",[t("p",[s._v("--open参数表示直接打开浏览器")])]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"open"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"下面的脚本加上--open以后表示运行后可以自动打开默认的浏览器"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-dev-server --open"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);