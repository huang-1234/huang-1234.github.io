(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{577:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"fetch新一代"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch新一代"}},[t._v("#")]),t._v(" Fetch新一代")]),t._v(" "),s("blockquote",[s("p",[t._v("前段时间看到一句话，Ajax已死，Fetch永生。当然只是一句玩笑话啦！！！")])]),t._v(" "),s("p",[t._v("上面这句话就表明了ajax和Fetch的历史渊源。实际上Fetch和XMLHttpRequest同级，都是浏览器的内置API，不过Fetch是基于Promise对http请求进行了封装。")]),t._v(" "),s("p",[t._v("ajax实际上是对XHR的封装，使其API更好用。而axios则是在基于es6的Promise对ajax再一次封装，现在你应该能理解ajax和Fetch的关系了吧。")]),t._v(" "),s("p",[t._v("下面我们来学习Fetch")]),t._v(" "),s("blockquote",[s("p",[t._v("先来看看MDN是怎么定义Fetch的吧")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("位于 WorkerOrGlobalScope 这一个 mixin 中的 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 方法用于发起获取资源的请求。它返回一个 promise，\n这个 promise 会在请求响应后被 resolve，并传回 Response 对象。\n\nWindow 和 WorkerGlobalScope 都实现了 WorkerOrGlobalScope。 ——这意味着基本在任何场景下只要你想获取资源，\n都可以使用 位于 WorkerOrGlobalScope 中的 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 方法。\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("当遇到网络错误时，fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 返回的 promise 会被 reject，并传回 TypeError，虽然这也可能因为权限或其它问题导致。\n成功的 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 检查不仅要包括 promise 被 resolve，还要包括 Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ok 属性为 "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("。"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" 状态并不被认为是网络错误。\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 方法由 Content Security Policy 的 connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("src指令控制，而不是它请求的资源。\n")])])]),s("p",[t._v("fetch的参数以及返回值")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("参数\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("input\n定义要获取的资源。这可能是：\n一个 USVString 字符串，包含要获取资源的 "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("。一些浏览器会接受 blob"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 和 data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 作为 schemes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n一个 Request 对象。\ninit 可选\n一个配置项对象，包括所有对请求的设置。可选的参数有：\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 请求使用的方法，如 "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v("、"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v("。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 请求的头信息，形式为 Headers 的对象或包含 ByteString 值的对象字面量。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 请求的 body 信息：可能是一个 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Blob、BufferSource")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("en"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("US")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("、FormData、URLSearchParams 或者 USVString 对象。\n注意 "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" 或 "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HEAD")]),t._v(" 方法的请求不能包含 body 信息。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 请求的模式，如 cors、 no"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cors 或者 same"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("origin。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("credentials")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 请求的 credentials，如 omit、same"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("origin 或者 include。为了在当前域名内自动发送 cookie ， \n必须提供这个选项， 从 Chrome "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" 开始， 这个属性也可以接受 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("FederatedCredential")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("en"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("US")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n实例或是一个 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PasswordCredential")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("en"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("US")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 实例。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cache")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  请求的 cache 模式"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("、 no"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("store、 reload 、 no"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache 、 force"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache 或者 only"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cached 。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("redirect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 可用的 redirect 模式"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("follow")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("自动重定向"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("如果产生重定向将自动终止并且抛出一个错误）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n或者 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("manual")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("手动处理重定向"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 在Chrome中默认使用follow（Chrome "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),t._v("之前的默认值是manual）。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("referrer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 一个 USVString 可以是 no"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("referrer、client或一个 "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("。默认是 client。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("referrerPolicy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 指定了"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("头部referer字段的值。可能为以下值之一： \nno"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("referrer、 \nno"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("referrer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("when"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("downgrade、 \norigin、 \norigin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("when"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cross"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("origin、 \nunsafe"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("url 。\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("integrity")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 包括请求的  subresource integrity 值 （ 例如： sha256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("）。\n返回值\n一个 Promise，resolve 时回传 Response 对象。\n")])])]),s("blockquote",[s("p",[t._v("init 可选")])]),t._v(" "),s("p",[t._v("一个配置项对象，包括所有对请求的设置。可选的参数有：")]),t._v(" "),s("p",[s("code",[t._v("method")]),t._v(": 请求使用的方法，如 `GET、"),s("code",[t._v("POST。")])]),t._v(" "),s("p",[s("code",[t._v("headers")]),t._v(": 请求的头信息，形式为 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Headers",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Headers")]),s("OutboundLink")],1),t._v(" 的对象或包含 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/ByteString",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("ByteString")]),s("OutboundLink")],1),t._v(" 值的对象字面量。")]),t._v(" "),s("p",[s("code",[t._v("body")]),t._v(": 请求的 body 信息：可能是一个 "),s("code",[t._v("Blob")]),t._v("、"),s("code",[t._v("BufferSource")]),t._v(" (en-US)、"),s("code",[t._v("FormData")]),t._v("、"),s("code",[t._v("URLSearchParams")]),t._v("或者 ["),s("code",[t._v("USVString")]),t._v(" 对象。注意 GET 或 HEAD 方法的请求不能包含 body 信息。")]),t._v(" "),s("p",[s("code",[t._v("mode")]),t._v(": 请求的模式，如 "),s("code",[t._v("cors、")]),t._v(" "),s("code",[t._v("no-cors 或者")]),t._v(" "),s("code",[t._v("same-origin。")])]),t._v(" "),s("p",[s("code",[t._v("credentials")]),t._v(": 请求的 credentials，如 "),s("code",[t._v("omit、``same-origin 或者")]),t._v(" "),s("code",[t._v("include")]),t._v("。为了在当前域名内自动发送 cookie ， 必须提供这个选项， 从 Chrome 50 开始， 这个属性也可以接受 ["),s("code",[t._v("FederatedCredential")]),t._v("实例或是一个 ["),s("code",[t._v("PasswordCredential")]),t._v("  实例。")]),t._v(" "),s("p",[s("code",[t._v("cache")]),t._v(":  请求的 cache 模式: "),s("code",[t._v("default")]),t._v("、 "),s("code",[t._v("no-store")]),t._v("、 "),s("code",[t._v("reload")]),t._v(" 、 "),s("code",[t._v("no-cache")]),t._v("、 "),s("code",[t._v("force-cache")]),t._v("或者 "),s("code",[t._v("only-if-cached")]),t._v(" 。")]),t._v(" "),s("p",[s("code",[t._v("redirect")]),t._v(": 可用的 redirect 模式: "),s("code",[t._v("follow")]),t._v(" (自动重定向), "),s("code",[t._v("error")]),t._v(" (如果产生重定向将自动终止并且抛出一个错误）, 或者 "),s("code",[t._v("manual")]),t._v(" (手动处理重定向). 在Chrome中默认使用"),s("code",[t._v("follow（")]),t._v("Chrome 47之前的默认值是"),s("code",[t._v("manual")]),t._v("）。")]),t._v(" "),s("p",[s("code",[t._v("referrer")]),t._v(": 一个 ["),s("code",[t._v("USVString")]),t._v("可以是 "),s("code",[t._v("no-referrer、``client")]),t._v("或一个 URL。默认是 "),s("code",[t._v("client。")])]),t._v(" "),s("p",[s("code",[t._v("referrerPolicy")]),t._v(": 指定了HTTP头部referer字段的值。可能为以下值之一： "),s("code",[t._v("no-referrer、")]),t._v(" "),s("code",[t._v("no-referrer-when-downgrade、")]),t._v(" "),s("code",[t._v("origin、")]),t._v(" "),s("code",[t._v("origin-when-cross-origin、")]),t._v(" "),s("code",[t._v("unsafe-url 。")])]),t._v(" "),s("p",[t._v("``integrity"),s("code",[t._v(": 包括请求的 subresource integrity值 （ 例如：")]),t._v("sha256BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE=）。`")]),t._v(" "),s("blockquote",[s("p",[t._v("返回值")])]),t._v(" "),s("p",[t._v("Ajax和Fetch都是浏览器端向服务器端发送数据请求的http封装。只不过Fetch是基于Promise的。")]),t._v(" "),s("h2",{attrs:{id:"fetch接收的参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch接收的参数"}},[t._v("#")]),t._v(" Fetch接收的参数")]),t._v(" "),s("p",[t._v("第一个参数url")]),t._v(" "),s("p",[t._v("第二个参数：可以控制不同配置的init对象")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("最好使用符合内容安全策略")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CSP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("en"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("US")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("的链接而不是使用直接指向资源地址的方式来进行Fetch的请求。\n\n支持的请求参数\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 接受第二个可选参数，一个可以控制不同配置的 init 对象：\n\n参考 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("，查看所有可选的配置和更多描述。\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example POST method implementation:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://example.com/answer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("answer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// JSON from `response.json()` call")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Default options are marked with *")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// must match 'Content-Type' header")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cache")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-cache'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// *default, no-cache, reload, force-cache, only-if-cached")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("credentials")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'same-origin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// include, same-origin, *omit")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'user-agent'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Mozilla/4.0 MDN Example'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'content-type'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// *GET, POST, PUT, DELETE, etc.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cors'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// no-cors, cors, *same-origin")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("redirect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'follow'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// manual, *follow, error")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("referrer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-referrer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// *client, no-referrer")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// parses response to JSON")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("init 对象要按照下表中的键/值进行填充。")])])}),[],!1,null,null,null);s.default=r.exports}}]);