(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{572:function(e,v,_){"use strict";_.r(v);var o=_(2),a=Object(o.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"缓存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[e._v("#")]),e._v(" 缓存")]),e._v(" "),v("h3",{attrs:{id:"文件的缓存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#文件的缓存"}},[e._v("#")]),e._v(" 文件的缓存")]),e._v(" "),v("p",[e._v("快速回答")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("Expires")]),e._v(" 为 Cookie 的删除设置一个过期的"),v("strong",[e._v("日期")])]),e._v(" "),v("li",[v("code",[e._v("Max-age")]),e._v(" 设置一个 Cookie 将要过期的秒数")]),e._v(" "),v("li",[e._v("IE 浏览器(ie6、ie7 和 ie8) 不支持 "),v("code",[e._v("max-age")]),e._v("，所有的浏览器都支持 "),v("code",[e._v("expires")])])]),e._v(" "),v("p",[e._v("深入一些来说明")]),e._v(" "),v("p",[v("code",[e._v("expires")]),e._v(" 参数是当年网景公司推出 Cookies 原有的一部分。在 HTTP1.1 中，"),v("code",[e._v("expires")]),e._v(" 被弃用并且被更加易用的 "),v("code",[e._v("max-age")]),e._v(" 所替代。你只需说明这个 Cookie 能够存活多久就可以了，而不用像之前那样指定一个日期。设置二者中的一个，Cookie 会在它过期前一直保存，如果你一个都没有设置，这个 Cookie 将会一直存在直到你关闭浏览器，这种称之为 "),v("code",[e._v("Session Cookie")]),e._v("。")]),e._v(" "),v("p",[v("strong",[e._v("举个栗子")])]),e._v(" "),v("p",[e._v("用 "),v("code",[e._v("expires")]),e._v(" 的方式设置 "),v("code",[e._v("foo=bar")]),e._v(" 在5分钟后过期")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("var d = new Date();\nd.setTime(d.getTime() + 5*60*1000); // in milliseconds\ndocument.cookie = 'foo=bar;path=/;expires='+d.toGMTString()+';';\n")])])]),v("p",[e._v("用 "),v("code",[e._v("max-age")]),e._v(" 来做同样的事情")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("document.cookie = 'foo=bar;path=/;max-age='+5*60+';';\n")])])]),v("p",[e._v("不幸的是，IE 浏览器 不支持 "),v("code",[e._v("max-age")]),e._v("，如果你想跨浏览器存放 Cookie，应该坚持用 "),v("code",[e._v("expires")]),e._v("。")]),e._v(" "),v("p",[e._v("下边我们来进行几个假设的问答")]),e._v(" "),v("p",[v("strong",[e._v("问：如果我在 Cookie 中同时设置了 "),v("code",[e._v("expires")]),e._v(" 和 "),v("code",[e._v("max-age")]),e._v(" 会发生什么？")])]),e._v(" "),v("p",[e._v("答：所有支持 "),v("code",[e._v("max-age")]),e._v(" 的浏览器会忽略 "),v("code",[e._v("expires")]),e._v(" 的值，只有 IE 另外，IE 会忽略 "),v("code",[e._v("max-age")]),e._v(" 只支持 "),v("code",[e._v("expires")]),e._v("。")]),e._v(" "),v("p",[v("strong",[e._v("问：如果我只设了 "),v("code",[e._v("max-age")]),e._v(" 会怎样？")])]),e._v(" "),v("p",[e._v("答：除了 IE 之外的所有浏览器会正确的使用它。在 IE 浏览器中，这个 Cookie 将会作为一个 Session Cookie（当你关闭浏览器时它会被删除）。")]),e._v(" "),v("p",[v("strong",[e._v("问：如果我只设了 "),v("code",[e._v("expires")]),e._v("？")])]),e._v(" "),v("p",[e._v("答：所有浏览器会正确使用它来保存 Cookie，只需要记得像上边示例那样设置它的 GMT 时间就行了。")]),e._v(" "),v("p",[v("strong",[e._v("问：这篇文章的寓意是什么？")])]),e._v(" "),v("p",[e._v("答：如果你关心你的 Cookies 功能在大多数 Web 用户下正常工作，不要用正确的方式（"),v("code",[e._v("max-age")]),e._v("）存储你的 Cookies，应该用 "),v("code",[e._v("expires")]),e._v(" 的方式让他们工作。")])])}),[],!1,null,null,null);v.default=a.exports}}]);