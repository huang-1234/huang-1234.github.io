(window.webpackJsonp=window.webpackJsonp||[]).push([[446],{878:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("ä¸‰å¤©ç²¾é€š React")]),t._v(" "),a("blockquote",[a("p",[t._v("æ­¤æ–‡çŒ®ç»™æ²¡æœ‰ä½¿ç”¨è¿‡ React çš„å°ä¼™ä¼´ï¼Œå¸®åŠ©å°ä¼™ä¼´ä»¬è¿…é€Ÿç²¾é€š React")])]),t._v(" "),a("h1",{attrs:{id:"å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),a("p",[t._v("React å®˜ç½‘æ–‡æ¡£æ¯”è¾ƒå®Œå–„ï¼Œæœ¬æ–‡æ›´æ³¨é‡ç»“åˆå®é™…é¡¹ç›®ä¸­å¸¸è§çš„é—®é¢˜ï¼Œæ¥ä»‹ç» React çš„ç”¨æ³•")]),t._v(" "),a("h2",{attrs:{id:"fun-facts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fun-facts"}},[t._v("#")]),t._v(" Fun Facts")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("React")]),t._v(" "),a("th",[t._v("Vue")]),t._v(" "),a("th",[t._v("Angular")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("NPM weekly downloadsï¼ˆç”±äº cnpm æ— æ³•æŸ¥çœ‹åŒ…ï¼Œæ•°æ®ä¸å…¨ï¼‰")]),t._v(" "),a("td",[t._v("12,635,966")]),t._v(" "),a("td",[t._v("2,662,666")]),t._v(" "),a("td",[t._v("823,653")])]),t._v(" "),a("tr",[a("td",[t._v("Dependents")]),t._v(" "),a("td",[t._v("59,757")]),t._v(" "),a("td",[t._v("30,212")]),t._v(" "),a("td",[t._v("4,088")])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmtrends.com/angular-vs-react-vs-vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä» "),a("OutboundLink")],1),a("a",{attrs:{href:"https://www.npmtrends.com/angular-vs-react-vs-vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm"),a("OutboundLink")],1),a("a",{attrs:{href:"https://www.npmtrends.com/angular-vs-react-vs-vue",target:"_blank",rel:"noopener noreferrer"}},[t._v(" ä¸‹è½½é‡å’Œè¢«å…¶ä»–åŒ…ä¾èµ–çš„æ•°é‡æ¥çœ‹ï¼Œ"),a("OutboundLink")],1),a("a",{attrs:{href:"https://www.npmtrends.com/angular-vs-react-vs-vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("React"),a("OutboundLink")],1),a("a",{attrs:{href:"https://www.npmtrends.com/angular-vs-react-vs-vue",target:"_blank",rel:"noopener noreferrer"}},[t._v(" çš„ç¤¾åŒºæœ€æ´»è·ƒ"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"why-we-choose-react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-we-choose-react"}},[t._v("#")]),t._v(" Why We Choose React")]),t._v(" "),a("p",[t._v("è·Ÿ Vueã€Angularã€ç›¸æ¯”ï¼ŒReact æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ä¸°å¯Œã€å……æ»¡æ´»åŠ›çš„å¼€æºç”Ÿæ€")])]),t._v(" "),a("li",[a("p",[t._v("React æ˜¯ Just JavaScriptï¼Œæ²¡æœ‰å…¶ä»–æ¦‚å¿µéœ€è¦å­¦ä¹ ")])]),t._v(" "),a("li",[a("p",[t._v("å­¦ä¹ èµ„æ–™ä¸°å¯Œ")])]),t._v(" "),a("li",[a("p",[t._v("æ¶æ„æ¸…æ™°ï¼Œæ¥å£å’Œå®ç°åˆ†ç¦»è¾ƒå¥½ï¼Œæ˜“äºå®šåˆ¶åŒ–åŠæ‰©å±•")])]),t._v(" "),a("li",[a("p",[t._v("ç»´æŠ¤å›¢é˜Ÿå¯é ï¼ŒFB èƒŒä¹¦")])])]),t._v(" "),a("h1",{attrs:{id:"ç¬¬ä¸€å¤©-åŸºç¡€ç¯‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€å¤©-åŸºç¡€ç¯‡"}},[t._v("#")]),t._v(" ç¬¬ä¸€å¤©ï¼šåŸºç¡€ç¯‡")]),t._v(" "),a("p",[t._v("åœ¨å¼€å§‹åŸºç¡€ç¯‡å‰ï¼Œå…ˆå£°æ˜ä¸€ä¸‹æœ¬æ–‡å°†ä¸ä»‹ç» class component ç›¸å…³çš„ä»»ä½• api å’Œä½¿ç”¨èŒƒå¼ã€‚class component çš„å†™æ³•å·²ä¸å†æ¨èä½¿ç”¨ã€‚")]),t._v(" "),a("h2",{attrs:{id:"jsx-æ˜¯å•¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsx-æ˜¯å•¥"}},[t._v("#")]),t._v(" JSX æ˜¯å•¥ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/hello-world-ohtkp?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("JSX å¯ä»¥ç†è§£ä¸ºä¸€ç§ JS è¯­æ³•ç³–ã€‚å®ƒè®©å›ºå®šä¼ å‚çš„å‡½æ•°åµŒå¥—è°ƒç”¨çœ‹ä¸Šå»åƒ xmlï¼Œä»¥ä½¿ä»£ç æ›´æ¸…æ™°æ˜“æ‡‚ã€‚")]),t._v(" "),a("p",[t._v("ä¸‹é¢è¿™æ®µä»£ç ")]),t._v(" "),a("div",{staticClass:"language-Groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    ComponentA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("attr1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attr2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        ComponentB1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("attr1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attr2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ComponentC1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" propsC1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ComponentC2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" propsC2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("backgroundColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        `Hello "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("varWorld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("`\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¦‚æœç”¨ JSX è¯­æ³•æ¥å†™ï¼Œå°±ä¼šå˜æˆè¿™æ ·")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ComponentA")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("attr1")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("attr2")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("{0}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ComponentB1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("attr1")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("attr2")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("{1}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ComponentC1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("{...propsC1}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ComponentC2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("{...propsC2}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ComponentB1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value css language-css"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("backgroundColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("'red'}}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello {varWorld}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ComponentA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("JSX è¯­æ³•åœ¨è¿è¡Œå‰ä¼šé€šè¿‡ç¼–è¯‘å·¥å…·è½¬æˆæ™®é€šçš„ JavaScript è¯­æ³•ã€‚")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Before React V17")])]),t._v(" "),a("p",[t._v("åœ¨ React V17 ä¹‹å‰éœ€è¦æ³¨æ„ï¼Œç¼–è¯‘å·¥å…·åªæ˜¯æ”¹è¯­æ³•ï¼Œå¯¹äºç¼–è¯‘ç»“æœ "),a("code",[t._v("React.createElement")]),t._v(" çš„è°ƒç”¨ï¼ŒReact æœ¬èº«çš„å¼•å…¥éœ€è¦è‡ªå·±å¤„ç†ã€‚æ‰€ä»¥ï¼Œ"),a("strong",[t._v("å‡¡æ˜¯ç”¨åˆ°")]),t._v(" "),a("strong",[t._v("JSX")]),t._v(" "),a("strong",[t._v("è¯­æ³•çš„æ–‡ä»¶ï¼Œä¸€å®šè¦åœ¨å¤´éƒ¨å†™")]),t._v("**"),a("code",[t._v("import React from 'react';")]),t._v("**æ¥å¯¼å…¥ React è¿™ä¸ªå˜é‡ã€‚å¦‚æœä¸å¯¼å…¥ï¼Œé‚£ä¹ˆ React å˜é‡å°±ä¸å­˜åœ¨ï¼Œä¼šå¯¼è‡´ "),a("code",[t._v("React is not defined")]),t._v(" æŠ¥é”™ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("After React V17")])]),t._v(" "),a("p",[t._v("åœ¨ React V17 ä¸­ï¼Œä¾é  "),a("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-transform-react-jsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/plugin-transform-react-jsx"),a("OutboundLink")],1),t._v(" (åŒ…å«åœ¨ @babel/preset-react ä¸­ï¼‰ï¼Œå¯ä»¥çœç•¥ "),a("strong",[a("code",[t._v("import React from 'react';")])]),t._v(" è¿™æ®µä»£ç ã€‚å¦‚æœä½¿ç”¨çš„ TypeScript "),a("strong",[t._v(">= 4.1.2")]),t._v("ï¼Œå¯ä»¥åœ¨ tsconfig.json æ–‡ä»¶ä¸­é€šè¿‡ "),a("a",{attrs:{href:"https://www.typescriptlang.org/docs/handbook/jsx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsx"),a("OutboundLink")],1),a("a",{attrs:{href:"https://www.typescriptlang.org/docs/handbook/jsx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v(" é…ç½®"),a("OutboundLink")],1),t._v(" æ¥çœç•¥æ‰‹åŠ¨å¼•å…¥ React è¿™ä¸€å¥ä»£ç ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"jsx-éœ€è¦æ³¨æ„çš„å‡ ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsx-éœ€è¦æ³¨æ„çš„å‡ ç‚¹"}},[t._v("#")]),t._v(" JSX éœ€è¦æ³¨æ„çš„å‡ ç‚¹")]),t._v(" "),a("h4",{attrs:{id:"å…³é”®å­—å†²çª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®å­—å†²çª"}},[t._v("#")]),t._v(" å…³é”®å­—å†²çª")]),t._v(" "),a("p",[t._v("å› ä¸º JSX åªæ˜¯ JS çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥ React åœ¨è®¾è®¡ DOM Element API æ—¶ï¼Œé¿å…äº†ä¸ JavaScript çš„å…³é”®å­—å†²çªçš„ä¸€äº›å±æ€§åï¼Œä¸‹é¢ä¸¾å‡ ä¸ªå¸¸è§ä¾‹å­ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("æœ‰ TypeScript çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡é™æ€æ£€æŸ¥ã€æ™ºèƒ½æç¤ºä¿è¯ä»£ç æ­£ç¡®æ€§ï¼Œæ— éœ€è®°å¿†")])]),t._v(" "),a("h4",{attrs:{id:"ä½¿ç”¨-html-å­—ç¬¦ä¸²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-html-å­—ç¬¦ä¸²"}},[t._v("#")]),t._v(" ä½¿ç”¨ html å­—ç¬¦ä¸²")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-dangerouslysetinnerhtml-u2uf6?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("React ä¼šå¯¹æ’å…¥åœ¨æ–‡å­—åš html è½¬ä¹‰ï¼Œé¿å…ä¸€äº›å®‰å…¨é—®é¢˜ã€‚ä½†æˆ‘ä»¬æœ‰æ—¶éœ€è¦ç›´æ¥æ’å…¥ html ä»£ç ç‰‡æ®µï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ "),a("code",[t._v("dangerouslySetInnerHTML")]),t._v(" å±æ€§æ¥è®¾ç½®æŸä¸ª DOM Element çš„ innerHTMLã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯ç»„ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ç»„ä»¶"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("ç»„ä»¶å°±æ˜¯ä¸ªå‡½æ•°è€Œå·²")])]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/hello-world-ohtkp?file=/src/components/Button.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("React åº”ç”¨æ˜¯ä»¥ç»„ä»¶åŒ–çš„æ–¹å¼æ­å»ºçš„ã€‚è¿™ä½¿å¾— React ä»£ç æ˜“äºå®ç°ã€ç»´æŠ¤ã€å¤ç”¨åŠæµ‹è¯•ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ React ä¸­ï¼Œç¼–å†™ä¸€ä¸ªç»„ä»¶å°±è·Ÿç¼–å†™ä¸€ä¸ªå‡½æ•°ä¸€æ ·ç®€å•ã€‚æˆ‘ä»¬ç§°ä¸ºå‡½æ•°ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("è®©æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œè¿™ä¸ªæŒ‰é’®å¯ä»¥æŒ‡å®šé¢œè‰²ã€ç»‘å®šç‚¹å‡»äº‹ä»¶ã€è®¾ç½®æŒ‰é’®æ–‡æ¡ˆã€‚")]),t._v(" "),a("p",[t._v("UI ç»„ä»¶ä¸€èˆ¬éƒ½æ˜¯çº¯å‡½æ•°ç»„ä»¶ï¼Œæ‰€è°“çº¯å‡½æ•°å°±æ˜¯æœ‰ç‰¹å®šçš„è¾“å…¥å°±èƒ½å¾—åˆ°ç‰¹å®šçš„è¾“å‡ºï¼Œæ˜¯å®Œå…¨å¯ä»¥é¢„æµ‹å¯é€†æ¨çš„è¾“å…¥å’Œè¾“å‡ºå…³ç³»ã€‚å³ "),a("em",[a("strong",[t._v("UI")])]),t._v(" "),a("strong",[t._v("= Æ’(x)ã€‚")])]),t._v(" "),a("p",[t._v("è®©æˆ‘ä»¬æ¥ä»è¾“å‡ºï¼ˆ"),a("strong",[t._v("UI")]),t._v("ï¼‰å¼€å§‹ï¼Œæ¥æ€è€ƒå¦‚ä½•è®¾è®¡è¿™ä¸ªç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œæ‰€ä»¥è¾“å‡ºä½¿ç”¨ "),a("code",[t._v("<button>")]),t._v(" ä½œä¸ºæ ‡å‡† html æŒ‰é’®è¾“å‡º")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å…¶æ¬¡ï¼ŒæŒ‰é’®éœ€è¦èƒ½é€šè¿‡ props.color è®¾ç½®æŒ‰é’®é¢œè‰²")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" style "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("backgroundColor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ç„¶åï¼Œæ·»åŠ  onClick äº‹ä»¶ç›‘å¬")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onClick "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" style "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("backgroundColor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æœ€åï¼Œä¸ºäº†è®© Button ç»„ä»¶ç”¨èµ·æ¥å’Œ html button æ ‡ç­¾ç±»ä¼¼ï¼Œæˆ‘ä»¬å°† Button å†…å®¹çš„æ¸²æŸ“ä» props.children è¿™ä¸ªç‰¹æ®Šå±æ€§ä¸Šå»å–ï¼ˆç‰¹æ®Šåœ¨ï¼ŒJSX è¯­æ³•å®šä¹‰éé—­åˆæ ‡ç­¾ä¸­çš„å†…å®¹ä¼šä½œä¸º props.children ä¼ é€’ï¼‰")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" style "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("backgroundColor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨ Button ç»„ä»¶")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyReactApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button\n        color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v("\n        onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        Hello React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ç°åœ¨æˆ‘ä»¬å·²ç»ç¼–å†™äº†ç¬¬ä¸€ä¸ª React ç»„ä»¶ ğŸ‰ğŸ‰ğŸ‰   ï¼Œæ˜¯ä¸æ˜¯ "),a("strong",[t._v("So Easy ğŸ¤£")]),t._v("  ï¼Œå®é™…é¡¹ç›®ä¸­ï¼ŒReact åº”ç”¨å°±æ˜¯ç”±è¿™æ ·ä¸€ä¸ªä¸ªåŠŸèƒ½ä¸“æ³¨ï¼Œé€»è¾‘ç®€å•çš„ç»„ä»¶æ‹¼è£…èµ·æ¥çš„ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ Button ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•çš„å†…éƒ¨çŠ¶æ€éœ€è¦ç»´æŠ¤ã€‚æ ·å¼æ¸²æŸ“ã€ç‚¹å‡»è¡Œä¸ºã€æ–‡æ¡ˆéƒ½æ˜¯é€šè¿‡ props å‚æ•°ä¼ é€’è¿›æ¥çš„ï¼Œæˆ‘ä»¬ç§°è¿™ç§è‡ªèº«æ²¡æœ‰ä»»ä½•çŠ¶æ€çš„ç»„ä»¶å«"),a("strong",[t._v("æ— çŠ¶æ€ç»„ä»¶")]),t._v(" "),a("strong",[t._v("(Stateless Function Component)ã€‚")])]),t._v(" "),a("p",[t._v("å¤§å¤šæ•° UI ç»„ä»¶éƒ½æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œä¸Šå±‚ç»„ä»¶è®¡ç®—ã€ç»´æŠ¤ UI çŠ¶æ€ï¼Œå°† UI çŠ¶æ€ä¼ ç»™è¿™äº›æ— çŠ¶æ€ç»„ä»¶ï¼Œæ¥è¾¾åˆ° UI ç»„ä»¶çš„é«˜æ˜“å¤ç”¨æ€§å’Œæ˜“ç»´æŠ¤æ€§ã€‚")]),t._v(" "),a("p",[t._v("è®©æˆ‘ä»¬å†çœ‹çœ‹æœ‰çŠ¶æ€ç»„ä»¶ "),a("strong",[t._v("(Stateful Function Component)")])]),t._v(" "),a("h2",{attrs:{id:"å¸¦çŠ¶æ€çš„ç»„ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¦çŠ¶æ€çš„ç»„ä»¶"}},[t._v("#")]),t._v(" å¸¦çŠ¶æ€çš„ç»„ä»¶")]),t._v(" "),a("p",[t._v("åœ¨ç»„ä»¶ä¸­è¦ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œä¸»è¦æ¶‰åŠä¸¤ä¸ª API æ¥ä¿å­˜çŠ¶æ€ï¼Œ"),a("code",[t._v("useState")]),t._v("ã€"),a("code",[t._v("useRef")])]),t._v(" "),a("h3",{attrs:{id:"usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-usestate-x1jm4?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("code",[t._v("useState")]),t._v(" å…¥å‚æ˜¯"),a("strong",[t._v("åˆå§‹çŠ¶æ€")]),t._v("ã€‚å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ª functionï¼Œåˆ™å°†æ­¤ function çš„"),a("strong",[t._v("è¿”å›ä½œä¸ºåˆå§‹çŠ¶æ€")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‹é¢ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("count")]),t._v(" åˆå§‹å€¼ä¸º "),a("code",[t._v("0")]),t._v("ã€‚function ä¼ å‚"),a("strong",[t._v("åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œ")]),t._v("ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œfunction ä¼ å‚"),a("strong",[t._v("åªä¼šæ‰§è¡Œä¸€æ¬¡")]),t._v("ã€‚å¦‚æœé‡ç»˜çš„æ—¶å€™ "),a("code",[t._v("useState")]),t._v(" ä¼ å‚å˜äº†ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å½“å‰ "),a("code",[t._v("state")]),t._v(" çš„å€¼ã€‚")]),t._v(" "),a("p",[t._v("å½“è°ƒç”¨ "),a("code",[t._v("useState")]),t._v(" è¿”å›æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆå³ï¼š"),a("code",[t._v("setCount")]),t._v("ï¼‰æ—¶ï¼ŒReact ä¼šé‡ç»˜å½“å‰ç»„ä»¶ï¼Œæ›´æ–° html æ–‡æ¡£ï¼Œè§¦å‘æµè§ˆå™¨é‡ç»˜ã€‚")]),t._v(" "),a("p",[t._v("å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡ä½¿ç”¨ "),a("code",[t._v("setCount")]),t._v(" æ—¶ï¼Œéƒ½ä¼šé‡æ–°æ‰§è¡Œ Component çš„å‡½æ•°ï¼Œæ‰€ä»¥ï¼Œ"),a("strong",[t._v("ç»å¯¹ä¸èƒ½")]),t._v("åœ¨ Component å‡½æ•°ä¸­åŒæ­¥è°ƒç”¨ "),a("code",[t._v("setCount")]),t._v("ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ— é™é‡ç»˜ï¼Œé¡µé¢å‡æ­»ã€‚")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("BadComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Oopsï¼Trigger rerender again and again")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å®é™…ä¸Šï¼Œé¡µé¢çš„ UI å˜æ›´ï¼Œæ€»æ˜¯æœ‰åŸå› çš„ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ç”¨æˆ·è§¦å‘çš„äº¤äº’ï¼Œå¦‚ï¼šé”®ç›˜è¾“å…¥ã€é¼ æ ‡ç‚¹å‡»ã€å±å¹•æ»‘åŠ¨ç­‰")])]),t._v(" "),a("li",[a("p",[t._v("å®šæ—¶å™¨çš„è§¦å‘ï¼Œå¦‚ï¼š"),a("code",[t._v("setTimeout")]),t._v("ã€"),a("code",[t._v("requestAnimationFrame")]),t._v("ã€"),a("code",[t._v("setInterval")])])]),t._v(" "),a("li",[a("p",[t._v("IO äº‹ä»¶å›è°ƒè§¦å‘ï¼Œå¦‚ï¼šAJAX è¯·æ±‚è¿”å›çš„å›è°ƒ")])])]),t._v(" "),a("p",[t._v("æ€»ç»“å°±æ˜¯ï¼Œ"),a("code",[t._v("setCount")]),t._v(" æ“ä½œå¿…é¡»åœ¨æŸä¸ªå›è°ƒä¸­è°ƒç”¨ï¼Œä¸åº”è¯¥å‡ºç°åœ¨ Component å‡½æ•°çš„åŒæ­¥è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚")]),t._v(" "),a("h4",{attrs:{id:"ä»¥ä¸‹æƒ…å†µ-usestate-éœ€ä½¿ç”¨-function-ä½œä¸ºå…¥å‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»¥ä¸‹æƒ…å†µ-usestate-éœ€ä½¿ç”¨-function-ä½œä¸ºå…¥å‚"}},[t._v("#")]),t._v(" ä»¥ä¸‹æƒ…å†µ useState éœ€ä½¿ç”¨ function ä½œä¸ºå…¥å‚")]),t._v(" "),a("h5",{attrs:{id:"å½“åˆå§‹çŠ¶æ€éœ€è¦å¤æ‚è®¡ç®—æ—¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å½“åˆå§‹çŠ¶æ€éœ€è¦å¤æ‚è®¡ç®—æ—¶"}},[t._v("#")]),t._v(" å½“åˆå§‹çŠ¶æ€éœ€è¦å¤æ‚è®¡ç®—æ—¶")]),t._v(" "),a("p",[t._v("å‡è®¾ï¼Œcount çš„åˆå§‹å€¼éœ€è¦æ ¹æ® props ä¼ å…¥çš„æ•°æ®ç›¸åŠ æ¥ç¡®å®šæ—¶ï¼Œæˆ‘ä»¬å¯¹æ¯”ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bad")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initialCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("acc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cur")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" acc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cur"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// good")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("acc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cur")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" acc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cur"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("åˆ©ç”¨ function ä¼ å‚åªä¼šæ‰§è¡Œä¸€æ¬¡çš„ç‰¹ç‚¹ï¼Œç»„ä»¶é‡ç»˜æ—¶å°±ä¸éœ€è¦å†æ‰§è¡Œæ— ç”¨çš„ reduce è®¡ç®—ã€‚")]),t._v(" "),a("h5",{attrs:{id:"å½“åˆå§‹çŠ¶æ€æ˜¯å¤æ‚å¯¹è±¡æ—¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å½“åˆå§‹çŠ¶æ€æ˜¯å¤æ‚å¯¹è±¡æ—¶"}},[t._v("#")]),t._v(" å½“åˆå§‹çŠ¶æ€æ˜¯å¤æ‚å¯¹è±¡æ—¶")]),t._v(" "),a("p",[t._v("åˆ›å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ€§èƒ½å¼€é”€æ˜¯å¾ˆå¤§çš„ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªåˆå§‹ state åŒ…å« 50+ ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ function åªæ‰§è¡Œä¸€æ¬¡çš„ç‰¹ç‚¹ï¼Œè®©è¿™ä¸ªå¤æ‚å¯¹è±¡çš„å£°æ˜åªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œã€‚ï¼ˆfunction çš„å£°æ˜æ‰€è€—æ€§èƒ½ä¸ function æ‰€å«ä»£ç é‡æ— å…³çš„ï¼Œä½†å¯¹è±¡ã€æ•°ç»„æ˜¯å¢é•¿çš„ï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://runkit.com/lpegasus/609a5c871dcc8d00198579f0",target:"_blank",rel:"noopener noreferrer"}},[t._v("å„ç±»å‹åˆå§‹åŒ– benchmark"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bad")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr50")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// good")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attr50")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"å…³äº-setcount-ä¼ å…¥-function-çš„é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº-setcount-ä¼ å…¥-function-çš„é—®é¢˜"}},[t._v("#")]),t._v(" å…³äº setCount ä¼ å…¥ function çš„é—®é¢˜")]),t._v(" "),a("p",[t._v("ä¸Šé¢çš„ "),a("code",[t._v("setCount")]),t._v(" é™¤äº†å¯ä»¥ä¼ å…¥ number å¤–ï¼Œè¿˜å¯ä»¥ä¼ å‡½æ•°æ¥æ›´æ–°çŠ¶æ€ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldCount")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" newCount\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä¼ å‡½æ•°çš„å¥½å¤„æ˜¯ï¼Œå½“ä¾èµ– state è‡ªèº«æœ€æ–°çŠ¶æ€æ¥æ›´æ–°çŠ¶æ€æ—¶ï¼Œä¸éœ€è¦è®¿é—®å¤–éƒ¨å˜é‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/functional-setstate-bmh5u?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-Lisp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-lisp"}},[a("code",[t._v("useEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" => {\n  if "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("loading")]),t._v(".loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" {\n    const sub = interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0, animationFrameScheduler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      .pipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        take"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("201")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n        map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("n")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" => "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" - n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      .subscribe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("{")]),t._v("\n        next"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("d")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" {\n          setLoadingTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("d")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n        },\n        complete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" {\n          setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("count")]),t._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n          setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" => count + "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n        }\n      }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n    return "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" => sub.unsubscribe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n  }\n}, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä¸Šé¢çš„ä»£ç ï¼ŒLoading çŠ¶æ€æ—¶ç‚¹å‡» +1 æŒ‰é’®æ¥å¢åŠ  countï¼Œè§‚å¯Ÿ loading ç»“æŸä¹‹åï¼Œcount æ•°å€¼å˜åŒ–ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åå°† Line 13 çš„ä»£ç æ¢æˆ Line 14 çš„ä»£ç ï¼Œå†åœ¨ loading æ—¶ç‚¹å‡» +1 çœ‹ä¸‹æ•ˆæœã€‚")]),t._v(" "),a("h3",{attrs:{id:"useref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),a("p",[t._v("å½“éœ€è¦å­˜æ”¾ä¸€ä¸ªæ•°æ®ï¼Œéœ€è¦æ— è®ºåœ¨å“ªé‡Œéƒ½å–åˆ°æœ€æ–°çŠ¶æ€æ—¶ï¼Œéœ€è¦ä½¿ç”¨ useRefã€‚")]),t._v(" "),a("h4",{attrs:{id:"ref-æ˜¯ä¸€ç§å¯å˜æ•°æ®ã€‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref-æ˜¯ä¸€ç§å¯å˜æ•°æ®ã€‚"}},[t._v("#")]),t._v(" ref æ˜¯ä¸€ç§å¯å˜æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆæˆ‘ä»¬æ¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šä¸€ä¸‹å‡½æ•°ç»„ä»¶ä¸­å¸¸è§çš„é—­åŒ…é—®é¢˜ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("è§‚å¯Ÿ console æ‰“å°çš„å€¼æ˜¯ä»€ä¹ˆ "),a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-closure-ptbxq?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("See it on Codesandbox"),a("OutboundLink")],1)])])]),t._v(" "),a("p",[t._v("ä¸Šé¢çš„ä»£ç ï¼Œconsole æ°¸è¿œæ‰“å° 0ã€‚å› ä¸ºå‡½æ•°å£°æ˜æ—¶ï¼ˆç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼‰ï¼Œcount æ˜¯ 0ï¼Œä¹‹åæ— è®ºè¿™ä¸ªå‡½æ•°è°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½ä¼šæ˜¯ 0ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ‹¿åˆ° count çš„æœ€æ–°å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨ useRef å£°æ˜ä¸€ä¸ªå¯å˜æ•°æ®å¯¹è±¡ï¼Œæ¥å­˜å‚¨ countã€‚ç”±äºå¯¹è±¡å¼•ç”¨æ˜¯ä¸å˜çš„ï¼Œå½“æˆ‘ä»¬æ›´æ–°å¯¹è±¡æŸä¸ªå­—æ®µæ—¶ï¼Œé—­åŒ…å‡½æ•°å°±èƒ½è®¿é—®åˆ°æœ€æ–°çš„å€¼äº†ã€‚")]),t._v(" "),a("p",[t._v("ä»£ç æ”¹å†™å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SomeComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" countRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  countRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œ useEffect è¡¨ç¤ºåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“å®Œæˆåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå…·ä½“ useEffect ç”¨æ³•ä¸‹é¢è®²")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("currentCount")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" currentCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("See what's printed "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"é¿å…åŸºäºå¯å˜å¯¹è±¡çš„-ref-æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¿å…åŸºäºå¯å˜å¯¹è±¡çš„-ref-æ›´æ–°"}},[t._v("#")]),t._v(" é¿å…åŸºäºå¯å˜å¯¹è±¡çš„ ref æ›´æ–°")]),t._v(" "),a("p",[t._v("å¯¹äº useRef çš„å€¼çš„æ›´æ–°ï¼Œéœ€è¦æ³¨æ„å¦‚æœæ˜¯åœ¨ Component å‡½æ•°ä¸­åŒæ­¥èµ‹å€¼çš„æƒ…å†µï¼Œä¸è¦åšåŸºäºå…¶ä»–ä»»ä½•å¯å˜æ•°æ®çš„å¢é‡æ›´æ–°ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-Swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bad")]),t._v("\ncountRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" countRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// good")]),t._v("\ncountRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" immutableState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å› ä¸ºåœ¨ StrictMode ä¸‹ï¼ŒReact æ¯æ¬¡æ¸²æŸ“ä¼šæ‰§è¡Œä¸¤æ¬¡ Component å‡½æ•°ï¼Œæ¥æ£€æŸ¥å‡½æ•°ç»„ä»¶çš„å¹‚ç­‰æ€§ã€‚è¿™æ—¶åŸºäºå¯å˜æ•°æ®çš„æ›´æ–°ï¼Œä¼šå¯¼è‡´ä¸¤æ¬¡æ‰§è¡Œç»“æœä¸ä¸€è‡´ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ï¼ˆä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ›´æ–°ç»“æœï¼ŒReact æ²¡æœ‰æä¾›å¾ˆå¥½çš„ Warning ä¿¡æ¯ï¼Œå¾ˆéš¾æ’æŸ¥ï¼‰ã€‚"),a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-strict-mode-xfw1e",target:"_blank",rel:"noopener noreferrer"}},[t._v("See it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"ä¸è¦ä½¿ç”¨-useref-è·å–å­ç»„ä»¶-instance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸è¦ä½¿ç”¨-useref-è·å–å­ç»„ä»¶-instance"}},[t._v("#")]),t._v(" ä¸è¦ä½¿ç”¨ useRef è·å–å­ç»„ä»¶ instance")]),t._v(" "),a("p",[t._v("React ç¤¾åŒºæœ‰ä¸ªç»„ä»¶çº¦å®šï¼Œå¯¹äºè¦æ‹¿åˆ°ç»„ä»¶å®ä¾‹æƒ…å†µä¸‹ï¼Œä¸€èˆ¬é€šè¿‡ ref ä¼ å‚å»å–å¾—æŸç»„ä»¶çš„å®ä¾‹ã€‚æ¯”å¦‚ï¼Œå¯¹äº DOM Elementï¼Œä½¿ç”¨ ref å¯ä»¥æ‹¿åˆ° dom å®ä¾‹ã€‚ä½†è¿™ç§æ–¹å¼å¹¶ä¸æ¨èï¼Œè¿›é˜¶ç¯‡å°†è®²è§£ä¸ºä»€ä¹ˆ")]),t._v(" "),a("h3",{attrs:{id:"usestateã€useref-å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestateã€useref-å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€"}},[t._v("#")]),t._v(" useStateã€useRef å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€")]),t._v(" "),a("p",[t._v("useRef ç”Ÿæˆçš„å¯å˜å¯¹è±¡ï¼Œå› ä¸ºä½¿ç”¨èµ·æ¥å°±è·Ÿæ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œèµ‹å€¼æ—¶å€™ React æ˜¯æ— æ³•æ„ŸçŸ¥åˆ°å€¼å˜æ›´çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šè§¦å‘ç»„ä»¶é‡ç»˜ã€‚åˆ©ç”¨å…¶ä¸ useState çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿™æ ·åŒºåˆ†ä½¿ç”¨ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç»´æŠ¤ä¸ UI ç›¸å…³çš„çŠ¶æ€ï¼Œä½¿ç”¨ useState")])]),t._v(" "),a("blockquote",[a("p",[t._v("ç¡®ä¿æ›´æ”¹æ—¶åˆ·æ–° UI")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å€¼æ›´æ–°ä¸éœ€è¦è§¦å‘é‡ç»˜æ—¶ï¼Œä½¿ç”¨ useRef")])]),t._v(" "),a("li",[a("p",[t._v("ä¸éœ€è¦å˜æ›´çš„æ•°æ®ã€å‡½æ•°ï¼Œä½¿ç”¨ useState")])])]),t._v(" "),a("blockquote",[a("p",[t._v("æ¯”å¦‚ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å€¼æ—¶ï¼Œå¯ä»¥è¿™æ ·ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const [immutable] = useState(someState);\n")])])]),a("p",[t._v("ä¸è¿”å›å˜æ›´å…¥å£å‡½æ•°ã€‚useRef è™½ç„¶å¯ä»¥å€ŸåŠ© TypeScript è¾¾åˆ°è¯­æ³•æ£€æµ‹ä¸Šçš„ immutableï¼Œä½†å®é™…è¿˜æ˜¯ mutable çš„ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"ç»„ä»¶é€šä¿¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶é€šä¿¡"}},[t._v("#")]),t._v(" ç»„ä»¶é€šä¿¡")]),t._v(" "),a("p",[t._v("React ä½¿ç”¨å•å‘æ•°æ®æµè¿›è¡Œ UI ç»˜åˆ¶ï¼Œåªæœ‰çˆ¶ç»„ä»¶èƒ½æ§åˆ¶å­ç»„ä»¶çš„çŠ¶æ€ï¼Œå­ç»„ä»¶ä¸èƒ½ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("å•å‘æ•°æ®æµçš„ä¼˜åŠ¿åœ¨äºä¸å­˜åœ¨æ•°æ®ç»‘å®šã€æ•°æ®ä½œç”¨åŸŸç­‰æ¦‚å¿µï¼Œè¿™æ ·ä½¿å¾—é¦–å±é€Ÿåº¦æ¯”åŒå‘ç»‘å®šå¿«ã€‚å…¶æ¬¡ï¼Œæ’æŸ¥é—®é¢˜æ›´ç®€å•ã€‚ä½†ä¸è¶³ä¹‹å¤„æ˜¯äº¤äº’ç»„ä»¶çš„ç¼–å†™ç›¸å¯¹äºåŒå‘ç»‘å®šï¼Œæ¯”è¾ƒå•°å—¦ã€‚")]),t._v(" "),a("h3",{attrs:{id:"çˆ¶å­ç»„ä»¶é€šä¿¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çˆ¶å­ç»„ä»¶é€šä¿¡"}},[t._v("#")]),t._v(" çˆ¶å­ç»„ä»¶é€šä¿¡")]),t._v(" "),a("p",[t._v("çˆ¶ç»„ä»¶é€šè¿‡å‘å­ç»„ä»¶ä¼ é€’ props é€šä¿¡ã€‚å­ç»„ä»¶é€šè¿‡å¯¹çˆ¶ç»„ä»¶æš´éœ²æ³¨å†Œå‡½æ•°çš„æ¥å£æ¥é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°è‡ªèº«çŠ¶æ€")]),t._v(" "),a("h3",{attrs:{id:"å…„å¼Ÿç»„ä»¶é€šä¿¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…„å¼Ÿç»„ä»¶é€šä¿¡"}},[t._v("#")]),t._v(" å…„å¼Ÿç»„ä»¶é€šä¿¡")]),t._v(" "),a("p",[t._v("é€šè¿‡å°†å…„å¼Ÿç»„ä»¶çš„çŠ¶æ€æ”¾åˆ°çˆ¶ç»„ä»¶ä¸Šæ¥è¿›è¡Œé€šä¿¡")]),t._v(" "),a("h3",{attrs:{id:"çˆ·å­™ç»„ä»¶é€šä¿¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çˆ·å­™ç»„ä»¶é€šä¿¡"}},[t._v("#")]),t._v(" çˆ·å­™ç»„ä»¶é€šä¿¡")]),t._v(" "),a("p",[t._v("çˆ·å­™ç»„ä»¶é€šä¿¡ä¸»è¦æœ‰ 3 ç§æ–¹å¼ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("å°†å­™å­ç»„ä»¶çš„ props å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­")])]),t._v(" "),a("li",[a("p",[t._v("é€šè¿‡ children é€ä¼ ")])]),t._v(" "),a("li",[a("p",[t._v("é€šè¿‡ context ä¼ é€’")])])]),t._v(" "),a("p",[t._v("å‡è®¾æœ‰ä¸ªä¸‰å±‚ç»„ä»¶ï¼Œçˆ·çˆ·åˆ†åˆ«ç»™å„¿å­å’Œå­™å­å‘çº¢åŒ…")]),t._v(" "),a("p",[t._v("å…ˆçœ‹é’é“œè§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-transfer-data-cross-components-1-ivyn7?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("See it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Grandpa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Daddy money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" moneyForSon"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Daddy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" moneyForSon"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" moneyForSon "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"daddy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Daddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Me money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("moneyForSon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Me")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"son"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Daddy ç»„ä»¶ä¼šé€ä¼ çˆ·çˆ·ç»™å­™å­çš„ç»„ä»¶ç»™ Meã€‚è¿™ç§æ–¹æ¡ˆçš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œä»¥åçˆ·çˆ·è¦ç»™ Daddy å’Œ Me å‘ç³–æœçš„æ—¶å€™ï¼ŒDaddy è¿˜å¾—åŠ å­—æ®µã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ–¹æ¡ˆä¸€-å°†å­™å­ç»„ä»¶çš„-props-å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸€-å°†å­™å­ç»„ä»¶çš„-props-å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­"}},[t._v("#")]),t._v(" æ–¹æ¡ˆä¸€ï¼šå°†å­™å­ç»„ä»¶çš„ props å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­")]),t._v(" "),a("p",[t._v("æŒ‰ç…§ 1 çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å›ºå®šç»™ Daddy æ·»åŠ ä¸€ä¸ª sonProps çš„å­—æ®µï¼Œç„¶åå°† Grandpa éœ€è¦ä¼ ç»™å­™å­çš„çŠ¶æ€å…¨éƒ¨é€šè¿‡ sonProps ä¼ é€’")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Grandpa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Daddy money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" sonProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Daddy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" sonProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Parameters"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" Me"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sonProps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"daddy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Daddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Me "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("sonProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Me")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"son"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™æ ·ä»¥åè¦ç»™ Me åŠ å­—æ®µï¼Œå°±ä¸ç”¨æ”¹ Daddy äº†ã€‚ä½†è¦æµ‹è¯• Daddy æ—¶è¿˜å¾— mock Me ç»„ä»¶çš„æ•°æ®ï¼ŒDaddy å’Œ Son è€¦åˆã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ–¹æ¡ˆäºŒ-é€šè¿‡-children-é€ä¼ "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäºŒ-é€šè¿‡-children-é€ä¼ "}},[t._v("#")]),t._v(" æ–¹æ¡ˆäºŒï¼šé€šè¿‡ children é€ä¼ ")]),t._v(" "),a("p",[t._v("children ç±»ä¼¼äº vue ä¸­çš„ slotï¼Œå¯ä»¥å®Œæˆä¸€äº›åµŒå¥—ç»„ä»¶é€šä¿¡çš„åŠŸèƒ½")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Grandpa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Daddy money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someMoneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Me money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someMoneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Daddy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Daddy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" children"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChildNode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"daddy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Daddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Me")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("money")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"son"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å°† Daddy çš„åµŒå¥—éƒ¨åˆ†ç”¨ children æ›¿ä»£åï¼Œè§£è€¦äº†å­ç»„ä»¶å’Œå­™å­ç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼ŒDaddy ç»„ä»¶æ›´åŠ ç‹¬ç«‹ã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ–¹æ¡ˆä¸‰-é€šè¿‡-context-é€ä¼ "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸‰-é€šè¿‡-context-é€ä¼ "}},[t._v("#")]),t._v(" æ–¹æ¡ˆä¸‰ï¼šé€šè¿‡ context é€ä¼ ")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-transfer-data-with-context-zrg9o",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("h5",{attrs:{id:"usecontextã€createcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usecontextã€createcontext"}},[t._v("#")]),t._v(" useContextã€createContext")]),t._v(" "),a("p",[t._v("ä½¿ç”¨ context åˆ†ä¸‰æ­¥")]),t._v(" "),a("p",[a("strong",[t._v("STEP 1 å£°æ˜ context")])]),t._v(" "),a("p",[t._v("ä½¿ç”¨ createContext å£°æ˜ä¸€ä¸ª Context")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const MyContext = React.createContext({})\n")])])]),a("p",[a("strong",[t._v("STEP 2 å°† Provider åŒ…åœ¨é¡¶å±‚")])]),t._v(" "),a("div",{staticClass:"language-HTML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("MyContext.Provider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("{xxxx}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("MyContext.Provider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("STEP 3 é€šè¿‡ useContext è·å–é€ä¼ æ•°æ®")])]),t._v(" "),a("div",{staticClass:"language-C++ extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const contextValue = useContext(MyContext);\n")])])]),a("p",[t._v("æ”¹å†™ä¹‹åçš„ä»£ç å˜ä¸ºï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("moneyForDaddy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("moneyForMe")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Grandpa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("moneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" moneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Daddy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Me "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Daddy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Daddy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" children"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChildNode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Daddy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Daddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("moneyForDaddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Me")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"son"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is Me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" received $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("moneyForMe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä½¿ç”¨ context ä¹‹åï¼ŒDaddy å’Œ Me ç»„ä»¶çš„æ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œè€Œä¸”å³ä½¿ä¹‹åæ”¹å˜ç»„ä»¶å±‚çº§å…³ç³»ï¼Œåªè¦è¿˜åœ¨ Provider ä¸‹ï¼Œå°±æ²¡æœ‰ä»»ä½•å½±å“ã€‚")]),t._v(" "),a("h4",{attrs:{id:"ä¸‰ç§æ–¹æ¡ˆçš„å†³ç­–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ç§æ–¹æ¡ˆçš„å†³ç­–"}},[t._v("#")]),t._v(" ä¸‰ç§æ–¹æ¡ˆçš„å†³ç­–")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ç¬¬ä¸€ç§æ–¹æ¡ˆä¸€èˆ¬ç”¨äºå›ºå®šç»“æ„å’Œè·¨ç»„ä»¶æœ‰äº’ç›¸ä¾èµ–çš„åœºæ™¯ï¼Œå¤šè§äº UI æ¡†æ¶ä¸­çš„å¤åˆç»„ä»¶ä¸åŸå­ç»„ä»¶çš„è®¾è®¡ä¸­")])]),t._v(" "),a("li",[a("p",[t._v("ç¬¬äºŒç§å¸¸ç”¨åœ¨åµŒå¥—å±‚çº§ä¸æ·±çš„ä¸šåŠ¡ä»£ç ä¸­ï¼Œæ¯”å¦‚è¡¨å•åœºæ™¯ã€‚ä¼˜ç‚¹æ˜¯é¡¶å±‚ Grandpa çš„ä¸šåŠ¡æ”¶æ•›åº¦å¾ˆé«˜ï¼Œä¸€çœ¼èƒ½çœ‹æ¸… UI ç»“æ„åŠçŠ¶æ€ç»‘å®šå…³ç³»ï¼Œç›¸å½“äºæ‹å¹³äº† React ç»„ä»¶æ ‘")])]),t._v(" "),a("li",[a("p",[t._v("ç¬¬ä¸‰ç§æ¯”è¾ƒé€šç”¨ï¼Œé€‚åˆå¤æ‚åµŒå¥—é€ä¼ åœºæ™¯ã€‚ç¼ºç‚¹æ˜¯èŒƒå¼ä»£ç è¾ƒå¤šï¼Œä¸”ä¼šé€ æˆ react dev tools å±‚çº§è¿‡å¤šï¼›Context æ— æ³•åœ¨çˆ¶ç»„ä»¶çœ‹å‡ºä¾èµ–å…³ç³»ï¼Œå¿…é¡»åˆ°å­ç»„ä»¶æ–‡ä»¶ä¸­æ‰èƒ½çŸ¥é“æ•°æ®æ¥æº")])])]),t._v(" "),a("h2",{attrs:{id:"å‰¯ä½œç”¨çš„å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰¯ä½œç”¨çš„å¤„ç†"}},[t._v("#")]),t._v(" å‰¯ä½œç”¨çš„å¤„ç†")]),t._v(" "),a("h3",{attrs:{id:"useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),a("p",[t._v("useEffect ä¼ å…¥çš„å›è°ƒä¼šåœ¨æ¯æ¬¡æ¸²æŸ“ç”Ÿæ•ˆä¹‹åæ‰§è¡Œã€‚å¸¸è§çš„ç”¨æ³•æœ‰ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("AJAX è¯·æ±‚")])]),t._v(" "),a("li",[a("p",[t._v("åŠ¨ç”»æ•ˆæœ")])]),t._v(" "),a("li",[a("p",[t._v("è§¦å‘æ•°æ®åŒæ­¥")])])]),t._v(" "),a("h4",{attrs:{id:"ajax-è¯·æ±‚èŒƒä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax-è¯·æ±‚èŒƒä¾‹"}},[t._v("#")]),t._v(" AJAX è¯·æ±‚èŒƒä¾‹")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePageData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("params")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pageIndex"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pageIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setLoading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æ¥æ ‡è®°æ˜¯å¦å¼‚æ­¥å›è°ƒå·²è¿‡æœŸ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLoading")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pageIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLoading")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pageIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªæœ‰åœ¨ pageIndex å˜æ›´çš„æ—¶å€™å‘èµ·è¯·æ±‚")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™ä¸ª ğŸŒ°  ä¸­æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸‹æ–°çš„ä¸œè¥¿ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Line 1: è¿™ä¸ªå‡½æ•°ä»¥é©¼å³°å½¢å¼å‘½åï¼Œä»¥ use å¼€å¤´ï¼ŒReact ä¸­ï¼Œè¿™ç±»å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸º hook ç»„ä»¶ã€‚ä¸ Component ç»„ä»¶ç›¸æ¯”ï¼Œhook ç»„ä»¶æ›´è´´è¿‘æ™®é€šå‡½æ•°ï¼Œå®ƒå¯¹äºå…¥å‡ºå‚æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚hook ç»„ä»¶æ›´åƒæ˜¯é¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸­çš„ä¸€æ®µä»£ç ã€‚å½“å‘ç°æŸä¸ª Component ç»„ä»¶ä¸­çš„æŸæ®µä»£ç å¯ä»¥å¤ç”¨æ—¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ copy and create ä¸€ä¸ª hook ç»„ä»¶ï¼Œè¿›è¡Œå¤ç”¨ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("Line 17: é€šè¿‡ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆé€šå¸¸ç§°ä¹‹ä¸º dependenciesï¼Œç®€ç§° depsï¼‰ï¼Œå£°æ˜æˆ‘ä»¬åªæ ¹æ® pageIndex æ˜¯å¦å˜æ›´ï¼Œæ¥å†³å®š effect æ˜¯å¦æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰ effect ä¸­ç”¨åˆ°çš„é—­åŒ…å˜é‡ï¼Œæ·»åŠ åœ¨ deps æ•°ç»„ä¸­ã€‚ä½†è¿™ä¹Ÿå¹¶éç»å¯¹çš„ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("Line 7ã€9ã€16: æˆ‘ä»¬åœ¨ effect å‡½æ•°ä¸­å£°æ˜äº†ä¸€ä¸ªå˜é‡ "),a("code",[t._v("canceled")]),t._v(" æ¥æ ‡è®°æ­¤ effect æ˜¯å¦å·²ç»è¿‡æœŸã€‚æ‰€è°“è¿‡æœŸï¼Œå°±æ¯”å¦‚ï¼špageIndex ä» 1 å˜æˆ 2 çš„æ—¶å€™ï¼ŒpageIndex = 1 æ—¶çš„ effect å°±æ˜¯è¿‡æœŸçš„ effectã€‚å› ä¸º effect é€šå¸¸å­˜åœ¨å¼‚æ­¥è°ƒç”¨ï¼Œé‚£ä¹ˆå¼‚æ­¥å‡½æ•°çš„å›è°ƒå°±è¦ç¡®ä¿ä¸å½±å“ UI æ­£å¸¸æ¸²æŸ“ã€‚æ¯”å¦‚è¿™é‡Œ pageIndex = 1 çš„è¯·æ±‚è€—æ—¶ 3sï¼Œè€Œ pageIndex = 2 çš„è¯·æ±‚è€—æ—¶ 1sï¼Œä¸” pageIndex ä» 1 å˜ä¸º 2 çš„é—´éš”åªæœ‰ 1sï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼ŒfetchData å…ˆæ‰§è¡Œ pageIndex = 2 æ—¶çš„å›è°ƒï¼Œå†æ‰§è¡Œ pageIndex = 1 æ—¶çš„å›è°ƒã€‚è¿™å°±å¯¼è‡´æœ€ç»ˆæ¸²æŸ“çš„æ˜¯ pageIndex = 1 çš„æ•°æ®ç»“æœï¼Œä¸é¢„æœŸä¸ç¬¦ã€‚è¿™é‡Œï¼Œé€šè¿‡ canceled æ ‡å¿—ä½ï¼Œå†å›æ”¶é˜¶æ®µè®¾ç½®ä¸º trueï¼Œåœ¨å¼‚æ­¥å›è°ƒçš„æ—¶å€™å†è¿›è¡Œåˆ¤æ–­ï¼Œæ¥è¾¾åˆ°å›æ”¶å¼‚æ­¥å›è°ƒçš„æ•ˆæœã€‚å¼‚æ­¥å›æ”¶ç›¸å…³çŸ¥è¯†åœ¨è¿›é˜¶ç¯‡å•ç‹¬è¯¦ç»†è®²è§£å„ç§åœºæ™¯å¦‚ä½•å¤„ç†ã€‚")])])]),t._v(" "),a("h4",{attrs:{id:"ä¸å…¶ä»–åº“ç»“åˆæ—¶-å¤„ç†å¼‚æ­¥å›è°ƒçš„å¸¸è§„æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸å…¶ä»–åº“ç»“åˆæ—¶-å¤„ç†å¼‚æ­¥å›è°ƒçš„å¸¸è§„æ“ä½œ"}},[t._v("#")]),t._v(" ä¸å…¶ä»–åº“ç»“åˆæ—¶ï¼Œå¤„ç†å¼‚æ­¥å›è°ƒçš„å¸¸è§„æ“ä½œ")]),t._v(" "),a("div",{staticClass:"language-CoffeeScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-coffeescript"}},[a("code",[t._v("import "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimport "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fromEvent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rxjs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfunction "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowSizeChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handler")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" void"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  const "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  const "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    const subscription "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resize'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" subscription"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"uselayouteffect-vs-useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect-vs-useeffect"}},[t._v("#")]),t._v(" useLayoutEffect vs. useEffect")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/effect-and-layouteffect-21khw",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("useLayoutEffect å’Œ useEffect çš„ä¼ å‚ä¸€è‡´ï¼Œä½†æœ‰ä»¥ä¸‹åŒºåˆ«")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("æ‰§è¡Œæ—¶æœºä¸åŒã€‚useLayoutEffect çš„å…¥å‚å‡½æ•°ä¼šåœ¨ react æ›´æ–° DOM æ ‘ååŒæ­¥è°ƒç”¨ã€‚useEffect ä¸ºå¼‚æ­¥è°ƒç”¨")])]),t._v(" "),a("li",[a("p",[t._v("useLayoutEffect åœ¨ development æ¨¡å¼ä¸‹ SSR ä¼šæœ‰è­¦å‘Šâš ï¸")])])]),t._v(" "),a("p",[t._v("é€šå¸¸æƒ…å†µä¸‹ useLayoutEffect ä¼šç”¨åœ¨åšåŠ¨æ•ˆå’Œè®°å½• layout çš„ä¸€äº›ç‰¹æ®Šåœºæ™¯ã€‚ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨ useLayoutEffectã€‚")]),t._v(" "),a("h2",{attrs:{id:"usememo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),a("p",[t._v("useMemo ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ç¼“å­˜ä¸€äº›è€—æ—¶è®¡ç®—ï¼Œé€šè¿‡å£°æ˜è®¡ç®—ç»“æœçš„ä¾èµ–æ˜¯å¦å˜æ›´ï¼Œæ¥é‡ç”¨ä¸Šæ¬¡è®¡ç®—ç»“æœ")])]),t._v(" "),a("li",[a("p",[t._v("ä¿è¯å¼•ç”¨ä¸å˜ï¼Œé’ˆå¯¹ä¸‹æ¸¸ä½¿ç”¨ React.memo çš„ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼ˆuseCallback ä¹Ÿæœ‰ä¸€æ ·çš„ä½œç”¨ï¼‰")])])]),t._v(" "),a("p",[t._v("æ¯”å¦‚ï¼Œè®¡ç®—è€—æ—¶çš„ fibonacci æ•°åˆ—ï¼Œå°±å¯ä»¥ç”¨ useMemo æ¥ä¼˜åŒ–åœ¨ n ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒäºŒæ¬¡æ¸²æŸ“çš„æ€§èƒ½")]),t._v(" "),a("div",{staticClass:"language-CoffeeScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-coffeescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fibonacci")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"usecallback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),a("p",[t._v("useCallback æ˜¯ç®€åŒ–ç‰ˆçš„ useMemoï¼Œæ–¹ä¾¿ç¼“å­˜å‡½æ•°å¼•ç”¨ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ç­‰ä»·çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" memoCallback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DO SOMETHING")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("åœ¨ä¹ˆæœ‰é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨ useCallback å’Œ useMemoï¼Œæ€§èƒ½ä¼˜åŒ–å…ˆäº¤ç»™æ¡†æ¶å¤„ç†è§£å†³ã€‚æ‰‹å·¥çš„å¾®ä¼˜åŒ–åœ¨æ²¡æœ‰å¯¹æ¡†æ¶å’Œä¸šåŠ¡åœºæ™¯æœ‰æ·±å…¥äº†è§£æ—¶ï¼Œå¯èƒ½å‡ºç°æ€§èƒ½åŠ£åŒ–ã€‚")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://bytedance.feishu.cn/docs/doccnKcSsW0lazRObCmw3GlGkmd",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡´å‘½çš„ useCallback/useMemoï¼ˆç¿»è¯‘ï¼‰"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://bytedance.feishu.cn/docs/doccn9SDGhQJ6mM58BxjfRJFs3d",target:"_blank",rel:"noopener noreferrer"}},[t._v("useCallback hellé—®é¢˜æ€»ç»“"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("å…³äºå¦‚ä½•å‡å°‘ useCallback çœ‹ "),a("strong",[a("a",{attrs:{href:"https://bytedance.feishu.cn/docs/doccnmgIb5KcV3F0zeE47o6PvCh#KQKJ2M",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¬¬äºŒå¤©"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("p",[t._v("React å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œé˜¶æ®µåˆ†ä¸ºï¼š")]),t._v(" "),a("ol",[a("li",[t._v("Render é˜¶æ®µ")])]),t._v(" "),a("p",[t._v("æ­¤é˜¶æ®µå°±æ˜¯å‡½æ•°æœ¬ä½“çš„æ‰§è¡Œé˜¶æ®µ")]),t._v(" "),a("ol",[a("li",[t._v("Commit é˜¶æ®µ")])]),t._v(" "),a("p",[t._v("Commit é˜¶æ®µæ˜¯æ‹¿ç€ render è¿”å›çš„ç»“æœï¼Œå»åŒæ­¥ DOM æ›´æ–°çš„é˜¶æ®µã€‚render å’Œ commit åˆ†å¼€ä»¥è¾¾åˆ°æ‰¹é‡æ›´æ–° DOM çš„ç›®çš„ï¼Œä¹Ÿæ˜¯ react ä¹‹åæ¨å‡ºå¹¶è¡Œæ¨¡å¼çš„è®¾è®¡åŸºç¡€ã€‚å¯¹äºæˆ‘ä»¬ä»£ç èƒ½æ„ŸçŸ¥åˆ°çš„éƒ¨åˆ†å°±æ˜¯ useLayoutEffect")]),t._v(" "),a("ol",[a("li",[t._v("DOM æ›´æ–°ç»“æŸ")])]),t._v(" "),a("p",[t._v("æ­¤æ—¶ DOM å·²ç»æ›´æ–°å®Œæˆï¼Œä»£ç èƒ½æ„ŸçŸ¥åˆ°çš„éƒ¨åˆ† ä»£ç ä¸Šçš„ä½“ç°å°±æ˜¯æ‰§è¡Œ useEffect")]),t._v(" "),a("h1",{attrs:{id:"ç¬¬äºŒå¤©-react-ç”Ÿæ€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒå¤©-react-ç”Ÿæ€"}},[t._v("#")]),t._v(" ç¬¬äºŒå¤©ï¼šReact ç”Ÿæ€")]),t._v(" "),a("h2",{attrs:{id:"react-dev-tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-dev-tools"}},[t._v("#")]),t._v(" React Dev Tools")]),t._v(" "),a("p",[t._v("Chromeã€FireFoxã€Edge æµè§ˆå™¨å‡æœ‰ React Dev Tools æ’ä»¶ã€‚æ­¤æ’ä»¶èƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½ ReactComponentã€æŸ¥çœ‹ Component å½“å‰çŠ¶æ€ã€æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆã€‚")]),t._v(" "),a("h3",{attrs:{id:"å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[t._v("#")]),t._v(" å®‰è£…")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://addons.mozilla.org/zh-CN/firefox/addon/react-devtools/?src=search",target:"_blank",rel:"noopener noreferrer"}},[t._v("FireFox"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://microsoftedge.microsoft.com/addons/detail/react-developer-tools/gpphkfbcpidddadnkolkpfckpihlkkil?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edge"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("å®‰è£…æˆåŠŸä¼šåœ¨åœ°å€æ å³ä¾§çœ‹åˆ°ä¸€ä¸ª react å›¾æ ‡ï¼ˆå¯¹ï¼Œå°±æ˜¯æ¯” CCTV å¤šä¸ªåœˆçš„é‚£ä¸ªï¼‰")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YWVkODQ2YjJhZTdmNTJmMTY3MmI4ZDQ3NTFmYTUzODNfQmp4NnRnSlBoZzJNM3hOS2pydHQ1TTRNUWZJTktFeXFfVG9rZW46Ym94Y25VMHowTFJ4dkV0SWNUTTlnRURGSXZnXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("æ‰“å¼€æµè§ˆå™¨ DevToolsï¼ŒæŸ¥çœ‹é¢æ¿ä¸Šæ˜¯å¦æœ‰ "),a("code",[t._v("* components")]),t._v(" å’Œ "),a("code",[t._v("* Profiler")]),t._v("ï¼Œä¸¤è€…å¯¹åº”çš„åˆ†åˆ«æ˜¯ "),a("strong",[t._v("React")]),t._v(" "),a("strong",[t._v("ç»„ä»¶æ£€è§†å™¨")]),t._v("å’Œ "),a("strong",[t._v("React æ€§èƒ½é¢æ¿")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=M2JmYTViNTU0YzA4MGRlZmYwNThiNmQyZWZmZWM2ZjVfbHVkazZVWVFZYWNPNHRia1dtak9Na0hkU3FoVUNyV3BfVG9rZW46Ym94Y25LeUhicGRUWFFKenlYRGtKWFV6MlljXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®"}},[t._v("#")]),t._v(" è®¾ç½®")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YTk3MGM4NDZiNGM2YjRjYjE2ZmEzYjYxMzVjZjE0N2VfSUZMQlJCSGpWMVZEVE9iUGNoZFp2RmJ1cGx5eHppMDdfVG9rZW46Ym94Y25kOEFybHdYR0VBNDJ2S1pMNnBoVHI0XzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("h4",{attrs:{id:"general-è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-è®¾ç½®"}},[t._v("#")]),t._v(" General è®¾ç½®")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=Zjk5N2M0MTVhOThiNzRiNzA1ZjYzYWM2NDZhYzNlNTJfQlpKVnpDd2pjYnpmVFNHemRwSmcxYVVnazZQMEo4U2tfVG9rZW46Ym94Y25Kd3M4aGxUTWhOeWtuQ1hrRDJTOGplXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("General é¢æ¿ä¸­æœ€é‡è¦çš„åŠŸèƒ½å°±æ˜¯ "),a("strong",[t._v('"Highlight updates when components render"')]),t._v("ã€‚å‹¾é€‰ä¸Šä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹ React é‡ç»˜æ—¶ï¼Œé¡µé¢å“ªäº›éƒ¨åˆ†æœ‰æ›´æ–°ã€‚åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå¸®åŠ©å†³ç­–åœ¨å“ªéƒ¨åˆ†ä¸éœ€è¦é‡ç»˜çš„ç»„ä»¶éƒ¨åˆ†æ·»åŠ  React.memo é˜»æ­¢é‡ç»˜ã€‚")]),t._v(" "),a("h4",{attrs:{id:"debugging-è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debugging-è®¾ç½®"}},[t._v("#")]),t._v(" Debugging è®¾ç½®")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGRjYWQ3OGM0NmRhNjE5N2E2NzUzYTFhMWU1M2VlYjJfbXBLaUxuNnhsWUo4eTBTNVAzRFVzT1ZrRTFkTWVobmlfVG9rZW46Ym94Y25OR3d6WkpVYUhFZUZwbTliVWN0dGdWXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v('"Append components stacks to console warnings and errors."')])]),t._v(" "),a("p",[t._v("å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®šä½ React æŠ¥é”™ä¿¡æ¯æ¥è‡ªå“ªä¸ªç»„ä»¶")]),t._v(" "),a("p",[a("strong",[t._v('"Break on warnings"')])]),t._v(" "),a("p",[t._v("ç¬”è€…ä¹Ÿä¸çŸ¥é“å•¥ä½œç”¨...æ²¡æœ‰é‡åˆ°å¼€å¯å’Œå…³é—­ä¼šä¸åŒçš„ warning case...")]),t._v(" "),a("h4",{attrs:{id:"components-è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#components-è®¾ç½®"}},[t._v("#")]),t._v(" Components è®¾ç½®")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YjkxOTYxZjc3ZWE2NDgyN2MwNmNjMDIyNWZiOWQ0YTJfOHZlRWp5QlczeWU4cUZhMWluSm1JM3JYbVJrNUNsblFfVG9rZW46Ym94Y24yU0JhTWJYcTNSc1BLSGh3Q01mR3pmXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v('"Hide components where..."')])]),t._v(" "),a("p",[t._v("æ­¤é¡¹åœ¨è¿‡æ»¤ç»„ä»¶æ ‘æ—¶æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå¤§å¤šæ•°åº”ç”¨å¯èƒ½ä¼šåœ¨é¡¶å±‚æœ‰å¾ˆå¤š Context.Providerï¼Œå°±å¯ä»¥è¿‡æ»¤ Context ç±»å‹ã€ä¸æ˜¾ç¤ºã€‚å½“æˆ‘ä»¬åªå…³å¿ƒä¸šåŠ¡é€»è¾‘å±‚çš„ç»„ä»¶æ—¶ï¼Œå¯ä»¥è¿‡æ»¤æ‰ DOM ç»„ä»¶ï¼Œå‡å°‘æ ‘çš„èŠ‚ç‚¹")]),t._v(" "),a("h4",{attrs:{id:"profiler-è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#profiler-è®¾ç½®"}},[t._v("#")]),t._v(" Profiler è®¾ç½®")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=NWYzMDVhOWMzMzQ5ZTBmMWIwOTVjZTBmOWJlYWUwMjRfZTNGWGNNWXJmVnZjT3lmTWJVZjcwTU5IeWRwNXViN2lfVG9rZW46Ym94Y241TnpQcm1pM0lTT2pNZUhsZUNhYTJkXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v('"Record why each component rendered while profiling"')])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=MDg1M2M3NzkyZWJiOThiYjNjMzIyM2VlNjY5MjBmZjJfTkxxMWN1STdYbWd1UXQxdm1qY2JWTWdKTkFkN2JWdEdfVG9rZW46Ym94Y24xa1gxSUpFS2ZwSU5VSVRDcDhKc09oXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}}),a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=NWJjNWE3YzA3OTM4ZTgwNzEyNzkzNDcxMzIzNmQ0NzNfcWthUUJqeUNnc215ZTZFSkl4ZGI5VmlSRXRQWUI3bXlfVG9rZW46Ym94Y243d0NZZ2JWOG9ScTZ4bkR2NE45Y2hmXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("å‹¾é€‰ä¹‹åä¼šåœ¨æ¸²æŸ“ç«ç„°å›¾çš„ hover é¢æ¿ä¸­çœ‹åˆ° "),a("strong",[t._v('"Why did this render"')]),t._v("ã€‚")]),t._v(" "),a("h5",{attrs:{id:"ç°åœ¨æœ‰å“ªäº›-render-åŸå› å‘¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç°åœ¨æœ‰å“ªäº›-render-åŸå› å‘¢"}},[t._v("#")]),t._v(" ç°åœ¨æœ‰å“ªäº› render åŸå› å‘¢ï¼Ÿ")]),t._v(" "),a("ol",[a("li",[t._v("Props changed")])]),t._v(" "),a("p",[t._v("â€‹     é¡¾åæ€ä¹‰ï¼Œä¼ å…¥ç»„ä»¶çš„ props å˜æ›´")]),t._v(" "),a("ol",[a("li",[t._v("The parent component rendered")])]),t._v(" "),a("p",[t._v("çˆ¶ç»„ä»¶æ¸²æŸ“å¯¼è‡´çš„å­ç»„ä»¶æ¸²æŸ“ã€‚ä¸€èˆ¬è¦åšæ€§èƒ½ä¼˜åŒ–éƒ½æ˜¯æ‰¾è¿™ç±»é‡ç»˜åŸå› çš„ç»„ä»¶ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœç»„ä»¶ä¸­æœ‰ç”¨åˆ° useContextï¼ŒProvider çš„ value å˜æ›´å¯¼è‡´çš„é‡ç»˜ä¹Ÿæ˜¯è¢«æ ‡è®°ä¸º The parent component renderedï¼Œéœ€è¦æ³¨æ„")]),t._v(" "),a("ol",[a("li",[t._v("Hooks changed")])]),t._v(" "),a("p",[t._v("Hook çŠ¶æ€å˜æ›´å¯¼è‡´çš„é‡ç»˜ï¼Œä¸€èˆ¬å°±æ˜¯æŒ‡ useState è¿”å›çš„æ›´æ–°å‡½æ•°è¢«è°ƒç”¨äº†")]),t._v(" "),a("ol",[a("li",[t._v("State changed")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªåªä¼šåœ¨ class component ä¸­æœ‰ï¼Œå¤§å®¶å¿½ç•¥")]),t._v(" "),a("p",[a("strong",[t._v('"Hide commits below xx (ms)"')])]),t._v(" "),a("p",[t._v("è®¾ç½®ä¸€ä¸ªæ›´æ–°è€—æ—¶çš„é˜ˆå€¼ï¼Œä½äºè¯¥é˜ˆå€¼çš„æ¸²æŸ“ä¸æ˜¾ç¤ºã€‚ç”¨æ¥å¿«é€Ÿè¿‡æ»¤å“ªäº›æ¸²æŸ“æœ‰æ€§èƒ½é—®é¢˜")]),t._v(" "),a("h3",{attrs:{id:"react-ç»„ä»¶æ£€è§†å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-ç»„ä»¶æ£€è§†å™¨"}},[t._v("#")]),t._v(" React ç»„ä»¶æ£€è§†å™¨")]),t._v(" "),a("p",[t._v("ç”¨æ³•å’Œ DevTools çš„å…ƒç´ é¢æ¿ç±»ä¼¼ï¼Œå¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šå®šä½åˆ°å…ƒç´ å¯¹åº”çš„ React Componentã€‚å¹¶ä¸”å¯ä»¥å®æ—¶æŸ¥çœ‹å½“å‰ç»„ä»¶å†…éƒ¨çš„ hooks çŠ¶æ€ï¼Œè¿”å›çš„ç»„ä»¶æ ‘")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=MWZlOWZkMmQxMzY4M2VkYTg0OWQ0MGM5Y2Q3YTU4MjVfUUpIaWtRVUpENnNSa0h3VExwOGxxQ3pSM0xhbHNabUJfVG9rZW46Ym94Y25SSloxVGUyZ3VzNjBCUEpma1QzdUliXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("å³ä¸Šè§’çš„å››ä¸ªå›¾æ ‡")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI3OTdlMjEwZjYyNWNkZWFmNzIyN2EzZWIwNDIyNTlfaG12Z1gwM1V1eG5QeERuYUZTd25vdXFMOHZBekFLRGVfVG9rZW46Ym94Y25rMnB5aW1uQjhueEd4MndQcnJWZWtoXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("åˆ†åˆ«ä½œç”¨å¦‚ä¸‹ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ¨¡æ‹Ÿ ReactLazy æ‡’åŠ è½½ç»„ä»¶ Suspense çŠ¶æ€")])]),t._v(" "),a("li",[a("p",[t._v("å®šä½ç»„ä»¶æ‰€æ¸²æŸ“çš„ DOM èŠ‚ç‚¹")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ Console ä¸­æ‰“å° Component å†…éƒ¨çŠ¶æ€")])]),t._v(" "),a("li",[a("p",[t._v("è·³è½¬åˆ°ç»„ä»¶æ‰€åœ¨æºæ–‡ä»¶ï¼ˆé…åˆ sourcemapï¼‰")])])]),t._v(" "),a("h3",{attrs:{id:"react-æ€§èƒ½åˆ†æé¢æ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-æ€§èƒ½åˆ†æé¢æ¿"}},[t._v("#")]),t._v(" React æ€§èƒ½åˆ†æé¢æ¿")]),t._v(" "),a("p",[t._v("Profiling é¢æ¿å¦‚ä¸‹å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=MjlmMzE1ZWZiOGMzNWE4YzA0YTc5YTMxMmI2ZjI1MjNfVzNZeXV4UHp2YmdvSmhLMkhPcWloU2FHWERZS09HU0lfVG9rZW46Ym94Y25ZN1BPaTkzYmJXTHNieTdBaTlva29kXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("Toolbar éƒ¨åˆ†çš„åŠŸèƒ½å’Œ Chrome dev tools çš„ performance panel ä¸€æ¨¡ä¸€æ ·ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹å½•åˆ¶ã€åˆ·æ–°é¡µé¢å¹¶å½•åˆ¶ã€æ¸…é™¤è®°å½•ã€åŠ è½½ Profiling æ•°æ®ã€ä¸‹è½½ Profiling æ•°æ®ã€‚")]),t._v(" "),a("h4",{attrs:{id:"flamegraph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flamegraph"}},[t._v("#")]),t._v(" Flamegraph")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YzliMTE3OWExMWViNzg4NTA4MDY0NmIwYmJiZTgyZTdfYTNjSldGY3lZNG1rc2U2REZzTGlzcldlS3hScTlQZXVfVG9rZW46Ym94Y250d01YN1NtMjBGekUzakdoWjFRS1JWXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("æŸ¥çœ‹ç»„ä»¶å±‚çº§çš„è€—æ—¶åŠå…³è”å±‚çº§ã€ç´¯åŠ å…³ç³»ã€‚é¢œè‰²æ·±æµ…ä»£è¡¨è€—æ—¶é•¿çŸ­ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹çš„ç€è‰²ï¼Œè·Ÿå…·ä½“è€—æ—¶æ²¡å…³ç³»ï¼ˆæ¯”å¦‚ï¼Œ0.1ms å¯èƒ½æ˜¯é»„è‰²ï¼Œ16ms å¯èƒ½æ˜¯ç»¿è‰²ï¼Œå…·ä½“è¦çœ‹æœ€é•¿è€—æ—¶çš„åº¦é‡æ˜¯å¤šå°‘ï¼‰")]),t._v(" "),a("h4",{attrs:{id:"ranked"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ranked"}},[t._v("#")]),t._v(" Ranked")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=MmNiODU2MmNiMjM4ZTJhMDFiNzhkZjA5MjYxODIxODBfRVBvdHAwRDZmdFphN1Zsbk9zWlZCTUNTdkU0ZHNZaG5fVG9rZW46Ym94Y25rVjZxbHdiM3Bxbnh5S2hNWXRFeVZnXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("çº¯çœ‹æ¯ä¸ªç»„ä»¶çš„æ¸²æŸ“é€Ÿåº¦æ’åºï¼Œæ²¡æœ‰ä»»ä½•å±‚çº§å…³è”å…³ç³»ï¼Œæ„ä¹‰ä¸å¤§")]),t._v(" "),a("h4",{attrs:{id:"interactions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interactions"}},[t._v("#")]),t._v(" Interactions")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=NTkzMWI1YzFlNGRmZTE1YzQxYzQ4MWIyZTgzMTRkM2JfMjlIOHNQQXlIWWFaTVZxMUtnR1JwckJacDNzZWt1cWlfVG9rZW46Ym94Y25YU2REUW9nS3FjUlUxbG9ScVBMaEZiXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("æ˜¾ç¤ºäº¤äº’ä¿¡æ¯å¯¹äºæ¯æ¬¡æ¸²æŸ“çš„å½±å“ï¼ˆç›®å‰ R17-rc.0 è¯¥åŠŸèƒ½ä¸å¯ç”¨ï¼Œæœ‰ bugï¼‰")]),t._v(" "),a("p",[t._v("è¿™å—éœ€è¦å†™ä¸“é—¨è·Ÿè¸ª interactions çš„ä»£ç ï¼Œå…·ä½“ç”¨æ³•ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å•æ¬¡è§¦å‘é‡ç»˜çš„æ€§èƒ½è·Ÿè¸ª")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" unstable_trace "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'scheduler/tracing'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unstable_trace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'handle click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("s")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Clicked Times"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",[a("li",[t._v("æµå¼è§¦å‘æ€§èƒ½è·Ÿè¸ªï¼Œé€‚åˆéœ€è¦å¯¹æŸä¸ªè¿ç»­å¼‚æ­¥æµç¨‹åšè·Ÿè¸ªæˆ–è€…ç›¸å…³è”çš„å¼‚æ­¥ä»»åŠ¡åšæ¸²æŸ“æ¯”è¾ƒçš„åœºæ™¯")])]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸ç”¨æ‹…å¿ƒç”Ÿäº§ç¯å¢ƒçš„æ€§èƒ½é—®é¢˜ï¼Œ**scheduler/**"),a("strong",[t._v("tracing")]),t._v(" æœ¬èº«åšäº† production å’Œ development æ‰“åŒ…çš„åŒºåˆ†ï¼Œproduction æ‰“åŒ…ä¼šæ˜¯ä¸€äº›é€ä¼ å‡½æ•°ï¼Œä¸èµ·å®é™…ä½œç”¨")])]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/react-profiler-i3oi5?file=/src/index.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v('åœ¨ä¸Šé¢çš„ Codesandbox ä¸­ï¼Œå¯¹æ‰€æœ‰ resize åŠ¨ä½œå½“åšä¸€ä¸ª stream åŠ¨ä½œæµè¿›è¡Œ profilingã€‚å¯¹åˆ—è¡¨ä¸­çš„ Nextã€Prevã€PageSizeChange åšäº†å•æ¬¡æ“ä½œçš„ profilingã€‚å¯ä»¥ç‚¹å‡» Codesandbox é¢„è§ˆé¢æ¿éƒ¨åˆ†çš„ "Open In New Window" æ‰“å¼€ React DevTools æŸ¥çœ‹ Profiling é¢æ¿çš„æ•ˆæœã€‚')]),t._v(" "),a("h2",{attrs:{id:"ç»„ä»¶æ€§èƒ½ä¼˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶æ€§èƒ½ä¼˜åŒ–"}},[t._v("#")]),t._v(" ç»„ä»¶æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),a("p",[t._v("React ç»„ä»¶æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ‡’è®¡ç®—çš„ï¼ˆç±»ä¼¼äº Thunk çš„æ¦‚å¿µï¼‰ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹ä¸éœ€è¦é‡æ–°è®¡ç®—ï¼ˆé‡ç»˜ï¼‰æ—¶ï¼Œä»–çš„å­æ ‘éƒ½ä¸ä¼šè®¡ç®—ï¼ˆé‡ç»˜ï¼‰ã€‚"),a("strong",[t._v("æ‰€ä»¥æˆ‘ä»¬åšæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼Œå°±æ˜¯åœ¨å°½é‡ç¦»æ ¹èŠ‚ç‚¹è¿‘çš„ä½ç½®ï¼Œæ‹¦æˆªä¸å¿…è¦çš„èŠ‚ç‚¹é‡ç®—ï¼Œä»è€Œå‡å°‘é‡ç»˜çš„è®¡ç®—é‡ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"react-memo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-memo"}},[t._v("#")]),t._v(" React.memo")]),t._v(" "),a("p",[t._v("é˜»æ­¢èŠ‚ç‚¹é‡ç»˜ä¸»è¦é€šè¿‡ React.memo æ–¹æ³•ç”Ÿæˆç‰¹æ®Šçš„ç»„ä»¶èŠ‚ç‚¹ã€‚å®ƒæ¥å—ä¸¤ä¸ªä¼ å‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-CSS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[t._v("React."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" areEqual"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ol",[a("li",[t._v("Component")])]),t._v(" "),a("p",[t._v("ç»„ä»¶")]),t._v(" "),a("ol",[a("li",[t._v("areEqual")])]),t._v(" "),a("p",[t._v("æ¯”è¾ƒå‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°çš„å…¥å‚æœ‰ä¸¤ä¸ªï¼Œarg0 ä¸º å‰ä¸€æ¬¡æ¸²æŸ“çš„ props, arg1 ä¸ºæœ¬æ¬¡æ¸²æŸ“çš„ propsã€‚å¦‚æœè¿”å› trueï¼Œåˆ™è¯¥èŠ‚ç‚¹æœ¬æ¬¡æ¸²æŸ“å°†è¢«æ ‡è®°ä¸ºæ— éœ€é‡æ–°è®¡ç®—ï¼Œä»è€Œä½¿å…¶æ‰€æœ‰å­èŠ‚ç‚¹ã€å­™å­èŠ‚ç‚¹éƒ½æ— éœ€è®¡ç®—ã€‚")]),t._v(" "),a("p",[t._v("areEqual å¦‚æœä¸ä¼ ï¼Œé»˜è®¤ä½¿ç”¨")]),t._v(" "),a("div",{staticClass:"language-Lisp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-lisp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("prevProps")]),t._v(", nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" => shallowEqual"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token car"}},[t._v("prevProps")]),t._v(", nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("åšä¸ºæ¯”è¾ƒå‡½æ•°ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹"}},[t._v("#")]),t._v(" å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹")]),t._v(" "),a("p",[t._v("ä½¿ç”¨å‰ä¸€ç« èŠ‚æåˆ° React DevTools ä¸­çš„ Profiling åŠŸèƒ½ï¼Œrecord å‘ç”Ÿå¡é¡¿çš„æ“ä½œï¼Œä»è€—æ—¶é•¿çš„ç»„ä»¶é€ä¸ªæŸ¥çœ‹ï¼Œæ‰¾åˆ°é‚£äº›è·Ÿæ­¤æ¬¡æ“ä½œæ— å…³çš„ä¸Šå±‚æ¸²æŸ“èŠ‚ç‚¹ï¼Œå°è¯•ä½¿ç”¨ React.memo åŒ…è£¹è¿™äº›ç»„ä»¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–"}},[t._v("#")]),t._v(" ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–")]),t._v(" "),a("p",[t._v("åœ¨æ²¡æœ‰æ€§èƒ½é—®é¢˜å‰ï¼Œä¸ç”¨å»çº ç»“æ˜¯å¦è¦ç”¨ Profilingã€React.memoã€useMemoã€useCallback å»ä¼˜åŒ–æ€§èƒ½ï¼Œè¿™äº›ä¸ä¸€å®šèƒ½å¸¦æ¥æ€§èƒ½æå‡ï¼Œåè€Œè‚¯å®šä¼šå¸¦æ¥é¦–å±çš„æ€§èƒ½ä¸‹é™ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒReact ç°æœ‰ç®—æ³•ä»¥èƒ½æ»¡è¶³æ€§èƒ½éœ€æ±‚ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å¯¹äºä¸€ä¸ªç»„ä»¶-æœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹äºä¸€ä¸ªç»„ä»¶-æœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜"}},[t._v("#")]),t._v(" å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œæœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("State å˜æ›´")])]),t._v(" "),a("li",[a("p",[t._v("ä¾èµ–çš„ context å˜æ›´")])]),t._v(" "),a("li",[a("p",[t._v("çˆ¶ç»„ä»¶é‡ç»˜")])])]),t._v(" "),a("p",[t._v("æ‰€ä»¥ç”¨ React.memo åŒ…è£¹ä¹‹åï¼Œå¹¶ä¸æ˜¯è¯´æ€§èƒ½å°±ä¼šæœ‰å¤šå¤§çš„æé«˜ã€‚å¦‚æœç»„ä»¶ä¸­ä¾èµ–çš„ context ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†å¹¶ä¸æ˜¯æ­¤ç»„ä»¶éœ€è¦çš„æ•°æ®ï¼Œä½†ä¼šç»å¸¸å˜æ›´ï¼Œä¹Ÿä¼šå¯¼è‡´ç»„ä»¶ç»å¸¸é‡ç»˜ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€å±‚ç»„ä»¶ï¼ŒæŠŠä¾èµ– context ä¸­çš„æ•°æ®ï¼Œé€šè¿‡å¢åŠ çš„ä¸€å±‚çˆ¶ç»„ä»¶å–å‡ºæ¥ï¼Œç„¶åé€šè¿‡ props ä¼ ç»™çœŸæ­£æ¸²æŸ“çš„ç»„ä»¶ï¼ŒæŠŠ React.memo åŠ åœ¨çœŸæ­£æ¸²æŸ“çš„ç»„ä»¶ä¸Šï¼Œæ¥è¾¾åˆ°å±è”½ context å˜æ›´å¼•èµ·çš„é‡ç»˜é—®é¢˜ã€‚")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useMemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useContext "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" SomeContext "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./SomeContext'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PickContextData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SomeContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" someDataFromContext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RenderComponent data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someDataFromContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" RenderComponent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç•¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æ›´é€šç”¨ç‚¹ï¼Œå¯ä»¥å°è£…å‡º react-redux çš„ connect å‡½æ•°ï¼Œä¼ å…¥ selector æ¥å–æ‰€éœ€çš„ Context æ•°æ®ã€‚")]),t._v(" "),a("h3",{attrs:{id:"é€šè¿‡-reducer-æ”¶æ•›ä¸šåŠ¡é€»è¾‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-reducer-æ”¶æ•›ä¸šåŠ¡é€»è¾‘"}},[t._v("#")]),t._v(" é€šè¿‡ reducer æ”¶æ•›ä¸šåŠ¡é€»è¾‘")]),t._v(" "),a("p",[t._v("åœ¨å¤æ‚ç»„ä»¶ä¸­ï¼Œéšç€ state çš„å¢åŠ ï¼Œå¸¸å¸¸ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("useCallback/useMemo/useEffect çš„ä¾èµ–å›¾è°±é€æ¸å¤æ‚")])]),t._v(" "),a("li",[a("p",[t._v("useCallback/useMemo/useEffect å½¢æˆå±‚å å…³ç³»çš„ä¾èµ–ï¼Œæ‰¾ä¸åˆ°æºå¤´ï¼Œæˆ–è€…å†™äº†å¤šä½™çš„ä¾èµ–ï¼Œéš¾ä»¥æ¢³ç†ä¾èµ–å…³ç³»")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸Šé¢çš„ä»£ç åœ¨ CodeReview è¿‡ç¨‹ä¸­ç»å¸¸çœ‹åˆ°ã€‚")]),t._v(" "),a("p",[t._v("ä¸€æ—¦å¼€å§‹ç”¨ useCallback/useMemoï¼Œå°±å‘ç°ä¸ºäº†å¼•ç”¨ä¸å˜ï¼Œdeps å¼€å§‹ç—…æ¯’ä¼ æ’­...")])]),t._v(" "),a("p",[t._v("éšç€ deps çš„å¢å¤šï¼Œä»£ç ç»´æŠ¤æˆæœ¬ã€ç†è§£æˆæœ¬ä¹Ÿç›´çº¿ä¸Šå‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ reducer å‡½æ•°æ¥æ”¶æ•›é€»è¾‘ï¼Œå‡å°‘ deps")]),t._v(" "),a("ol",[a("li",[t._v("é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™ state çš„èµ‹å€¼é€»è¾‘ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬å°†æ‰€æœ‰é¡µé¢ç”¨åˆ°çš„ useState çŠ¶æ€éƒ½æ”¾åˆ°ä¸€èµ·")])]),t._v(" "),a("div",{staticClass:"language-TypeScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰ reducer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reducer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fn1'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return nextState;")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fn2'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return nextState;")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fn3'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return nextState;")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœé…åˆ immerï¼Œä¼šæ›´é¦™")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" produce "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reducer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("produce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("draft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ol",[a("li",[t._v("ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºç±»ä¼¼ redux çš„ dispatch æ–¹æ³•")])]),t._v(" "),a("blockquote",[a("p",[t._v("æœ‰åŒå­¦è¿™é‡Œå¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ useReducerï¼Ÿå› ä¸º useReducer è¿”å›çš„ dispatch ä¼ å‚åªèƒ½ä¼ ä¸€ä¸ªï¼Œæœ‰æ—¶å€™å°±æ˜¯å¸Œæœ›æœ‰å¤šä¸ªä¼ å‚ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœè¦åšä¸€äº›éªšæ“ä½œï¼Œéœ€è¦å†å°è£…ä¸€æ¬¡ useReducer çš„ dispatchã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä¸€èˆ¬ç”¨ useState æ¥æ‰¿è½½ reducer é€»è¾‘ï¼Œæ–¹ä¾¿åœ¨å‡½æ•°ä¸­æ’å…¥ç‰¹æ®Šéœ€æ±‚ï¼ˆæ¯”å¦‚åšå˜æ›´æ—¥å¿—è®°å½•ã€undoã€redoï¼‰")])]),t._v(" "),a("p",[t._v("å¦‚æœä»£ç ä¸­ï¼Œæœ‰è®¸å¤š deps æ¥è‡ªäºä¸åŒçš„ useStateï¼Œé‚£å°±å¯ä»¥é€šè¿‡æŠŠ useState åˆå¹¶åœ¨ä¸€èµ·ï¼Œé€šè¿‡ setState ä¼ å…¥å‡½æ•°ï¼Œæ¥è·å–å½“å‰æœ€æ–° state çš„çŠ¶æ€ï¼Œä»è€Œå‡å°‘è¿™éƒ¨åˆ†çš„ depsã€‚")]),t._v(" "),a("h2",{attrs:{id:"react-å¸¸è§-typescript-é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-å¸¸è§-typescript-é—®é¢˜"}},[t._v("#")]),t._v(" React å¸¸è§ TypeScript é—®é¢˜")]),t._v(" "),a("p",[t._v("è¯¦è§ï¼š"),a("a",{attrs:{href:"https://bytedance.feishu.cn/docs/doccnWCkCq6eKsPyjhme6GtM3ld",target:"_blank",rel:"noopener noreferrer"}},[t._v("React@16.8.4+ å¸¸ç”¨ Typescript å®šä¹‰"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"å¸¸ç”¨åº“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨åº“"}},[t._v("#")]),t._v(" å¸¸ç”¨åº“")]),t._v(" "),a("h3",{attrs:{id:"react-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[t._v("#")]),t._v(" react-router")]),t._v(" "),a("p",[t._v("react-router æ˜¯ç”¨æ¥å¤„ç† React åº”ç”¨å•é¡µè·¯ç”±è·³è½¬çš„æ ¸å¿ƒåŒ…ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… react-router-domã€‚")]),t._v(" "),a("p",[t._v("å®˜ç½‘åœ°å€ï¼šhttps://reacttraining.com/react-router/web")]),t._v(" "),a("h3",{attrs:{id:"redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://redux.js.org/basics/basic-tutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("redux"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Redux æ˜¯ä¸€ä¸ªæµè¡Œçš„çŠ¶æ€ç®¡ç†åº“ï¼Œåœ¨è¾ƒå¤æ‚çš„åº”ç”¨ä¸­ï¼Œä¸ºäº†ç®¡ç†å…¨å±€åº”ç”¨çš„çŠ¶æ€ï¼Œä¼šä½¿ç”¨åˆ°ã€‚Redux ç”±äºå…¶ç®€å•çš„ api å’Œå¼ºå¤§ä¸­é—´ä»¶çš„æ‰©å±•æœºåˆ¶ï¼Œå·²ç»è¡ç”Ÿå‡ºäº†å¾ˆå¤šåŸºäº Redux è®¾è®¡ç†å¿µçš„ç”Ÿæ€åº“ã€å…¶ä»–å¹³å°çš„å®ç°ï¼ˆflutter/reduxã€vuexï¼‰ï¼Œæ¯”å¦‚:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://doc.bytedance.net/docs/1621/1812/12389/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reduck"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://github.com/dvajs/dva",target:"_blank",rel:"noopener noreferrer"}},[t._v("dva"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://rematch.netlify.app/#/introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("rematch"),a("OutboundLink")],1)])])]),t._v(" "),a("p",[t._v("å®˜ç½‘åœ°å€ï¼šhttps://redux.js.org/")]),t._v(" "),a("h3",{attrs:{id:"immer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#immer"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/immerjs/immer",target:"_blank",rel:"noopener noreferrer"}},[t._v("immer"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("immer å¸¸ç”¨æ¥åšå¤æ‚æ•°æ®çš„æ›´æ–°ï¼Œèƒ½å¸®åŠ©ä½ æ›´æ–°å¤æ‚æ•°æ®çš„æ•´ä¸ªå¼•ç”¨ä¿¡æ¯ï¼Œæ–¹ä¾¿åš shallowEqualã€‚")]),t._v(" "),a("h1",{attrs:{id:"ç¬¬ä¸‰å¤©-è¿›é˜¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰å¤©-è¿›é˜¶"}},[t._v("#")]),t._v(" ç¬¬ä¸‰å¤©ï¼šè¿›é˜¶")]),t._v(" "),a("h2",{attrs:{id:"æœ€ä½³å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" æœ€ä½³å®è·µ")]),t._v(" "),a("h3",{attrs:{id:"å°†å…¶ä»–-ui-åº“å°è£…ä¸º-react-ç»„ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°†å…¶ä»–-ui-åº“å°è£…ä¸º-react-ç»„ä»¶"}},[t._v("#")]),t._v(" å°†å…¶ä»– UI åº“å°è£…ä¸º React ç»„ä»¶")]),t._v(" "),a("p",[t._v("UI åº“æ— å¤–ä¹è¾“å…¥ä¸€äº›é…ç½® + æŸä¸ª DOM èŠ‚ç‚¹ï¼Œæ¸²æŸ“å‡ºå…¶ä»– DOMã€‚æˆ‘ä»¬åªè¦æŠ“ä½ UI åº“çš„ updateã€ destroy æ–¹æ³•ï¼Œç”¨ useEffect åœ¨ render ä¹‹åè°ƒç”¨ update æ–¹æ³•ï¼Œåœ¨å¸è½½çš„æ—¶å€™è°ƒç”¨ destroy æ–¹æ³•ï¼Œå°±åŸºæœ¬å®Œæˆäº† React åŒ–çš„å°è£…ã€‚å¦‚æœæ²¡æœ‰ destroy æ–¹æ³•ï¼Œå°±ç”¨ key å»å¼ºåˆ¶å¸è½½ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸ª VanillaJS é£æ ¼çš„ Tooltip åº“ï¼Œéœ€è¦å°†å®ƒå°è£…æˆ React ç»„ä»¶ï¼Œæ€è·¯æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("æ‰¾åˆ° Tooltip æ‰€æœ‰è§¦å‘ UI æ›´æ–°çš„ update æ–¹æ³•")])]),t._v(" "),a("li",[a("p",[t._v("æ‰¾åˆ° Tooltip çš„ destroy æ–¹æ³•")])]),t._v(" "),a("li",[a("p",[t._v("å°† Tooltip æ”¯æŒçš„ props è®¾ç½®ä¸º ReactTooltip çš„ props ç±»å‹")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ ReactTooltip çš„ useEffect ä¸­å°†å½±å“ UI çš„ props ä½œä¸º dependenciesï¼Œè°ƒç”¨ Tooltip çš„ update æ–¹æ³•")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ useEffect çš„å›è°ƒå‡½æ•°çš„è¿”å›å‡½æ•°ä¸­ï¼Œè°ƒç”¨ destroy æ–¹æ³•")])])]),t._v(" "),a("p",[t._v("ä¸‹é¢çš„ Codesandbox ä¸­ï¼ŒVanillaTooltip.ts ä½œä¸ºä¸€ä¸ªæ™®é€šçš„ UI åº“ï¼Œæä¾›ç®€å•çš„ tooltip åŠŸèƒ½ã€‚Tooltip.tsx æ–‡ä»¶å¯¹ VanillaTooltip è¿›è¡Œäº†å°è£…ï¼Œä½¿ä¹‹å¯ä»¥å½“ React ç»„ä»¶ä½¿ç”¨")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/vanilla-to-react-78vwf?file=/src/VanillaTooltip.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"å¼‚æ­¥æ“ä½œå›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥æ“ä½œå›æ”¶"}},[t._v("#")]),t._v(" å¼‚æ­¥æ“ä½œå›æ”¶")]),t._v(" "),a("p",[t._v("æµè§ˆå™¨ç¯å¢ƒä¸­å¼‚æ­¥æ‰§è¡Œçš„ä»£ç æ— éä»¥ä¸‹å‡ ç§ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("è®¡æ—¶å™¨ setTimeout / setInterval / requestAnimationFrame")])]),t._v(" "),a("li",[a("p",[t._v("Promise fufilled æˆ–è€… rejected åå›è°ƒ")])]),t._v(" "),a("li",[a("p",[t._v("å„ç§æµè§ˆå™¨åŸç”Ÿäº‹ä»¶")])]),t._v(" "),a("li",[a("p",[t._v("å„ç§ XXXObserver çš„å›è°ƒå‡½æ•°")])])]),t._v(" "),a("h4",{attrs:{id:"è®¡æ—¶å™¨å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¡æ—¶å™¨å›æ”¶"}},[t._v("#")]),t._v(" è®¡æ—¶å™¨å›æ”¶")]),t._v(" "),a("p",[t._v("é’ˆå¯¹ç¬¬ä¸€ç±»ï¼Œè®¡æ—¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¯¹åº”çš„æ³¨é”€æ–¹æ³•æ¥å›æ”¶è®¡æ—¶å™¨çš„å¼‚æ­¥å›è°ƒ")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startAnimate1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timerId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startAnimate2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" intervalId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startAnimate3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timerId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("intervalId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"æ’æ¡©å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’æ¡©å›æ”¶"}},[t._v("#")]),t._v(" æ’æ¡©å›æ”¶")]),t._v(" "),a("p",[t._v("é’ˆå¯¹ Promise è¿™ç±»æ²¡æœ‰åŸç”Ÿå›æ”¶æ–¹æ¡ˆçš„çš„å¼‚æ­¥æ“ä½œï¼Œæ¯”è¾ƒé€šç”¨çš„æ–¹æ³•æ˜¯æ’æ¡©å›æ”¶")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pageIindex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DO SOMETHING UI UPDATE")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pageIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä¸Šé¢çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ ‡å¿—ä½ï¼ˆcanceledï¼‰ï¼Œé€šè¿‡å‡½æ•°é—­åŒ…åœ¨å¼‚æ­¥å›è°ƒçš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯å¦æ ‡å¿—ä½å·²ç»è¿‡æœŸï¼ˆcanceled = trueï¼‰ï¼Œå¦‚æœè¿‡æœŸï¼Œä¸æ‰§è¡Œå›è°ƒã€‚")]),t._v(" "),a("p",[t._v("è¿™æ˜¯ä¸€ç§æ¯”è¾ƒé€šç”¨çš„åšæ³•ï¼Œé’ˆå¯¹è®¡æ—¶å™¨çš„å›è°ƒä¹Ÿé€‚ç”¨ã€‚")]),t._v(" "),a("div",{staticClass:"language-CoffeeScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-coffeescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  const id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startAnimate1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  const timerId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startAnimate2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  const intervalId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startAnimate3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" setInterval ä¸èƒ½è¿™ä¹ˆç©ï¼Œå¿…é¡»ç”¨ "),a("span",{pre:!0,attrs:{class:"token inline-javascript"}},[a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("`")])]),t._v(" æ¸…æ‰\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" canceled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ‰©å±•çš„å¼‚æ­¥å·¥å…·åº“ï¼Œå¤„ç† cancelã€‚æ¯”å¦‚ï¼šaxios çš„ cancelTokenï¼Œrxjs çš„ unsubscribeã€takeUntilï¼Œbluebird çš„ cancel ç­‰ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ·±å…¥åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å…¥åŸç†"}},[t._v("#")]),t._v(" æ·±å…¥åŸç†")]),t._v(" "),a("h3",{attrs:{id:"valid-jsx-element"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#valid-jsx-element"}},[t._v("#")]),t._v(" Valid JSX Element")]),t._v(" "),a("p",[t._v("ä¸€ä¸ª JSX Element åˆæ³•çš„è¿”å›ç±»å‹æœ‰ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ReactElement ("),a("code",[t._v("<Component />")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("æ•°å­— ("),a("code",[t._v("1")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("æ•°ç»„ ("),a("code",[t._v("[1, <Component />, '``str``', null, [11, <Component />, false]]")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("å­—ç¬¦ä¸² ("),a("code",[t._v('"string"')]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("null ("),a("code",[t._v("null")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("false ("),a("code",[t._v("false")]),t._v(")")])])]),t._v(" "),a("p",[t._v("ä½†ç”±äº TS å®šä¹‰é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ä¸€ä¸ª Component è¿”å›çš„æ˜¯æ•°å­—ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€falseï¼Œä¸èƒ½ä»¥ "),a("code",[t._v("<Component />")]),t._v("æ–¹å¼è°ƒç”¨ï¼Œåªèƒ½ "),a("code",[t._v("{Component()}")]),t._v(" è°ƒç”¨")]),t._v(" "),a("h4",{attrs:{id:"fragment-çš„ä½œç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fragment-çš„ä½œç”¨"}},[t._v("#")]),t._v(" Fragment çš„ä½œç”¨")]),t._v(" "),a("p",[t._v("å¦‚æœè§‰å¾— "),a("code",[t._v("{Component()}")]),t._v(" è¿™ç§æ–¹å¼è°ƒç”¨å¾ˆä¸çˆ½ï¼Œä¸æ•´é½ï¼Œå¯ä»¥è€ƒè™‘ç”¨ Fragment åŒ…è£¹ä¸€ä¸‹ã€‚")]),t._v(" "),a("div",{staticClass:"language-HTML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Fragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{1}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("{'str'}{null}{[11, "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(", false]}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Fragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("è¿™æ ·å°±èƒ½ç»•è¿‡ TS ç±»å‹æ£€æŸ¥çš„é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("Fragment å®è´¨ä¸Šæ˜¯ä¸ªç‰¹æ®Šæ¸²æŸ“ç‰‡æ®µï¼Œç›¸å½“äºä»¥æ•°ç»„çš„æ–¹å¼åŒ…è£¹ä¸€ç»„ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚")]),t._v(" "),a("h3",{attrs:{id:"key-å’Œ-ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-å’Œ-ref"}},[t._v("#")]),t._v(" key å’Œ ref")]),t._v(" "),a("p",[t._v("React ç»„ä»¶ä¸­ props æœ‰ä¸¤ä¸ªä¿ç•™å­—æ®µï¼Œkey å’Œ refã€‚")]),t._v(" "),a("h4",{attrs:{id:"key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[t._v("#")]),t._v(" key")]),t._v(" "),a("p",[t._v("key æ˜¯ç”¨æ¥è¿½è¸ª React Component å’Œå®é™…æ¸²æŸ“çš„ DOM èŠ‚ç‚¹ç”¨çš„ã€‚é»˜è®¤ä½¿ç”¨ç»„ä»¶æ‰€åœ¨ä½ç½®è¿›è¡Œæ ‡è®°ã€‚")]),t._v(" "),a("p",[t._v("åœ¨æ¸²æŸ“æ•°ç»„æ•°æ®æ—¶ï¼Œæä¾› key å¯ä»¥æå‡ React å¤ç”¨ DOM èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/key-1st6g",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸Šé¢çš„ Codesandbox ä¸­ï¼Œå½“ä¸€é¡µæœ‰ 3000 æ¡æ•°æ®æ—¶ï¼Œä½¿ç”¨ id ä½œä¸º key çš„æ—¶å€™ï¼Œç¿»é¡µæ¸²æŸ“æ€§èƒ½æ•°æ®å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE1NTIyNjFhNWZlMGE5YzUzZDZiMjY2MzNiZTM5NDJfc3lac3BSVzFaWUE3M3diZlBHODEzcEVzTWQwQ0Z3TVlfVG9rZW46Ym94Y25sV082NDBPQzEyUk5nVUl6YXA2RmllXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨ index ä½œä¸º key æ—¶ï¼Œç¿»é¡µæ¸²æŸ“æ€§èƒ½å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=MDM3NDJlNzg2YTcwYjNlNDhiZjAwNmQ3N2ZmYWI3MDBfV1NIcUZHOEtMZGFEczlHbzg0V1lBa2Naa2huTGEyS2xfVG9rZW46Ym94Y25NSmJaTHNjTzhCN3RBYjJlM0F3MjNjXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v("å¯è§ index ä½œä¸º key æ¯” id å¿«ä¸€å€")])]),t._v(" "),a("p",[t._v("åŸå› æ˜¯å½“ç»„ä»¶æ ‘æŸä½ç½®çš„ key è·Ÿä¹‹å‰æ¸²æŸ“çš„åŒä½ç½®èŠ‚ç‚¹æœ‰å˜æ›´æ—¶ï¼Œreact ä¼šè®¤ä¸ºæºç»„ä»¶ä¸å¯å¤ç”¨ï¼Œä¼šæ‰§è¡Œå®Œæ•´çš„ unmount æ­¥éª¤ï¼Œåˆ é™¤åŒ…æ‹¬çœŸå® DOM èŠ‚ç‚¹åœ¨å†…çš„æ‰€æœ‰æ•°æ®ï¼Œå®Œå…¨é‡æ–°åˆå§‹åŒ–è¯¥èŠ‚ç‚¹ã€‚è¿™ä¸ªæ€§èƒ½å·®è·ä¼šéšç€èŠ‚ç‚¹å¤æ‚åº¦æˆå‡ ä½•çº§åˆ«çš„å¢å¤§ã€‚æ‰€ä»¥ï¼Œ"),a("strong",[t._v("ä¸è¦å¬ä¿¡ä¸€äº›æœ€ä½³å®è·µæ‰€è°“çš„è¦å°† id ä½œä¸º key æ¸²æŸ“ã€‚å¼„æ¸…æ¥š react è¿è¡Œçš„åŸç†ï¼Œæ‰èƒ½åšå‡ºæ°å½“çš„é€‰æ‹©ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ€»ç»“ä¸€ä¸‹ï¼š")]),t._v(" "),a("p",[t._v("å½“æ¸²æŸ“çš„ç»„ä»¶æ˜¯"),a("strong",[t._v("å®Œå…¨å—æ§çš„ç»„ä»¶")]),t._v("æ—¶ï¼Œå°±"),a("strong",[t._v("åº”è¯¥ç”¨ index ä½œä¸º key")]),t._v("ï¼Œä»¥æœ€å¤§é™åº¦å¤ç”¨å·²æœ‰èŠ‚ç‚¹æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("å½“æ¸²æŸ“çš„ç»„ä»¶æœ‰å†…éƒ¨ state æ—¶ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜ keyï¼Œæ¥é‡ç½®ç»„ä»¶å†…éƒ¨ stateã€‚")])]),t._v(" "),a("h4",{attrs:{id:"ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref"}},[t._v("#")]),t._v(" ref")]),t._v(" "),a("p",[t._v("ref ä¸€èˆ¬ç”¨æ¥è·å– DOM èŠ‚ç‚¹ã€‚")]),t._v(" "),a("p",[t._v("react æœ¬è´¨ä¸Šå°† ref ä½œä¸º Mutable å¯¹è±¡æ¥çœ‹å¾…ï¼Œé€šè¿‡ ref å¯ä»¥åå‘å°†å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•å’ŒçŠ¶æ€é€šè¿‡ Mutable çš„ ref ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œåœ¨è¿™é‡Œä¸æ¨èç”¨ refï¼Œå› ä¸ºå†™èµ·æ¥éº»çƒ¦ï¼Œä¸”å®¹æ˜“å†…å­˜æ³„æ¼ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("è¡¥å†…å­˜æ³„æ¼çš„ä¾‹å­ï¼šhttps://codesandbox.io/s/how-ref-cause-mmo-hhqd3")]),t._v(" "),a("p",[t._v("ä¾‹å­ä¸­ï¼ŒMemoryLeakComponent ç»„ä»¶é€šè¿‡ ref å‘å¤–æš´éœ²å†…éƒ¨çŠ¶æ€ï¼ˆbutton DOM èŠ‚ç‚¹ï¼‰ã€‚Row ç»„ä»¶åœ¨ onMount æ—¶æŠŠ MemoryLeakComponent çš„ button ç‚¹å‡»å‡½æ•°å°è£…æš´éœ²ç»™äº† Appã€‚App æŒæœ‰äº† onclick ç‚¹å‡»å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("é¡µé¢ä¸­é€šè¿‡ reset all æŒ‰é’®æ”¹å˜ Row ç»„ä»¶çš„ key æ¥è¾¾åˆ°æ›¿æ¢ Row ç»„ä»¶çš„ç›®çš„ã€‚")]),t._v(" "),a("p",[t._v("æ‰“å¼€ DevTools Performance Monitorï¼Œè§‚å¯Ÿ JS EventListenerã€JSHeapã€DOM Nodes çš„å˜åŒ–ï¼š")])]),t._v(" "),a("p",[t._v("æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ª ref ä¾‹å­ï¼šç°åœ¨éœ€è¦å¯¹å¤–æš´éœ²è‡ªå®šä¹‰ç»„ä»¶çš„ reset æ–¹æ³•æ¥é‡ç½®å†…éƒ¨çŠ¶æ€")]),t._v(" "),a("blockquote",[a("p",[t._v("åœ¨ TS ä¸­ï¼Œä½¿ç”¨ React.ForwardRefRenderFunction ç±»å‹æ¥å®šä¹‰ ref ç»„ä»¶")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAJQKYEMDGMA0cDecBm0A7ilACbL7YCuAzkgMowoxLaXYBixpFS+AUQAeEGMDQBhCOAgA7JLKyJ+AQRgwowAEbVWtGvQ5wAClAhhaAdWAwAFhF1G6SAJLgkUFsABuSABIosmQANkhwAL4EZiBwAORQqBixANwAUKlIQpCwcDAAnmBhAOZIMJQAPAAqAHxwALxwlXCZrEG0cNxQJOSUwqLiUjLyiuUmZhbWdg5l-OXAsvgeJrUAZMr4ahrauki0cwtLlQBM1bUA-I1HcABccPK+UGkZWdDwaHK08BK2wMFk9QQeD1+AAKEFgca0W44VJwOBkfgoajBGBSaiKW6yaggLQeVLhbAJfC3CowuHUMBkFhINGKEHvdEwa5YnEeACUt28EGAZDS4WqbPqtTJcHesk+cAA2gzFJh6KiHIoALoA5xMangyEAOgR+CRKNpMDZaTh5PobkKnjEvgCQVCIKJmBBgrqtRBIvJlOphvpiqNHtN8p9MqNsNN4TD4TZxrDCRg1CgsjgILDcPKZB81RD0JD4XKAHoM95qmG2fiy5lsm8PvBjKQFPAGs6hbgw2KJWgfn9KKrDLMSjN8OV8oUIPg4N9fmRTiCscFgjG4XGE0mU6a4OnM6mN0W4HIJMFxABrOo4Zuu1vruGdqeULVoBMJRRnLUUqmsH0ARgADIvw-y32pUUuzIAsixLddyknP54URZEFUZU9P0iIlTxvbt+HCfMINNMCtzhMsI3SIA",target:"_blank",rel:"noopener noreferrer"}},[t._v("forward-ref"),a("OutboundLink")],1),t._v(" è¿™é‡Œæ˜¯ TS ä½“æ“å¹¿åœº")]),t._v(" "),a("p",[t._v("ä¸ºäº†ä½¿ç”¨ ref è¿™ä¸ª props ä¸­çš„ä¿ç•™å­—ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªç»„ä»¶å _Componentï¼Œå¢åŠ ä¸€ä¸ªè·Ÿ context ä½ç½®é‡å çš„ç¬¬äºŒä¸ªå½¢å‚ï¼ŒReact DevTools ä¸­ä¹Ÿä¼šå¢åŠ ä¸€å±‚ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ç¬¬äºŒä¸ªå½¢å‚åœ¨æœ‰ Component.ContextTypes å­˜æ—¶ï¼Œä¼šä¼ å…¥ contextã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™é‡Œçš„ ref åˆ°åº•æ˜¯ Context è¿˜æ˜¯ ref å°±æœ‰ç‚¹å¾®å¦™äº†ã€‚å®¹æ˜“å‡ºé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥ï¼Œåœ¨å°è£…è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨ refï¼Œè‡ªå·±æ·»åŠ ä¸€ä¸ª props å±æ€§æ›¿æ¢æ‰ ref å³å¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("internalState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setInternalState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useImperativeHandle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInternalState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getCurrentState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" internalState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("internalState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SomeUI "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Component "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forwardRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_Component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è¿™æ ·é¿å… context å½¢å‚ä½ç½®çš„å†²çªï¼Œå°‘äº†ä¸€å±‚ forwardRef çš„ç»„ä»¶å±‚çº§ï¼Œå°‘äº†ä¸€æ¬¡çº ç»“æ€ä¹ˆèµ·å˜é‡åå­—çš„è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v('åŸåˆ™ä¸Šå°½å¯èƒ½é¿å…å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶æ·»åŠ è‡ªèº«å†…éƒ¨æ–¹æ³•å’Œæ•°æ®çš„è¡Œä¸ºã€‚é€šè¿‡ props æš´éœ²å­ç»„ä»¶è¡Œä¸ºæ‰æ˜¯æ­£é“ã€‚æ¯”å¦‚ï¼šè¦æš´éœ² focus æ–¹æ³•çš„è¯ï¼Œå¯ä»¥åƒ input[type="checkbox"] çš„ checked å’Œ onChange é‚£æ ·å»å®ç°ï¼š')]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" focus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onFocusChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("restProps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inputRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onFocusChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("focus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inputRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("restProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onBlur"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onFocusChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onFocus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onFocusChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™æ ·ä¿®æ”¹åï¼Œå¦‚æœè¦ focus åˆ° MyInput ç»„ä»¶ï¼Œå°±å¯ä»¥ä»æ‹¿ç€ç»„ä»¶çš„ ref å»å‘½ä»¤å¼çš„è°ƒç”¨ "),a("code",[t._v("ref.current.focus()")])]),t._v(" "),a("p",[t._v("æ”¹æˆå£°æ˜å¼çš„")]),t._v(" "),a("p",[a("code",[t._v("<MyInput focus={isFocus} onFocusChange={handleFocusChange} />")])]),t._v(" "),a("h4",{attrs:{id:"ref-çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼åŠå‰¯ä½œç”¨å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref-çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼åŠå‰¯ä½œç”¨å›æ”¶"}},[t._v("#")]),t._v(" ref çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼åŠå‰¯ä½œç”¨å›æ”¶")]),t._v(" "),a("p",[t._v("ref ä½œä¸º React ä¸­å”¯ä¸€çš„ Mutable ä¼ é€’æ–¹å¼ï¼Œå½¢æˆäº†ä¸€å¥—ç‹¬ç‰¹çš„ä½¿ç”¨èŒƒä¾‹ã€‚å¦‚æœä¼ ç»™ ref çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è°ƒç”¨æœ‰ä»¥ä¸‹è§„åˆ™ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("å¦‚æœ ref å‡½æ•°è·Ÿä¸Šä¸€æ¬¡çš„ ref å‡½æ•°ä¸ä¸€è‡´ï¼ˆå¼•ç”¨æ¯”è¾ƒï¼‰ï¼Œé‚£ä¹ˆä¼šåœ¨ä¸Šä¸€æ¬¡æ¸²æŸ“çš„ useLayoutEffect / useEffect çš„å›æ”¶å‡½æ•°è°ƒç”¨åè°ƒç”¨ï¼Œä¸”è°ƒç”¨å‚æ•°ä¸º nullï¼Œåœ¨æœ¬æ¬¡æ¸²æŸ“çš„ useLayoutEffect / useEffect çš„å›è°ƒå‡½æ•°ä¹‹å‰ï¼Œç”¨ reference å®ä¾‹è°ƒç”¨ä¸€æ¬¡ ref å‡½æ•°ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å¦‚æœ ref å‡½æ•°è·Ÿä¸Šä¸€æ¬¡çš„ ref å‡½æ•°ä¸€è‡´ï¼Œåˆ™é‡ç»˜æ—¶ä¸ä¼šè°ƒç”¨ ref å‡½æ•°")])])]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/about-ref-callback-424k4?file=/src/App.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç‚¹å‡» forceUpdate è§¦å‘ç»„ä»¶é‡ç»˜çš„æ—¶å€™ï¼Œanonymous æ‰€åœ¨çš„ ref ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ï¼Œè€Œ standalone ä¸ä¼šã€‚å½“ç‚¹å‡» hide / show è§¦å‘ç»„ä»¶å¸è½½å’ŒæŒ‚è½½çš„æ—¶å€™ï¼Œä¸¤ä¸ª refCallback éƒ½ä¼šè¢«è°ƒç”¨ã€‚")]),t._v(" "),a("p",[t._v("æœ€åçš„æœ€åï¼Œä¸ºäº†æœ€å¤§é™åº¦ä¿è¯åœ¨ä½¿ç”¨ ref æ—¶ä¸ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨ useRef æ¥è·å– refï¼Œå› ä¸ºè¿™æ ·å°±å°‘äº† ref æ˜¯ null çš„å¤„ç†æ­¥éª¤ã€‚ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚ä¸‹é¢çš„ refCallbackï¼‰ï¼Œé€šè¿‡ TS çš„ç±»å‹æ—¶åˆ»æé†’è‡ªå·± ref æ˜¯ null çš„å¤„ç†ã€‚")]),t._v(" "),a("div",{staticClass:"language-TypeScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" refCallback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reference"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" YourReferenceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reference "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispose")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    reference"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("refCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h3",{attrs:{id:"å—æ§ä¸éå—æ§çš„å†³ç­–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å—æ§ä¸éå—æ§çš„å†³ç­–"}},[t._v("#")]),t._v(" å—æ§ä¸éå—æ§çš„å†³ç­–")]),t._v(" "),a("p",[a("strong",[t._v("å—æ§ç»„ä»¶ï¼š")])]),t._v(" "),a("p",[t._v("æ²¡æœ‰å†…éƒ¨çŠ¶æ€æˆ–å†…éƒ¨çŠ¶æ€å®Œå…¨ç”± props å†³å®šçš„ç»„ä»¶")]),t._v(" "),a("p",[a("strong",[t._v("éå—æ§ç»„ä»¶ï¼š")])]),t._v(" "),a("p",[t._v("å­˜åœ¨ä¸å— props æ§åˆ¶çš„å†…éƒ¨çŠ¶æ€çš„ç»„ä»¶")]),t._v(" "),a("p",[t._v("å—æ§å’Œéå—æ§å¸¸è§äºä¸ç”¨æˆ·äº¤äº’ç›¸å…³çš„ç»„ä»¶ä¸­ï¼Œå…¸å‹çš„ä¾‹å­æ˜¯åŸç”Ÿçš„ input ç»„ä»¶ï¼Œæ ¹æ®ä¸åŒå†™æ³•ï¼Œå¯ä»¥æ˜¯å—æ§ä¹Ÿå¯ä»¥æ˜¯éå—æ§")]),t._v(" "),a("div",{staticClass:"language-HTML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("/* å—æ§çš„ input å†™æ³• */\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("{text}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onChange")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n/* éå—æ§ input å†™æ³• */\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("{initialText}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onChange")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("React ç¤¾åŒºå·²ç»å½¢æˆä¸€ç§å…±è¯†ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶æ—¢å¯ä»¥å—æ§ä¹Ÿå¯ä»¥éå—æ§è¿è¡Œï¼Œä¸€èˆ¬ä¼ å…¥ defaultValue/defaultChecked çš„è¡¨ç¤ºè¿è¡Œåœ¨éå—æ§æ¨¡å¼ï¼Œä¼ å…¥ value/checked å’Œ onChange è¡¨ç¤ºè¿è¡Œåœ¨å—æ§æ¨¡å¼ã€‚")]),t._v(" "),a("h4",{attrs:{id:"å—æ§ç»„ä»¶çš„ä¼˜ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å—æ§ç»„ä»¶çš„ä¼˜ç¼ºç‚¹"}},[t._v("#")]),t._v(" å—æ§ç»„ä»¶çš„ä¼˜ç¼ºç‚¹")]),t._v(" "),a("h5",{attrs:{id:"ä¼˜ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜ç‚¹"}},[t._v("#")]),t._v(" ä¼˜ç‚¹")]),t._v(" "),a("p",[t._v("å—æ§ç»„ä»¶ç”±äºå®Œå…¨å—çˆ¶ç»„ä»¶çš„ä¼ å‚æ§åˆ¶ï¼Œæ„å‘³ç€ä½¿ç”¨å¤šä¸ªå—æ§ç»„ä»¶æ—¶ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶è‡ªç„¶è€Œç„¶çš„è®¿é—®ã€ä¿®æ”¹æ‰€æœ‰ç»„ä»¶çŠ¶æ€ã€‚å½“æœ‰å¤šä¸ªå—æ§ç»„ä»¶çŠ¶æ€é€šä¿¡ã€è”åŠ¨çš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶å¯ä»¥æ–¹ä¾¿çš„æ ¹æ®éœ€æ±‚æ›´æ–°å­ç»„ä»¶çŠ¶æ€ã€‚")]),t._v(" "),a("h5",{attrs:{id:"ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹"}},[t._v("#")]),t._v(" ç¼ºç‚¹")]),t._v(" "),a("p",[t._v("ç»„ä»¶çŠ¶æ€ä¸é—­ç¯ï¼Œæ€§èƒ½å·®ã€‚å—æ§ç»„ä»¶æ‰€æœ‰çŠ¶æ€å­˜æ”¾åœ¨çˆ¶ç»„ä»¶ï¼Œå¯¼è‡´å—æ§ç»„ä»¶éœ€è¦æ›´æ–° UI æ—¶ï¼Œéœ€è¦é€šè¿‡è§¦å‘çˆ¶ç»„ä»¶çš„çŠ¶æ€æ›´æ–°æ¥æ›´æ–°è‡ªèº«ï¼Œçˆ¶ç»„ä»¶çš„æ›´æ–°ä¼šè§¦å‘æ‰€æœ‰å­ç»„ä»¶æ›´æ–°ã€‚")]),t._v(" "),a("p",[t._v("æ€§èƒ½é—®é¢˜å¸¸è§åœ¨ CRUD åˆ—è¡¨å’Œå¤æ‚è¡¨å•ä¸šåŠ¡ä¸­å‡ºç°ã€‚å—æ§ç»„ä»¶å³ä½¿å®Œå…¨ç‹¬ç«‹äºå…¶ä»–å…„å¼Ÿç»„ä»¶ï¼Œæ›´æ–°æ—¶ä¹Ÿä¼šè§¦å‘å…„å¼Ÿç»„ä»¶çš„é‡ç»˜ã€‚")]),t._v(" "),a("p",[t._v("ä½¿ç”¨è¾ƒå¤æ‚ï¼Œå› ä¸º props ä¼ å‚å¤šã€‚ä¸åˆ©äºçˆ¶ç»„ä»¶åˆ†ç¦»å…³æ³¨ç‚¹ã€‚")]),t._v(" "),a("h4",{attrs:{id:"éå—æ§ç»„ä»¶ä¼˜ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#éå—æ§ç»„ä»¶ä¼˜ç¼ºç‚¹"}},[t._v("#")]),t._v(" éå—æ§ç»„ä»¶ä¼˜ç¼ºç‚¹")]),t._v(" "),a("h5",{attrs:{id:"ä¼˜ç‚¹-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜ç‚¹-2"}},[t._v("#")]),t._v(" ä¼˜ç‚¹")]),t._v(" "),a("p",[t._v("éå—æ§ç»„ä»¶çš„ä¼˜ç¼ºç‚¹æ­£å¥½å’Œå—æ§ç»„ä»¶ç›¸åã€‚ä¼˜ç‚¹æ˜¯æ€§èƒ½å¥½ï¼Œæ›´æ–°ä¸ä¾èµ–çˆ¶ç»„ä»¶ï¼Œä»è€Œé¿å…è§¦å‘å…„å¼Ÿç»„ä»¶æ›´æ–°ã€‚ç”±äºé€»è¾‘é«˜å†…èšï¼Œå¯¹çˆ¶ç»„ä»¶ä¼ å‚ä¾èµ–å°‘ï¼Œä½¿ç”¨ä¹Ÿæ›´ç®€å•ã€‚")]),t._v(" "),a("h5",{attrs:{id:"ç¼ºç‚¹-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹-2"}},[t._v("#")]),t._v(" ç¼ºç‚¹")]),t._v(" "),a("p",[t._v("éå—æ§ç»„ä»¶çš„é‡ç½®å’Œå…³è”æ›´æ–°æ¯”è¾ƒå›°éš¾ã€å¤æ‚ï¼Œéœ€è¦å…ˆå¸è½½æ‰ç»„ä»¶å†é‡æ–°åˆå§‹åŒ–ï¼Œä¸€èˆ¬ä½¿ç”¨ key æ¥è§£å†³")]),t._v(" "),a("p",[t._v("ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„è¡¨å•åˆ†åˆ«å—æ§ä¸éå—æ§å®ç°çš„ä»£ç åŒºåˆ«")]),t._v(" "),a("p",[a("strong",[a("a",{attrs:{href:"https://codesandbox.io/s/vibrant-burnell-q61zs?file=/src/ControlledForm.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Try it on Codesandbox"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("React Conf 2018 ç¬¬ä¸€æ¬¡ä»‹ç» Hooks æ—¶çš„ç°åœºä¾‹å­å°±æ˜¯éå—æ§ç»„ä»¶ç”¨ key é‡ç½®çŠ¶æ€")]),t._v(" "),a("p",[t._v("æ— æ³•å¤åˆ¶åŠ è½½ä¸­çš„å†…å®¹")]),t._v(" "),a("p",[t._v("å—æ§ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œ"),a("strong",[t._v("value/checked å’Œ onChange æˆå¯¹å‡ºç°")]),t._v("ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨äº‹ä»¶ä»£ç†åœ¨çˆ¶å…ƒç´ ä¸Šå†’æ³¡å¤„ç†æ‰€æœ‰ onChange äº‹ä»¶ï¼Œä½† React å¯¹äºå—æ§ç»„ä»¶çš„åˆ¤æ–­æ˜¯ value/checked å’Œ onChange æˆå¯¹å‡ºç°ï¼Œä¸ç„¶ä¼šåœ¨ development æ¨¡å¼ä¸‹æœ‰ä¸ª warningï¼‰ã€‚å—æ§ç»„ä»¶éœ€è¦åœ¨ onChange çš„æ—¶å€™æ›´æ”¹ stateï¼Œæ¥è§¦å‘é‡ç»˜ã€‚")]),t._v(" "),a("p",[t._v("éå—æ§ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯åªæœ‰ä¸€ä¸ª defaultValue/defaultChecked çš„å±æ€§ã€‚ä¸éœ€è¦æ›´æ–°è®°å½• stateï¼Œå› æ­¤ä¹Ÿä¸ä¼šé€ æˆé‡ç»˜ã€‚å®ç°åŠŸèƒ½çš„ä»£ç ä¹Ÿæ›´å°‘ã€‚ä½†å¯¹äºå¤æ‚çš„è”åŠ¨éœ€æ±‚ï¼ˆå…³è”äº¤éªŒã€è”åŠ¨æ›´æ–°ï¼‰çš„åœºæ™¯ï¼Œéš¾ä»¥æ”¯æŒï¼ˆæˆ–è€…è¯´éœ€è¦é¢å¤–çš„æŠ€å·§ï¼‰ã€‚æ‰€ä»¥å¤§å¤šæ•°æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„æƒ…å†µä¸‹ï¼Œ"),a("strong",[t._v("æ¨èå¤§å®¶ä½¿ç”¨å—æ§ç»„ä»¶å¼€å‘")]),t._v("ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("é€šè¿‡å°è£…é«˜é˜¶ç»„ä»¶å¯ä»¥ç®€åŒ–å—æ§ç»„ä»¶çš„èŒƒå¼ä»£ç ï¼Œå¯¹äºè¡¨å•ç±»å¤§é‡å—æ§ç»„ä»¶çš„åœºæ™¯ï¼Œæ¨èä½¿ç”¨æˆç†Ÿçš„è¡¨å•è§£å†³æ–¹æ¡ˆï¼Œå¦‚ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://github.com/formium/formik",target:"_blank",rel:"noopener noreferrer"}},[t._v("formik"),a("OutboundLink")],1),t._v(" ç‰¹ç‚¹ï¼šæ˜“ç”¨ï¼Œæ¥å£è®¾è®¡å¥½ï¼Œæ€§èƒ½å·®")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://github.com/final-form/react-final-form",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-final-form"),a("OutboundLink")],1),t._v(" ç‰¹ç‚¹ï¼šè¾ƒéš¾ç”¨ï¼Œæ€§èƒ½å¥½")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://react-hook-form.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-hook-form"),a("OutboundLink")],1),t._v(" ç‰¹ç‚¹ï¼šæ›´æ¥è¿‘åŸç”Ÿ html form çš„å®ç°ï¼Œç›´æ¥æ“ä½œ DOMï¼Œéå—æ§ï¼Œæ€§èƒ½æœ€å¥½")])])])]),t._v(" "),a("h2",{attrs:{id:"å…¶ä»–çŸ¥è¯†ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–çŸ¥è¯†ç‚¹"}},[t._v("#")]),t._v(" å…¶ä»–çŸ¥è¯†ç‚¹")]),t._v(" "),a("h3",{attrs:{id:"server-side-render"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-side-render"}},[t._v("#")]),t._v(" Server Side Render")]),t._v(" "),a("p",[t._v("React å¯ä»¥ä½œä¸º UI æ¨¡æ¿åœ¨æœåŠ¡ç«¯æ¸²æŸ“")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("ReactDOMServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderToString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello World"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("React æœ¬èº«å½“å­—ç¬¦ä¸²æ¨¡æ¿æ¸²æŸ“ HTML å…¶å®å¾ˆç®€å•ã€‚ä½†ç”±äº HTML æœ‰å¾ˆå¤šé™¤äº† JS ä¹‹å¤–çš„èµ„æºäº§ç‰©ï¼Œé—®é¢˜å°±å˜å¾—å¤æ‚èµ·æ¥ã€‚è¿™é‡Œå…ˆä¸å±•å¼€å¯¹äºé JS ç±»å‹èµ„æºåŠå…¶ä»–å‰¯ä½œç”¨çš„å¤„ç†ï¼Œä»ç®€å•çš„å‡½æ•°ç†è§£ ServerSideRender çš„åŸç†ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºæ¯ä¸ªè¯·æ±‚åœ°å€ï¼ˆè¾“å…¥å‚æ•°ï¼‰ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆå‡½æ•°ï¼‰åº”è¯¥æ˜¯ä¸€å®šçš„é¡µé¢å‘ˆç°ï¼ˆè¾“å‡ºï¼‰")]),t._v(" "),a("p",[t._v("React çš„æœåŠ¡ç«¯æ¸²æŸ“æµç¨‹å’ŒåŸç†ä¸Šè·Ÿå…¶ä»– jadeã€ejs æ¨¡æ¿å¼•æ“çš„æ¸²æŸ“æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://bytedance.feishu.cn/space/api/box/stream/download/asynccode/?code=YjNiYzkwZTBiNmYwMjE5NjA4NDRkMzZkNzNiZTRhMmNfczVPTGR3YThxZU0ydW0zdFFDRzR1c3A1SnJqYWhOMWVfVG9rZW46Ym94Y25MMWl0ajNUa0ZuNERSQkVzcjA4Q0FjXzE2NDQ0MjI2MzQ6MTY0NDQyNjIzNF9WNA",alt:"img"}})]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼ŒuseEffect / useLayoutEffect / useImperativeHandle æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œæ‰€æœ‰ Component éƒ½æ˜¯åŒæ­¥è°ƒç”¨ï¼Œä¸€æ¬¡å®Œæˆæ¸²æŸ“ã€‚æ‰€ä»¥éœ€è¦åœ¨æ¸²æŸ“å‰å‡†å¤‡å¥½æ¸²æŸ“æ‰€éœ€çš„æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("æ•´ä¸ª React æœåŠ¡ç«¯æ¸²æŸ“æµç¨‹è·Ÿå…¶ä»–æœåŠ¡ç«¯æ¸²æŸ“æŠ€æœ¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ä¸ºäº†æœ€å¤§é™åº¦å¤ç”¨å‰ç«¯ç»„ä»¶çš„é€»è¾‘ï¼Œç¤¾åŒºäº§ç”Ÿäº†å„ç§æœåŠ¡ç«¯æ¸²æŸ“çš„èŒƒå¼ï¼Œé€šè¿‡ä¸€äº›çº¦å®šã€é…ç½®ï¼Œæ¥å¤ç”¨å‰ç«¯é€»è¾‘ã€ç®€åŒ–æœåŠ¡ç«¯æ¸²æŸ“çš„å¤æ‚åº¦ï¼ˆä¸»è¦æ˜¯æå‰è·å–æ¸²æŸ“æ‰€éœ€æ•°æ®çš„æ­¥éª¤å’Œä¸€äº›å‰¯ä½œç”¨ï¼ŒåšåŒæ„è®¾è®¡ã€‚æ¯”å¦‚ï¼šä¸ºäº†å¤ç”¨å¤„ç† document.title çš„å€¼ï¼Œreact-helmet æœ‰è‡ªèº«çš„æœåŠ¡ç«¯æ¸²æŸ“èŒƒå¼ï¼Œè¿™æ ·å°±ä¸éœ€è¦åœ¨æœåŠ¡ç«¯æ ¹æ®æ¯ä¸ªé¡µé¢è®¾ç½®ä¸åŒçš„ title äº†ï¼›styled-componentsã€jss ä¹Ÿéƒ½æœ‰å„è‡ªçš„ css æœåŠ¡ç«¯ä¾èµ–æ”¶é›†èŒƒå¼ï¼›next.js åˆ™åŒæ„å¢åŠ çº¦å®šçš„é™æ€å‡½æ•°ï¼Œæ¥è¿›è¡Œæ¥å£è¯·æ±‚çš„åŒæ„ï¼‰ã€‚")]),t._v(" "),a("h1",{attrs:{id:"é™„å½•æ‰©å±•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™„å½•æ‰©å±•"}},[t._v("#")]),t._v(" é™„å½•æ‰©å±•")]),t._v(" "),a("h2",{attrs:{id:"ç›¸å…³æ–‡æ¡£é“¾æ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³æ–‡æ¡£é“¾æ¥"}},[t._v("#")]),t._v(" ç›¸å…³æ–‡æ¡£é“¾æ¥")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://reactrouter.com/web/guides/quick-start",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactRouter"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://redux.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redux"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://styled-components.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("StyledComponents"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://design.bytedance.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ByteDesign"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://ant.design/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AntDesign"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"è‡ªå®šä¹‰-react-renderer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰-react-renderer"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰ React Renderer")]),t._v(" "),a("p",[t._v("æ— æ³•å¤åˆ¶åŠ è½½ä¸­çš„å†…å®¹")])])}),[],!1,null,null,null);a.default=e.exports}}]);